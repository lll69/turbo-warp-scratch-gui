(window["webpackJsonpGUI"]=window["webpackJsonpGUI"]||[]).push([["addon-entry-fullscreen"],{"./node_modules/css-loader/index.js!./src/addons/addons/fullscreen/hideOverflow.css":function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__("./node_modules/css-loader/lib/css-base.js")(false);exports.push([module.i,".sa-fullscreen.sa-body-editor {\n  overflow: hidden !important;\n}\n",""])},"./node_modules/css-loader/index.js!./src/addons/addons/fullscreen/hideToolbar.css":function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__("./node_modules/css-loader/lib/css-base.js")(false);exports.push([module.i,'[class*="stage-wrapper_full-screen"] [class*="stage-header_stage-header-wrapper-overlay"] {\n  display: none;\n}\n\n[class*="stage-wrapper_full-screen"] {\n  top: 0rem !important;\n}\n',""])},"./node_modules/css-loader/index.js!./src/addons/addons/fullscreen/removeBorder.css":function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__("./node_modules/css-loader/lib/css-base.js")(false);exports.push([module.i,'[class*="stage-wrapper_full-screen"] [class*="stage_full-screen"],\n[class*="stage-wrapper_full-screen"] [class*="stage_green-flag-overlay-wrapper"] {\n  border: 0 !important;\n  border-radius: 0 !important;\n}\n',""])},"./node_modules/css-loader/index.js!./src/addons/addons/fullscreen/resizeWindow.css":function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__("./node_modules/css-loader/lib/css-base.js")(false);exports.push([module.i,'[class*="stage-wrapper_full-screen"] [class*="stage-wrapper_stage-canvas-wrapper"],\n[class*="stage-wrapper_full-screen"] [class*="stage_stage"],\n[class*="stage-wrapper_full-screen"] [class*="stage-header_stage-menu-wrapper"],\n[class*="stage-wrapper_full-screen"] canvas {\n  width: min(calc((100vh - 44px) * var(--sa-fullscreen-width) / var(--sa-fullscreen-height)), 100vw) !important;\n}\n\n[class*="stage-wrapper_full-screen"] [class*="stage-wrapper_stage-canvas-wrapper"],\n[class*="stage-wrapper_full-screen"] [class*="stage_stage"],\n[class*="stage-wrapper_full-screen"] [class*="stage_green-flag-overlay-wrapper"],\n[class*="stage-wrapper_full-screen"] canvas {\n  height: min(calc(100vh - 44px), calc(100vw * var(--sa-fullscreen-height) / var(--sa-fullscreen-width))) !important;\n}\n\n[class*="stage-wrapper_full-screen"] {\n  padding: 0rem !important;\n}\n\n[class*="stage-wrapper_full-screen"] [class*="monitor-list_monitor-list"] {\n  overflow: visible;\n}\n\n[class*="stage-wrapper_full-screen"] [class*="stage_question-wrapper"] {\n  width: auto !important;\n}\n',""])},"./node_modules/css-loader/index.js!./src/addons/addons/fullscreen/resizeWindow_noToolbar.css":function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__("./node_modules/css-loader/lib/css-base.js")(false);exports.push([module.i,'[class*="stage-wrapper_full-screen"] [class*="stage-wrapper_stage-canvas-wrapper"],\n[class*="stage-wrapper_full-screen"] [class*="stage_stage"],\n[class*="stage-wrapper_full-screen"] [class*="stage-header_stage-menu-wrapper"],\n[class*="stage-wrapper_full-screen"] canvas {\n  width: min(calc(100vh * var(--sa-fullscreen-width) / var(--sa-fullscreen-height)), 100vw) !important;\n}\n\n[class*="stage-wrapper_full-screen"] [class*="stage-wrapper_stage-canvas-wrapper"],\n[class*="stage-wrapper_full-screen"] [class*="stage_stage"],\n[class*="stage-wrapper_full-screen"] [class*="stage_green-flag-overlay-wrapper"],\n[class*="stage-wrapper_full-screen"] canvas {\n  height: min(100vh, calc(100vw * var(--sa-fullscreen-height) / var(--sa-fullscreen-width))) !important;\n}\n\n[class*="stage-wrapper_full-screen"] {\n  padding: 0rem !important;\n}\n\n[class*="stage-wrapper_full-screen"] [class*="monitor-list_monitor-list"] {\n  overflow: visible;\n}\n\n[class*="stage-wrapper_full-screen"] [class*="stage_question-wrapper"] {\n  width: auto !important;\n}\n',""])},"./src/addons/addons/fullscreen/_runtime_entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"resources",function(){return resources});var _userscript_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/addons/addons/fullscreen/userscript.js");var _css_loader_hideOverflow_css__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/index.js!./src/addons/addons/fullscreen/hideOverflow.css");var _css_loader_hideOverflow_css__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_css_loader_hideOverflow_css__WEBPACK_IMPORTED_MODULE_1__);var _css_loader_removeBorder_css__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/css-loader/index.js!./src/addons/addons/fullscreen/removeBorder.css");var _css_loader_removeBorder_css__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_css_loader_removeBorder_css__WEBPACK_IMPORTED_MODULE_2__);var _css_loader_resizeWindow_css__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/css-loader/index.js!./src/addons/addons/fullscreen/resizeWindow.css");var _css_loader_resizeWindow_css__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_css_loader_resizeWindow_css__WEBPACK_IMPORTED_MODULE_3__);var _css_loader_resizeWindow_noToolbar_css__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/css-loader/index.js!./src/addons/addons/fullscreen/resizeWindow_noToolbar.css");var _css_loader_resizeWindow_noToolbar_css__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_css_loader_resizeWindow_noToolbar_css__WEBPACK_IMPORTED_MODULE_4__);var _css_loader_hideToolbar_css__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/css-loader/index.js!./src/addons/addons/fullscreen/hideToolbar.css");var _css_loader_hideToolbar_css__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_css_loader_hideToolbar_css__WEBPACK_IMPORTED_MODULE_5__);const resources={"userscript.js":_userscript_js__WEBPACK_IMPORTED_MODULE_0__["default"],"hideOverflow.css":_css_loader_hideOverflow_css__WEBPACK_IMPORTED_MODULE_1___default.a,"removeBorder.css":_css_loader_removeBorder_css__WEBPACK_IMPORTED_MODULE_2___default.a,"resizeWindow.css":_css_loader_resizeWindow_css__WEBPACK_IMPORTED_MODULE_3___default.a,"resizeWindow_noToolbar.css":_css_loader_resizeWindow_noToolbar_css__WEBPACK_IMPORTED_MODULE_4___default.a,"hideToolbar.css":_css_loader_hideToolbar_css__WEBPACK_IMPORTED_MODULE_5___default.a}},"./src/addons/addons/fullscreen/userscript.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]=async function({addon,global,console}){const vm=addon.tab.traps.vm;const updateStageSize=()=>{document.documentElement.style.setProperty("--sa-fullscreen-width",vm.runtime.stageWidth);document.documentElement.style.setProperty("--sa-fullscreen-height",vm.runtime.stageHeight)};updateStageSize();vm.on("STAGE_SIZE_CHANGED",updateStageSize);function updateBrowserFullscreen(){if(addon.settings.get("browserFullscreen")&&!addon.self.disabled){if(addon.tab.redux.state.scratchGui.mode.isFullScreen&&document.fullscreenElement===null){document.documentElement.requestFullscreen()}else if(!addon.tab.redux.state.scratchGui.mode.isFullScreen&&document.fullscreenElement!==null){document.exitFullscreen()}}}function updateScratchFullscreen(){if(addon.settings.get("browserFullscreen")&&!addon.self.disabled){if(document.fullscreenElement===null&&addon.tab.redux.state.scratchGui.mode.isFullScreen){addon.tab.redux.dispatch({type:"scratch-gui/mode/SET_FULL_SCREEN",isFullScreen:false})}}}async function setPageScrollbar(){const body=await addon.tab.waitForElement(".sa-body-editor");if(addon.tab.redux.state.scratchGui.mode.isFullScreen){body.classList.add("sa-fullscreen")}else{body.classList.remove("sa-fullscreen")}}let monitorScaler,resizeObserver,stage;async function initScaler(){monitorScaler=await addon.tab.waitForElement("[class*=monitor-list_monitor-list-scaler]");stage=await addon.tab.waitForElement('[class*="stage-wrapper_full-screen"] [class*="stage_stage"]');resizeObserver=new ResizeObserver(()=>{const scale=stage.getBoundingClientRect().width/480;monitorScaler.style.transform="scale(".concat(scale,", ").concat(scale,")")});resizeObserver.observe(stage)}initScaler();setPageScrollbar();updateBrowserFullscreen();addon.tab.redux.initialize();addon.tab.redux.addEventListener("statechanged",e=>{if(e.detail.action.type==="scratch-gui/mode/SET_FULL_SCREEN"){initScaler();updateBrowserFullscreen();setPageScrollbar()}});window.addEventListener("resize",()=>{updateScratchFullscreen()});document.addEventListener("fullscreenchange",()=>{if(document.fullscreenElement===null&&addon.tab.redux.state.scratchGui.mode.isFullScreen){addon.tab.redux.dispatch({type:"scratch-gui/mode/SET_FULL_SCREEN",isFullScreen:false})}});addon.settings.addEventListener("change",()=>{updateBrowserFullscreen()});addon.self.addEventListener("disabled",()=>{resizeObserver.disconnect()});addon.self.addEventListener("reenabled",()=>{resizeObserver.observe(stage);updateBrowserFullscreen()})}}}]);