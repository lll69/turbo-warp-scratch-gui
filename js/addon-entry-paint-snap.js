/*! For license information please see addon-entry-paint-snap.js.LICENSE */
(window.webpackJsonpGUI=window.webpackJsonpGUI||[]).push([["addon-entry-paint-snap"],{"./node_modules/css-loader/index.js!./src/addons/addons/paint-snap/userstyle.css":function(t,e,n){(t.exports=n("./node_modules/css-loader/lib/css-base.js")(!1)).push([t.i,'.sa-paint-snap-button {\n  position: relative;\n}\n.sa-paint-snap-button:focus-within {\n  background-color: hsla(0, 100%, 65%, 0.2);\n}\n.sa-paint-snap-button[data-enabled="true"] .sa-paint-snap-image {\n  filter: brightness(0) invert(1);\n}\n.sa-paint-snap-button[data-enabled="true"] {\n  background-color: #ff4c4c;\n}\n\n.sa-paint-snap-group {\n  position: relative;\n  flex-direction: row;\n}\n\n.sa-paint-snap-settings-wrapper {\n  position: absolute;\n  justify-items: center;\n  left: 50%;\n  width: 1.95rem;\n  height: 1.95rem;\n  display: grid;\n}\n\n.sa-paint-snap-settings {\n  position: absolute;\n  bottom: 100%;\n  /* based on the styles for the color dropdown */\n  padding: 4px;\n  border-radius: 4px;\n  border: 1px solid var(--paint-ui-pane-border, #ddd);\n  box-shadow: 0px 0px 8px 1px rgba(0, 0, 0, 0.3);\n  transition-property: bottom, opacity;\n  transition-duration: 500ms;\n  transition-timing-function: cubic-bezier(0.23, 1, 0.32, 1);\n  opacity: 0;\n  pointer-events: none;\n  background: var(--ui-primary, white);\n  min-height: 100%;\n  min-width: 100%;\n  display: flex;\n  flex-direction: column;\n  gap: 0.25em;\n}\n.sa-paint-snap-settings[data-visible="true"] {\n  bottom: calc(100% + 22px);\n  pointer-events: auto;\n  opacity: 1;\n}\n\n.sa-paint-snap-settings-line {\n  display: flex;\n  justify-content: flex-end;\n  align-items: baseline;\n}\n\n.sa-paint-snap-settings-input {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  text-align: center;\n  border: 0;\n  background: transparent;\n  -moz-appearance: textfield;\n  border: 0;\n  outline: 0;\n}\n\n.sa-paint-snap-settings-input::-webkit-outer-spin-button,\n.sa-paint-snap-settings-input::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n  margin: 0;\n}\n\n.sa-paint-snap-settings-tip {\n  position: absolute;\n  bottom: 0;\n  transform: translateY(100%);\n  right: calc(50% - 7px);\n}\n.sa-paint-snap-settings-polygon {\n  fill: var(--ui-primary, white);\n  stroke: var(--paint-ui-pane-border, #ddd);\n}\n\n.sa-paint-snap-settings-separator {\n  flex-grow: 1;\n  border-bottom: 1px solid currentColor;\n  margin: 4px;\n  opacity: 0.25;\n}\n\n.sa-paint-snap-settings-section {\n  display: flex;\n  flex-direction: column;\n  gap: 0.25em;\n  align-items: flex-end;\n  width: 100%;\n}\n\n.sa-paint-snap-settings-section-title {\n  font-size: 1.2em;\n  font-weight: 500;\n  align-self: flex-start;\n  margin-left: 4px;\n}\n\n.sa-paint-snap-settings-label {\n  white-space: nowrap;\n}\n\n.sa-paint-snap-image[data-shrink="true"] {\n  height: 1em;\n  width: 1em;\n}\n',""])},"./node_modules/url-loader/dist/cjs.js!./src/addons/addons/paint-snap/icons/decrement.svg":function(t,e,n){"use strict";n.r(e),e.default="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PHBhdGggc3R5bGU9ImZpbGw6IzU3NWU3NTtzdHJva2Utd2lkdGg6LjczNDczNiIgZD0iTTMuMjUgMTEuMzU4aDE3LjUwMXYxLjI4NUgzLjI1eiIvPjwvc3ZnPg=="},"./node_modules/url-loader/dist/cjs.js!./src/addons/addons/paint-snap/icons/increment.svg":function(t,e,n){"use strict";n.r(e),e.default="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHdpZHRoPSIyNCI+PHBhdGggc3R5bGU9ImZpbGw6IzU3NWU3NTtzdHJva2Utd2lkdGg6LjczNDczNiIgZD0iTTMuMjUgMTEuMzU4aDE3LjUwMXYxLjI4NUgzLjI1eiIvPjxwYXRoIHRyYW5zZm9ybT0icm90YXRlKDkwKSIgc3R5bGU9ImZpbGw6IzU3NWU3NTtzdHJva2Utd2lkdGg6LjczNDczNiIgZD0iTTMuMjUtMTIuNjQyaDE3LjUwMXYxLjI4NUgzLjI1eiIvPjwvc3ZnPg=="},"./node_modules/url-loader/dist/cjs.js!./src/addons/addons/paint-snap/icons/off.svg":function(t,e,n){"use strict";n.r(e),e.default="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxZW0iIGhlaWdodD0iMWVtIiB2aWV3Qm94PSIwIDAgMTYgMTYiPjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzU3NWU3NSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjEuNSIgZD0ibTExLjI1IDQuNzUtNi41IDYuNW0wLTYuNSA2LjUgNi41Ii8+PC9zdmc+"},"./node_modules/url-loader/dist/cjs.js!./src/addons/addons/paint-snap/icons/on.svg":function(t,e,n){"use strict";n.r(e),e.default="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxZW0iIGhlaWdodD0iMWVtIiB2aWV3Qm94PSIwIDAgMTYgMTYiPjxwYXRoIGZpbGw9IiM1NzVlNzUiIGQ9Ik0xMi43MzYgMy45N2EuNzMzLjczMyAwIDAgMSAxLjA0NyAwYy4yODYuMjg5LjI5Ljc1Ni4wMSAxLjA1TDcuODggMTIuMDFhLjczMy43MzMgMCAwIDEtMS4wNjUuMDJMMy4yMTcgOC4zODRhLjc1Ny43NTcgMCAwIDEgMC0xLjA2LjczMy43MzMgMCAwIDEgMS4wNDcgMGwzLjA1MiAzLjA5MyA1LjQtNi40MjVhLjI0Ny4yNDcgMCAwIDEgLjAyLS4wMjJaIi8+PC9zdmc+"},"./node_modules/url-loader/dist/cjs.js!./src/addons/addons/paint-snap/icons/settings.svg":function(t,e,n){"use strict";n.r(e),e.default="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxZW0iIGhlaWdodD0iMWVtIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCI+PGNpcmNsZSBjeD0iMTIuNTUiIGN5PSIxMi41NSIgcj0iOS4wNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNTc1ZTc1IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iNyIvPjxjaXJjbGUgY3g9IjYxLjk0MyIgY3k9IjYxLjQzNiIgcj0iNy41IiBmaWxsPSIjNTc1ZTc1Ii8+PHBhdGggZmlsbD0iIzU3NWU3NSIgZD0ibTUzLjExOSAyNy43NDMtOC4yNjcgOC4yNjZMMzEuNjkgMjIuODQ3bC04LjU3IDguNTczIDEzLjE2IDEzLjE2LTguMjY2IDguMjY2aDI1LjEwNXoiIGNvbG9yPSIjNTc1ZTc1Ii8+PHBhdGggZmlsbD0iIzU3NWU3NSIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNDYuMjI3IDEwMGMuNTMtMy4yMDUgMS4yMTktNi4zNzQgMi4xMTItOS40N2wtNC44MDQtMS4zODZjLS45NTQgMy4zMS0xLjY4MyA2LjY2OS0yLjI0IDEwLjA0em0zLjYwMy0xNC4wNjhhNjMuOTM1IDYzLjkzNSAwIDAgMSAzLjkzLTguNzc1bC00LjM5My0yLjM4NmE2OC45MTcgNjguOTE3IDAgMCAwLTQuMjQgOS40NnptNi4zODItMTIuOWMxLjc1My0yLjY5NCAzLjY5LTUuMjQ5IDUuODQtNy41NzhsLTMuNjczLTMuMzkyYy0yLjM3MiAyLjU2OS00LjQ3NCA1LjM1LTYuMzU3IDguMjQxem05LjIzNC0xMC45NDFhNTcuOTUgNTcuOTUgMCAwIDEgNy42MDktNS44MTNsLTIuNzAzLTQuMjA4YTYyLjk0NCA2Mi45NDQgMCAwIDAtOC4yNjYgNi4zMTd6bTExLjc1Mi04LjI2MmE3MS4yNjUgNzEuMjY1IDAgMCAxIDguNzg2LTRsLTEuNzY2LTQuNjc3YTc2LjI0MiA3Ni4yNDIgMCAwIDAtOS40MDEgNC4yODF6bTEzLjM3Mi01LjU3MkE4Ny45MjYgODcuOTI2IDAgMCAxIDEwMCA0NS45MUw5OS4wNTcgNDFhOTIuOTM4IDkyLjkzOCAwIDAgMC05Ljk2NyAyLjQ4eiIgY29sb3I9IiM1NzVlNzUiLz48L3N2Zz4="},"./node_modules/url-loader/dist/cjs.js!./src/addons/addons/paint-snap/icons/snap.svg":function(t,e,n){"use strict";n.r(e),e.default="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxZW0iIGhlaWdodD0iMWVtIiB2aWV3Qm94PSIwIDAgNTEyIDUxMiI+PHBhdGggZmlsbD0iIzU3NWU3NSIgc3Ryb2tlPSIjNTc1ZTc1IiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMzIiIGQ9Ik0xOTEuOTggNDYzLjU4di00OE05MC4xNiA0MjEuNGwzMy45NC0zMy45NG0tNzYuMTItNjcuODhoNDgiLz48cGF0aCBmaWxsPSIjNTc1ZTc1IiBkPSJNNDIyLjIgODkuODJhMTQ0IDE0NCAwIDAgMC0yMDMuNzEtLjA3bC02Ny44OCA2Ny44OCA2Ny44OCA2Ny44OSA2Ny44OC02Ny44OWE0OCA0OCAwIDAgMSA2OC40Ni41OWMxOC4zIDE4LjkyIDE3LjQ4IDQ5LjI0LTEuMTQgNjcuODZsLTY3LjMyIDY3LjMyIDY3Ljg4IDY3Ljg4IDY2LjkxLTY2LjkxYzU2LjM3LTU2LjM3IDU3LjM3LTE0OC4xNSAxLjA0LTIwNC41NVpNODIuNzE5IDIyNS41MTdsNDUuMjU0LTQ1LjI1NCA2Ny44ODMgNjcuODgyTDE1MC42IDI5My40ek0yMTguNDkgMzYxLjI3bDQ1LjI1NC00NS4yNTQgNjcuODgyIDY3Ljg4Mi00NS4yNTUgNDUuMjU1eiIvPjwvc3ZnPg=="},"./src/addons/addons/paint-snap/_runtime_entry.js":function(t,e,n){"use strict";n.r(e),n.d(e,"resources",(function(){return u}));var o=n("./src/addons/addons/paint-snap/userscript.js"),i=n("./node_modules/css-loader/index.js!./src/addons/addons/paint-snap/userstyle.css"),s=n.n(i),a=n("./node_modules/url-loader/dist/cjs.js!./src/addons/addons/paint-snap/icons/decrement.svg"),r=n("./node_modules/url-loader/dist/cjs.js!./src/addons/addons/paint-snap/icons/increment.svg"),d=n("./node_modules/url-loader/dist/cjs.js!./src/addons/addons/paint-snap/icons/off.svg"),l=n("./node_modules/url-loader/dist/cjs.js!./src/addons/addons/paint-snap/icons/on.svg"),c=n("./node_modules/url-loader/dist/cjs.js!./src/addons/addons/paint-snap/icons/settings.svg"),p=n("./node_modules/url-loader/dist/cjs.js!./src/addons/addons/paint-snap/icons/snap.svg");const u={"userscript.js":o.default,"userstyle.css":s.a,"icons/decrement.svg":a.default,"icons/increment.svg":r.default,"icons/off.svg":d.default,"icons/on.svg":l.default,"icons/settings.svg":c.default,"icons/snap.svg":p.default}},"./src/addons/addons/paint-snap/genScalePoints.js":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return r}));var o=n("./src/addons/addons/paint-snap/state.js");function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e,n,i,a){const{view:{CENTER:r,ART_BOARD_BOUNDS:d}}=e;return s(s(s(s({},o.snapTo.pageAxes?s(s({},i?{bounds_cx:{type:"xcoord",value:r.x}}:{}),a?{bounds_cy:{type:"ycoord",value:r.y}}:{}):{}),o.snapTo.pageEdges?s(s(s(s({},i?{bounds_l:{type:"xcoord",value:d.left,clamp:{min:d.top,max:d.bottom}},bounds_r:{type:"xcoord",value:d.right,clamp:{min:d.top,max:d.bottom}}}:{}),a?{bounds_t:{type:"ycoord",value:d.top,clamp:{min:d.left,max:d.right}},bounds_b:{type:"ycoord",value:d.bottom,clamp:{min:d.left,max:d.right}}}:{}),i?{bounds_w:{type:"width",value:r.y,clamp:{min:d.left,max:d.right}}}:{}),a?{bounds_h:{type:"height",value:r.x,clamp:{min:d.bottom,max:d.top}}}:{}):{}),o.snapTo.objectEdges?Object.fromEntries(n.filter(t=>!(t.selected||t.data.isHelperItem)).map(t=>[i&&["item_".concat(t.id,"_r"),{type:"xcoord",value:t.bounds.right}],i&&["item_".concat(t.id,"_l"),{type:"xcoord",value:t.bounds.left}],a&&["item_".concat(t.id,"_t"),{type:"ycoord",value:t.bounds.top}],a&&["item_".concat(t.id,"_b"),{type:"ycoord",value:t.bounds.bottom}],i&&["item_".concat(t.id,"_w"),{type:"width",value:t.bounds.bottom,clamp:{min:t.bounds.left,max:t.bounds.right}}],a&&["item_".concat(t.id,"_h"),{type:"height",value:t.bounds.left,clamp:{min:t.bounds.bottom,max:t.bounds.top}}]].filter(Boolean)).flat(1)):{}),o.snapTo.objectMidlines?Object.fromEntries(n.filter(t=>!(t.selected||t.data.isHelperItem)).map(t=>[i&&["item_".concat(t.id,"_cx"),{type:"xcoord",value:t.bounds.center.x}],a&&["item_".concat(t.id,"_cy"),{type:"ycoord",value:t.bounds.center.y}]].filter(Boolean)).flat(1)):{})}},"./src/addons/addons/paint-snap/genSnapPoints.js":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return r}));var o=n("./src/addons/addons/paint-snap/state.js");function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e,n,i){const{view:{CENTER:a,ART_BOARD_BOUNDS:r}}=n;return{from:s(s(s({},o.snapFrom.boxCenter?{center:e.center}:{}),o.snapFrom.boxCorners?{topLeft:e.topLeft,topRight:e.topRight,bottomLeft:e.bottomLeft,bottomRight:e.bottomRight}:{}),o.snapFrom.boxEdgeMids?{left:new t.Point(e.left,e.center.y),right:new t.Point(e.right,e.center.y),top:new t.Point(e.center.x,e.top),bottom:new t.Point(e.center.x,e.bottom)}:{}),to:s(s(s(s(s(s(s(s({},o.snapTo.pageCenter?{bounds_c:{type:"point",value:a}}:{}),o.snapTo.pageAxes?{bounds_cx:{type:"xcoord",value:a.x},bounds_cy:{type:"ycoord",value:a.y}}:{}),o.snapTo.pageEdges?{bounds_l:{type:"xcoord",value:r.left,clamp:{min:r.top,max:r.bottom}},bounds_r:{type:"xcoord",value:r.right,clamp:{min:r.top,max:r.bottom}},bounds_t:{type:"ycoord",value:r.top,clamp:{min:r.left,max:r.right}},bounds_b:{type:"ycoord",value:r.bottom,clamp:{min:r.left,max:r.right}},bounds_lc:{type:"point",value:new t.Point(r.left,a.y)},bounds_rc:{type:"point",value:new t.Point(r.right,a.y)},bounds_tc:{type:"point",value:new t.Point(a.x,r.top)},bounds_bc:{type:"point",value:new t.Point(a.x,r.bottom)}}:{}),o.snapTo.pageCorners?{bounds_tl:{type:"point",value:r.topLeft},bounds_tr:{type:"point",value:r.topRight},bounds_bl:{type:"point",value:r.bottomLeft},bounds_br:{type:"point",value:r.bottomRight}}:{}),o.snapTo.objectEdges?Object.fromEntries(i.filter(t=>!(t.selected||t.data.isHelperItem)).map(t=>[["item_".concat(t.id,"_r"),{type:"itemSideVert",value:t.bounds.right,clamp:{min:t.bounds.top,max:t.bounds.bottom}}],["item_".concat(t.id,"_l"),{type:"itemSideVert",value:t.bounds.left,clamp:{min:t.bounds.top,max:t.bounds.bottom}}],["item_".concat(t.id,"_t"),{type:"itemSideHoriz",value:t.bounds.top,clamp:{min:t.bounds.left,max:t.bounds.right}}],["item_".concat(t.id,"_b"),{type:"itemSideHoriz",value:t.bounds.bottom,clamp:{min:t.bounds.left,max:t.bounds.right}}]]).flat(1)):{}),o.snapTo.objectCenters?Object.fromEntries(i.filter(t=>!t.selected).map(t=>[["item_".concat(t.id,"_c"),{type:"point",value:t.bounds.center}]]).flat(1)):{}),o.snapTo.objectMidlines?Object.fromEntries(i.filter(t=>!t.selected).map(t=>[["item_".concat(t.id,"_cx"),{type:"xcoord",value:t.bounds.center.x}],["item_".concat(t.id,"_cy"),{type:"ycoord",value:t.bounds.center.y}]]).flat(1)):{}),o.snapTo.objectCorners?Object.fromEntries(i.filter(t=>!(t.selected||t.data.isHelperItem)).map(t=>[["item_".concat(t.id,"_tl"),{type:"point",value:t.bounds.topLeft}],["item_".concat(t.id,"_tr"),{type:"point",value:t.bounds.topRight}],["item_".concat(t.id,"_bl"),{type:"point",value:t.bounds.bottomLeft}],["item_".concat(t.id,"_br"),{type:"point",value:t.bounds.bottomRight}]]).flat(1)):{})}}},"./src/addons/addons/paint-snap/helpers.js":function(t,e,n){"use strict";function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t){const e=function(e){for(const n of t.project.layers)if(n.data&&n.data[e])return n},n=new t.Point(480,360),o=new t.Rectangle(0,0,960,720),i=new t.Rectangle(-240,-180,1440,1080);return{math:{checkPointsClose:function(t,e,n){const o=Math.abs(t.x-e.x),i=Math.abs(t.y-e.y);return o<n&&i<n},snapDeltaToAngle:function(e,n){let o=Math.atan2(e.y,e.x);o=Math.round(o/n)*n;const i=Math.cos(o),s=Math.sin(o),a=i*e.x+s*e.y;return new t.Point(i*a,s*a)}},layer:{CROSSHAIR_FULL_OPACITY:.75,getDragCrosshairLayer:function(){return e("isDragCrosshairLayer")},getLayer:e},view:{CENTER:n,ART_BOARD_BOUNDS:o,MAX_WORKSPACE_BOUNDS:i,getActionBounds:e=>e?o:t.view.bounds.unite(o).intersect(i)},guide:{hoverBounds:function(n,o){let i=n.internalBounds;o&&(i=i.expand(o));const s=new t.Path.Rectangle(i);return s.matrix=n.matrix,function(e){e.strokeWidth=1/t.view.zoom,e.opacity=1,e.blendMode="normal",e.guide=!0}(s),s.parent=e("isGuideLayer"),s.strokeColor="#009dec",s.fillColor=null,s.data.isHelperItem=!0,s.data.origItem=n,s.bringToFront(),s}}}}n.r(e),n.d(e,"loadModules",(function(){return a})),n.d(e,"Modes",(function(){return u})),n.d(e,"VectorModes",(function(){return c})),n.d(e,"BitmapModes",(function(){return p})),n.d(e,"GradientToolsModes",(function(){return m}));const r=t=>Object.fromEntries(Object.entries(t).map(t=>{let[e]=t;return[e,e]})),d={BRUSH:null,ERASER:null,LINE:null,FILL:null,SELECT:null,RESHAPE:null,OVAL:null,RECT:null,ROUNDED_RECT:null,TEXT:null},l={BIT_BRUSH:null,BIT_LINE:null,BIT_OVAL:null,BIT_RECT:null,BIT_TEXT:null,BIT_FILL:null,BIT_ERASER:null,BIT_SELECT:null},c=r(d),p=r(l),u=r(i(i({},d),l)),m=r({FILL:null,SELECT:null,RESHAPE:null,OVAL:null,RECT:null,LINE:null,BIT_OVAL:null,BIT_RECT:null,BIT_SELECT:null,BIT_FILL:null})},"./src/addons/addons/paint-snap/state.js":function(t,e,n){"use strict";n.r(e),n.d(e,"snapOn",(function(){return o})),n.d(e,"snapTo",(function(){return i})),n.d(e,"snapFrom",(function(){return s})),n.d(e,"threshold",(function(){return r})),n.d(e,"guideColor",(function(){return a})),n.d(e,"loadSettings",(function(){return d})),n.d(e,"setSnapTo",(function(){return l})),n.d(e,"setSnapFrom",(function(){return c})),n.d(e,"setThreshold",(function(){return p})),n.d(e,"enable",(function(){return u})),n.d(e,"disable",(function(){return m})),n.d(e,"toggle",(function(){return g})),n.d(e,"setGuideColor",(function(){return b}));let o=!0;const i={pageEdges:!0,pageCenter:!0,pageAxes:!0,pageCorners:!1,objectEdges:!0,objectCenters:!0,objectMidlines:!0,objectCorners:!1},s={boxCenter:!0,boxCorners:!1,boxEdgeMids:!1};let a,r=10;function d(t){let{settings:e}=t;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&l(t,e.get(t));for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&c(t,e.get(t));p(e.get("threshold")),g(e.get("enable-default"))}function l(t,e){i[t]=!!e}function c(t,e){s[t]=!!e}function p(t){r=t}function u(){o=!0}function m(){o=!1}function g(t){t?u():m()}function b(t){a=t}},"./src/addons/addons/paint-snap/ui.js":function(t,e,n){"use strict";n.r(e),n.d(e,"initUI",(function(){return i}));var o=n("./src/addons/addons/paint-snap/state.js");function i(t){let{addon:e,msg:n}=t;const i=()=>{const t=document.createElement("div");return t.className="sa-paint-snap-group",t},s=()=>{const t=document.createElement("div");return t.className="sa-paint-snap-settings-separator",t},a=function(){let{useButtonTag:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=document.createElement(t?"button":"span");return e.className="sa-paint-snap-button",e.setAttribute("role","button"),e},r=t=>{const n=document.createElement("img");return n.className="sa-paint-snap-image",n.draggable=!1,n.src=e.self.getResource("/icons/"+t+".svg"),n},d=i();e.tab.displayNoneWhileDisabled(d,{display:"flex"});const l=document.createElement("div");l.className="sa-paint-snap-settings-wrapper",d.appendChild(l);const c=document.createElement("div");c.className="sa-paint-snap-settings",l.appendChild(c);const p="http://www.w3.org/2000/svg",u=document.createElementNS(p,"svg");u.setAttribute("class","sa-paint-snap-settings-tip"),u.setAttribute("width","14"),u.setAttribute("height","7");const m=document.createElementNS(p,"polygon");m.setAttribute("class","sa-paint-snap-settings-polygon"),m.setAttribute("points","0,0 7,7, 14,0"),u.appendChild(m),c.appendChild(u);const g=a();g.addEventListener("click",()=>{o.snapOn||(Object.values(o.snapTo).some(t=>t)||Object(o.setSnapTo)("pageCenter",!0),Object.values(o.snapFrom).some(t=>t)||Object(o.setSnapFrom)("boxCenter",!0)),Object(o.toggle)(!o.snapOn),g.dataset.enabled=o.snapOn}),g.title=n("toggle"),g.appendChild(r("snap")),g.dataset.enabled=o.snapOn,d.appendChild(g);const b=a();b.addEventListener("click",()=>v(!f())),b.title=n("settings"),b.appendChild(r("settings")),d.appendChild(b);const h=[],v=t=>{b.dataset.enabled=t,c.dataset.visible=t,t?h.forEach(t=>{try{null==t||t()}catch(t){}}):(Object.values(o.snapFrom).every(t=>!t)||Object.values(o.snapTo).every(t=>!t))&&(Object(o.toggle)(!1),g.dataset.enabled=!1)},f=()=>"true"===c.dataset.visible,y=function(t,e,o){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>{};const d=[t,e],l=i(),c=a({useButtonTag:!0}),p=a({useButtonTag:!0}),u=r(t),m=r(e);u.dataset.shrink=m.dataset.shrink=!0,c.appendChild(u),p.appendChild(m),c.setAttribute("aria-label",c.title=n(t)),p.setAttribute("aria-label",p.title=n(e));const g=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];c.dataset.enabled=!!t,p.dataset.enabled=!t,n||s(d[t])};return g(1-d.indexOf(o),null,!0),c.addEventListener("click",g.bind(c,1)),p.addEventListener("click",g.bind(p,0)),l.append(c,p),l},j=(t,e)=>{const i=document.createElement("label");i.className="sa-paint-snap-settings-line";const s=document.createElement("div");return s.className="sa-paint-snap-settings-label",s.textContent=n(t),i.append(s,e),h.push(()=>{const i=e.querySelector('[aria-label="'.concat(n("on"),'"]')),s=e.querySelector('[aria-label="'.concat(n("off"),'"]'));t in o.snapTo&&(i.dataset.enabled=!!o.snapTo[t],s.dataset.enabled=!o.snapTo[t]),t in o.snapFrom&&(i.dataset.enabled=!!o.snapFrom[t],s.dataset.enabled=!o.snapFrom[t])}),i},w=function(t){const e=document.createElement("div");e.className="sa-paint-snap-settings-section";const n=document.createElement("span");n.appendChild(document.createTextNode(t)),n.className="sa-paint-snap-settings-section-title",e.appendChild(n);for(var o=arguments.length,i=new Array(o>1?o-1:0),s=1;s<o;s++)i[s-1]=arguments[s];return e.append(...i),e},M=j("threshold",function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1/0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;const d=i(),l=document.createElement("div");l.style.width="20px";const c=a();c.appendChild(l);const p=document.createElement("input");p.className="sa-paint-snap-settings-input",p.type="number",p.step=s,p.min=n,p.max=o,p.value=t,p.addEventListener("change",()=>{p.value>o&&(p.value=o),p.value<n&&(p.value=n),e(p.value)}),p.addEventListener("blur",()=>{p.value||(p.value="0")}),c.appendChild(p);const u=a();u.appendChild(r("decrement")),u.addEventListener("click",()=>{p.value>n&&(p.value=Number(p.value)-1,e(Number(p.value)+1))});const m=a();return m.appendChild(r("increment")),m.addEventListener("click",()=>{p.value<o&&(p.value=Number(p.value)+1,e(Number(p.value)+1))}),d.append(u,c,m),d}(o.threshold,t=>{Object(o.setThreshold)(t)},4,50,1)),I=t=>t?"on":"off",x=t=>!!["on","off"].indexOf(t),S=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};return["off","on",I(t),t=>e(x(t))]},C=t=>j(t,y(...S(o.snapTo[t],e=>{Object(o.toggle)(!0),g.dataset.enabled=!0,Object(o.setSnapTo)(t,e)}))),T=w(n("snapTo"),C("pageCenter"),C("pageAxes"),C("pageEdges"),C("pageCorners"),C("objectCenters"),C("objectMidlines"),C("objectEdges"),C("objectCorners")),N=t=>j(t,y(...S(o.snapFrom[t],e=>{Object(o.setSnapFrom)(t,e)}))),P=w(n("snapFrom"),N("boxCenter"),N("boxCorners"),N("boxEdgeMids"));c.append(M,s(),T,s(),P),(async()=>{let t=!1;for(;;){const n=(await e.tab.waitForElement("[class^='paint-editor_canvas-controls']",{markAsSeen:!0,reduxEvents:["scratch-gui/navigation/ACTIVATE_TAB","scratch-gui/mode/SET_PLAYER","fontsLoaded/SET_FONTS_LOADED","scratch-gui/locales/SELECT_LOCALE","scratch-gui/targets/UPDATE_TARGET_LIST"],reduxCondition:t=>1===t.scratchGui.editorTab.activeTabIndex&&!t.scratchGui.mode.isPlayerOnly})).querySelector("[class^='paint-editor_zoom-controls']");if(e.tab.appendToSharedSpace({space:"paintEditorZoomControls",element:d,order:2}),!t){t=!0;const e=n.firstChild.className,o=n.firstChild.firstChild.className,i=n.firstChild.firstChild.firstChild.className;for(const t of document.querySelectorAll(".sa-paint-snap-group"))t.className+=" "+e;for(const t of document.querySelectorAll(".sa-paint-snap-button"))t.className+=" "+o;for(const t of document.querySelectorAll(".sa-paint-snap-image"))t.className+=" "+i}}})()}},"./src/addons/addons/paint-snap/updateScaleTool.js":function(t,e,n){"use strict";n.r(e),n.d(e,"updateScaleTool",(function(){return a}));var o=n("./src/addons/addons/paint-snap/genScalePoints.js"),i=(n("./src/addons/addons/paint-snap/genSnapPoints.js"),n("./src/addons/addons/paint-snap/helpers.js")),s=n("./src/addons/addons/paint-snap/state.js");const a=(t,e)=>{const n=Object(i.loadModules)(t),{view:{getActionBounds:a},layer:{getLayer:r}}=n,d=(t=>t.boundingBoxTool._modeMap.SCALE)(e),l={endLeft:new t.Path.Line({from:[0,0],to:[0,0],strokeColor:new t.Color(s.guideColor),strokeWidth:1/t.view.zoom,visible:!0,data:{isHelperItem:!0,noSelect:!0,noHover:!0,saPaintSnapGuide:!0},selected:!1}),endRight:new t.Path.Line({from:[0,0],to:[0,0],strokeColor:new t.Color(s.guideColor),strokeWidth:1/t.view.zoom,visible:!0,data:{isHelperItem:!0,noSelect:!0,noHover:!0,saPaintSnapGuide:!0},selected:!1}),line:new t.Path.Line({from:[0,0],to:[0,0],strokeColor:new t.Color(s.guideColor),strokeWidth:1/t.view.zoom,visible:!0,data:{isHelperItem:!0,noSelect:!0,noHover:!0,saPaintSnapGuide:!0},selected:!1}),group:new t.Group({children:[],visible:!1})},c={endLeft:new t.Path.Line({from:[0,0],to:[0,0],strokeColor:new t.Color(s.guideColor),strokeWidth:1/t.view.zoom,visible:!0,data:{isHelperItem:!0,noSelect:!0,noHover:!0,saPaintSnapGuide:!0},selected:!1}),endRight:new t.Path.Line({from:[0,0],to:[0,0],strokeColor:new t.Color(s.guideColor),strokeWidth:1/t.view.zoom,visible:!0,data:{isHelperItem:!0,noSelect:!0,noHover:!0,saPaintSnapGuide:!0},selected:!1}),line:new t.Path.Line({from:[0,0],to:[0,0],strokeColor:new t.Color(s.guideColor),strokeWidth:1/t.view.zoom,visible:!0,data:{isHelperItem:!0,noSelect:!0,noHover:!0,saPaintSnapGuide:!0},selected:!1}),group:new t.Group({children:[],visible:!1})};l.endLeft.remove(),c.endLeft.remove(),l.endRight.remove(),c.endRight.remove(),l.line.remove(),c.line.remove(),l.group.remove(),c.group.remove(),l.group.addChildren([l.endLeft,l.line,l.endRight]),c.group.addChildren([c.endLeft,c.line,c.endRight]);let p=new t.Path.Line({from:[0,0],to:[0,0],strokeColor:new t.Color(s.guideColor),strokeWidth:1/t.view.zoom,visible:!1,data:{isHelperItem:!0,noSelect:!0,noHover:!0,saPaintSnapGuide:!0,axis:"x"},selected:!1}),u=new t.Path.Line({from:[0,0],to:[0,0],strokeColor:new t.Color(s.guideColor),strokeWidth:1/t.view.zoom,visible:!1,data:{isHelperItem:!0,noSelect:!0,noHover:!0,saPaintSnapGuide:!0,axis:"y"},selected:!1});p.remove(),u.remove();const m=["width","height","itemSideVert","itemSideHoriz","xcoord","ycoord","generated",void 0],g=()=>{l.group.remove(),l.group.visible=!1,c.group.remove(),c.group.visible=!1,p.remove(),p.visible=!1,u.remove(),u.visible=!1};d.constructor.prototype.onMouseDrag=function(e){if(!this.active)return;const i=e.point,d=a(this.isBitmap);i.x=Math.max(d.left,Math.min(i.x,d.right)),i.y=Math.max(d.top,Math.min(i.y,d.bottom)),this.lastPoint||(this.lastPoint=e.lastPoint);const b=i.subtract(this.lastPoint);this.lastPoint=i,e.modifiers.alt?(this.centered=!0,this.itemGroup.position=this.origCenter,this.pivot=this.origCenter):(this.centered&&(this.centered=!1,this.itemGroup.scale(1/this.lastSx,1/this.lastSy,this.pivot),this.selectionAnchor&&this.selectionAnchor.scale(this.lastSx,this.lastSy),this.lastSx=1,this.lastSy=1),this.pivot=this.origPivot),this.corner=this.corner.add(b);let h=this.corner.subtract(this.pivot);e.modifiers.alt&&(h=h.multiply(2));let v=1,f=1;Math.abs(this.origSize.x)>1e-7&&(v=h.x/this.origSize.x),Math.abs(this.origSize.y)>1e-7&&(f=h.y/this.origSize.y);const y=(t,e)=>m.indexOf(t.type)-m.indexOf(e.type)||t.distance-e.distance,j=r("isPaintingLayer"),w=s.snapOn&&(this.isCorner&&!e.modifiers.shift||Math.abs(this.origSize.x)>1e-7),M=s.snapOn&&(this.isCorner&&!e.modifiers.shift||Math.abs(this.origSize.y)>1e-7),I=s.threshold/t.view.zoom,x=t=>t.distance<I,S=t=>{let[e,n]=t;return{type:n.type,distance:(()=>{switch(n.type){case"width":return Math.abs(Math.abs(h.x)-Math.abs(n.clamp.max-n.clamp.min));case"height":return Math.abs(Math.abs(h.y)-Math.abs(n.clamp.max-n.clamp.min));case"xcoord":case"itemSideVert":return Math.abs(this.corner.x-n.value);case"ycoord":case"itemSideHoriz":return Math.abs(this.corner.y-n.value)}})(),name:e,coord:n}},C=Object(o.default)(t,n,j.children,w,!1),T=Object.entries(C).map(S).filter(x).sort(y),N=Object(o.default)(t,n,j.children,!1,M),P=Object.entries(N).map(S).filter(x).sort(y),L=T[0],O=P[0],z=v>0?1:-1,D=f>0?1:-1;if(L)switch(L.type){case"width":v=new t.Point(Math.abs(L.coord.clamp.max-L.coord.clamp.min),this.corner.y).x/this.origSize.x;break;case"xcoord":case"itemSideVert":v=new t.Point(L.coord.value,this.corner.y).subtract(this.pivot).x/this.origSize.x,e.modifiers.alt&&(v*=2)}if(O)switch(O.type){case"height":f=new t.Point(this.corner.x,Math.abs(O.coord.clamp.max-O.coord.clamp.min)).y/this.origSize.y;break;case"ycoord":case"itemSideHoriz":f=new t.Point(this.corner.x,O.coord.value).subtract(this.pivot).y/this.origSize.y,e.modifiers.alt&&(f*=2)}const E=v,A=f;if(this.isCorner&&!e.modifiers.shift&&(v=f=Math.max(Math.abs(v),Math.abs(f)),v*=z,f*=D),v=z*Math.max(Math.abs(v),1e-4),f=D*Math.max(Math.abs(f),1e-4),this.itemGroup.scale(v/this.lastSx,f/this.lastSy,this.pivot),this.selectionAnchor&&this.selectionAnchor.scale(this.lastSx/v,this.lastSy/f),g(),(Math.abs(E)===Math.abs(v)&&L||Math.abs(A)===Math.abs(f)&&O)&&(p.strokeWidth=1/t.view.zoom,u.strokeWidth=1/t.view.zoom,p.strokeColor=new t.Color(s.guideColor),u.strokeColor=new t.Color(s.guideColor),l.endLeft.strokeWidth=1/t.view.zoom,c.endLeft.strokeWidth=1/t.view.zoom,l.endRight.strokeWidth=1/t.view.zoom,c.endRight.strokeWidth=1/t.view.zoom,l.line.strokeWidth=1/t.view.zoom,c.line.strokeWidth=1/t.view.zoom,l.endLeft.strokeColor=new t.Color(s.guideColor),c.endLeft.strokeColor=new t.Color(s.guideColor),l.endRight.strokeColor=new t.Color(s.guideColor),c.endRight.strokeColor=new t.Color(s.guideColor),l.line.strokeColor=new t.Color(s.guideColor),c.line.strokeColor=new t.Color(s.guideColor),p.bringToFront(),u.bringToFront(),r("isGuideLayer").addChildren([u,p,l.group,c.group])),Math.abs(E)===Math.abs(v)&&L)switch(L.type){case"width":{const e=L.coord.value,n=this.itemGroup.bounds.bottom;c.endLeft.firstSegment.point=new t.Point(L.coord.clamp.min,e),c.endLeft.lastSegment.point=new t.Point(L.coord.clamp.min,e+5/t.view.zoom),c.endRight.firstSegment.point=new t.Point(L.coord.clamp.max,e),c.endRight.lastSegment.point=new t.Point(L.coord.clamp.max,e+5/t.view.zoom),c.line.firstSegment.point=new t.Point(L.coord.clamp.min,e+3/t.view.zoom),c.line.lastSegment.point=new t.Point(L.coord.clamp.max,e+3/t.view.zoom),c.group.visible=!0,c.group.bringToFront(),l.endLeft.firstSegment.point=new t.Point(this.itemGroup.bounds.left,n+2/t.view.zoom),l.endLeft.lastSegment.point=new t.Point(this.itemGroup.bounds.left,n+7/t.view.zoom),l.endRight.firstSegment.point=new t.Point(this.itemGroup.bounds.right,n+2/t.view.zoom),l.endRight.lastSegment.point=new t.Point(this.itemGroup.bounds.right,n+7/t.view.zoom),l.line.firstSegment.point=new t.Point(this.itemGroup.bounds.left,n+4.5/t.view.zoom),l.line.lastSegment.point=new t.Point(this.itemGroup.bounds.right,n+4.5/t.view.zoom),l.group.visible=!0,l.group.bringToFront();break}case"xcoord":case"itemSideVert":p.firstSegment.point=new t.Point(L.coord.value,d.top),p.lastSegment.point=new t.Point(L.coord.value,d.bottom),p.visible=!0,p.bringToFront()}if(Math.abs(A)===Math.abs(f)&&O)switch(O.type){case"height":{const e=O.coord.value,n=this.itemGroup.bounds.left;c.endLeft.firstSegment.point=new t.Point(e,O.coord.clamp.min),c.endLeft.lastSegment.point=new t.Point(e-5/t.view.zoom,O.coord.clamp.min),c.endRight.firstSegment.point=new t.Point(e,O.coord.clamp.max),c.endRight.lastSegment.point=new t.Point(e-5/t.view.zoom,O.coord.clamp.max),c.line.firstSegment.point=new t.Point(e-3/t.view.zoom,O.coord.clamp.min),c.line.lastSegment.point=new t.Point(e-3/t.view.zoom,O.coord.clamp.max),c.group.visible=!0,c.group.bringToFront(),l.endLeft.firstSegment.point=new t.Point(n-2/t.view.zoom,this.itemGroup.bounds.top),l.endLeft.lastSegment.point=new t.Point(n-7/t.view.zoom,this.itemGroup.bounds.top),l.endRight.firstSegment.point=new t.Point(n-2/t.view.zoom,this.itemGroup.bounds.bottom),l.endRight.lastSegment.point=new t.Point(n-7/t.view.zoom,this.itemGroup.bounds.bottom),l.line.firstSegment.point=new t.Point(n-4.5/t.view.zoom,this.itemGroup.bounds.top),l.line.lastSegment.point=new t.Point(n-4.5/t.view.zoom,this.itemGroup.bounds.bottom),l.group.visible=!0,l.group.bringToFront();break}case"ycoord":case"itemSideHoriz":u.firstSegment.point=new t.Point(d.left,O.coord.value),u.lastSegment.point=new t.Point(d.right,O.coord.value),u.visible=!0,u.bringToFront()}this.lastSx=v,this.lastSy=f};const b=d.constructor.prototype.onMouseUp;d.constructor.prototype.onMouseUp=function(){g(),b.call(this)}}},"./src/addons/addons/paint-snap/updateSelectTool.js":function(t,e,n){"use strict";n.r(e),n.d(e,"updateSelectTool",(function(){return a})),n.d(e,"isSelectTool",(function(){return r}));var o=n("./src/addons/addons/paint-snap/genSnapPoints.js"),i=n("./src/addons/addons/paint-snap/helpers.js"),s=n("./src/addons/addons/paint-snap/state.js");const a=(t,e)=>{const n=Object(i.loadModules)(t),{math:{checkPointsClose:a,snapDeltaToAngle:r},view:{getActionBounds:d,CENTER:l},layer:{getDragCrosshairLayer:c,CROSSHAIR_FULL_OPACITY:p,getLayer:u},guide:{hoverBounds:m}}=n,g=(t=>t.boundingBoxTool._modeMap.MOVE)(e);let b=new t.Path.Line({from:[0,0],to:[0,0],strokeColor:new t.Color(s.guideColor),strokeWidth:1/t.view.zoom,visible:!1,data:{isHelperItem:!0,noSelect:!0,noHover:!0,saPaintSnapGuide:!0},selected:!1});const h={shadow:null,circle:null},v=new t.Group({children:[],visible:!1});let f,y;b.remove(),v.remove(),g.constructor.prototype.onMouseDrag=function(e){var g,j;const w=e.point,M=d(this.mode in i.BitmapModes);w.x=Math.max(M.left,Math.min(w.x,M.right)),w.y=Math.max(M.top,Math.min(w.y,M.bottom));const I=w.subtract(e.downPoint),x=s.threshold/t.view.zoom;let S;if(0===this.selectedItems.length)return;const C=this.selectionCenter._owner,T=this.selectionCenter.add(I),N=null!==(g=null===(j=u("isGuideLayer").children.find(t=>t.data.isSelectionBound))||void 0===j?void 0:j.selectionAnchor)&&void 0!==g?g:{},P=()=>{N.strokeColor=new t.Color(.30196078431372547,.592156862745098,1),N.fillColor=null};if(y=()=>{var t;b.remove(),v.remove(),v.visible=!1,b.visible=!1,null===(t=f)||void 0===t||t.remove(),f&&(f.visible=!1),P()},y(),s.snapOn&&!e.modifiers.shift&&this.mode!==i.Modes.RESHAPE){const e=u("isPaintingLayer"),i=Object(o.default)(t,C,n,e.children),r=i.from,d=i.to,l=e=>(e.clamp||(e.clamp={min:-1/0,max:1/0}),"point"===e.type?()=>e.value:"xcoord"===e.type||"itemSideVert"===e.type?n=>new t.Point(e.value,Math.min(Math.max(n.y,e.clamp.min),e.clamp.max)):"ycoord"===e.type||"itemSideHoriz"===e.type?n=>new t.Point(Math.min(Math.max(n.x,e.clamp.min),e.clamp.max),e.value):"generator"===e.type?e.value:void 0),c=t=>Object.fromEntries(Object.entries(d).map(e=>{let[n,o]=e;return[n,{type:o.type,point:l(o)(t)}]})),p=Object.entries(r).map(t=>{let[e,n]=t;return{pointPos:e,origPoint:n,point:n.add(I),snapPoints:c(n.add(I))}}),g=["point","itemSideVert","itemSideHoriz","xcoord","ycoord","generated",void 0],j=(t,e)=>g.indexOf(t.snapPointType)-g.indexOf(e.snapPointType)||t.distance-e.distance,w=p.map(t=>{var e,n;let{point:o,origPoint:i,snapPoints:s}=t;const r=Object.entries(s).filter(t=>{let[e,n]=t;return a(o,n.point,x)}).map(t=>{let[e,n]=t;return{pos:e,distance:(i=n.point,s=o,i.getDistance(s)),snapPointType:n.type};var i,s}).sort(j)[0]||{pos:"",distance:1/0};return{point:i,snapPoint:null===(e=s[r.pos])||void 0===e?void 0:e.point,snapPointType:null===(n=s[r.pos])||void 0===n?void 0:n.type,distance:r.distance,pos:r.pos}}).sort(j).sort(j)[0];if(y(),null!=w&&w.snapPoint){var L;h.shadow=new t.Path.Circle({center:new t.Point(0,0),radius:5.5/t.view.zoom,fillColor:"black",opacity:.12,data:{isHelperItem:!0,noSelect:!0,noHover:!0,saPaintSnapGuide:!0},visible:!0,guide:!0}),h.circle=new t.Path.Circle({center:new t.Point(0,0),radius:4/t.view.zoom,fillColor:new t.Color(s.guideColor),data:{isScaleHandle:!1,isHelperItem:!0,noSelect:!0,noHover:!0,saPaintSnapGuide:!0},visible:!0,guide:!0}),v.removeChildren(),v.addChildren([h.shadow,h.circle]),b.strokeWidth=1/t.view.zoom,b.strokeColor=new t.Color(s.guideColor),b.bringToFront(),v.bringToFront(),u("isGuideLayer").addChildren([b,v]),S=w.snapPoint.subtract(w.point);const e=null===(L=w.pos.match(/item_(\d+)_/))||void 0===L?void 0:L[1];if(e){const n=t.project.getItem({id:parseInt(e,10)});n&&(f=m(n))}if(w.point.equals(this.selectionCenter)&&"point"===w.snapPointType)N.fillColor=N.strokeColor=new t.Color(s.guideColor);else switch(P(),w.snapPointType){case"point":v.visible=!0,v.position=w.snapPoint,v.bringToFront();break;case"xcoord":case"itemSideVert":b.firstSegment.point=new t.Point(w.snapPoint.x,M.top),b.lastSegment.point=new t.Point(w.snapPoint.x,M.bottom),b.visible=!0,b.bringToFront();break;case"ycoord":case"itemSideHoriz":b.firstSegment.point=new t.Point(M.left,w.snapPoint.y),b.lastSegment.point=new t.Point(M.right,w.snapPoint.y),b.visible=!0,b.bringToFront()}}}let O;for(const t of this.selectedItems)t.data.origPos||(t.data.origPos=t.position),S?t.position=t.data.origPos.add(S):e.modifiers.shift?t.position=t.data.origPos.add(r(I,Math.PI/4)):t.position=t.data.origPos.add(I),O=O?O.unite(t.bounds):t.bounds;this.firstDrag&&(c().visible=!0,this.firstDrag=!1);let z=1;if(l.y<O.top&&l.x<O.left||l.y>O.bottom&&l.x<O.left||l.y<O.top&&l.x>O.right||l.y>O.bottom&&l.x>O.right){const e=Math.max(l.x-O.right,O.left-l.x),n=Math.max(l.y-O.bottom,O.top-l.y),o=Math.sqrt(e*e+n*n);z=Math.max(0,1-o/(10/t.view.zoom))}else l.y<O.top||l.y>O.bottom?z=Math.max(0,1-(Math.abs(l.y-T.y)-O.height/2)/(10/t.view.zoom)):(l.x<O.left||l.x>O.right)&&(z=Math.max(0,1-(Math.abs(l.x-T.x)-O.width/2)/(10/t.view.zoom)));c().opacity=p*z};const j=g.constructor.prototype.onMouseUp;g.constructor.prototype.onMouseUp=function(){var t;null===(t=y)||void 0===t||t();for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];j.apply(this,n)}},r=t=>"selectionBoxTool"in t&&"boundingBoxTool"in t},"./src/addons/addons/paint-snap/userscript.js":function(t,e,n){"use strict";n.r(e);var o=n("./src/addons/addons/paint-snap/updateSelectTool.js"),i=n("./src/addons/addons/paint-snap/state.js"),s=n("./src/addons/addons/paint-snap/ui.js"),a=n("./src/addons/addons/paint-snap/updateScaleTool.js");e.default=async function(t){const{addon:e}=t;e.self.addEventListener("disabled",i.disable),e.self.addEventListener("reenabled",i.enable),Object(i.loadSettings)(e);const n=await e.tab.traps.getPaper(),[r]=n.tools;Object(i.toggle)(e.settings.get("enable-default")),Object(i.setGuideColor)(e.settings.get("guide-color")),e.settings.addEventListener("change",()=>Object(i.setGuideColor)(e.settings.get("guide-color"))),Object(o.isSelectTool)(r)&&(Object(o.updateSelectTool)(n,r),Object(a.updateScaleTool)(n,r)),Object(s.initUI)(t)}}}]);
//# sourceMappingURL=addon-entry-paint-snap.js.map