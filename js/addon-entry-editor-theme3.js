/*! For license information please see addon-entry-editor-theme3.js.LICENSE */
(window.webpackJsonpGUI=window.webpackJsonpGUI||[]).push([["addon-entry-editor-theme3"],{"./node_modules/css-loader/index.js!./src/addons/addons/editor-theme3/black_text.css":function(o,t,e){(o.exports=e("./node_modules/css-loader/lib/css-base.js")(!1)).push([o.i,".scratchCategoryItemBubble::after {\n  /* block-palette-icons */\n  filter: brightness(0);\n  opacity: 0.6;\n}\n\n.blocklyDropDownDiv .goog-menuitem,\n.sa-contextmenu-colored .blocklyContextMenu .goog-menuitem .goog-menuitem-content {\n  color: #575e75;\n}\n.blocklyDropDownDiv .blocklyText {\n  fill: #575e75;\n}\n\n/* Compatibility */\n\n.sa-block-color {\n  --sa-block-text: #575e75;\n  --sa-block-gray-text: #575e75;\n  --sa-block-text-on-bright-background: #575e75;\n}\n",""])},"./node_modules/css-loader/index.js!./src/addons/addons/editor-theme3/color_on_black.css":function(o,t,e){(o.exports=e("./node_modules/css-loader/lib/css-base.js")(!1)).push([o.i,".u-dropdown-searchbar {\n  border-color: rgba(255, 255, 255, 0.15);\n}\n.u-dropdown-searchbar:focus {\n  background-color: var(--editorTheme3-hoveredItem);\n}\n.blocklyDropDownDiv .goog-menuitem-checkbox {\n  filter: brightness(0) invert(1);\n}\n\n.scratchCommentRect {\n  fill: #282828;\n}\n.scratchCommentBody,\n.scratchCommentTextarea {\n  background-color: #282828;\n}\n.scratchWorkspaceCommentBorder {\n  stroke: var(--editorTheme3-commentColor);\n}\n.scratchCommentTextarea::placeholder {\n  color: rgba(255, 255, 255, 0.5);\n}\n.scratchCommentText {\n  fill: #ffffff;\n  color: #ffffff;\n}\n\n/* Compatibility */\n\n.sa-block-color {\n  --sa-block-colored-background: var(--sa-block-background-secondary);\n  --sa-block-colored-background-secondary: var(--sa-block-field-background);\n  --sa-block-bright-background: var(--sa-block-background-tertiary);\n  --sa-block-text: var(--sa-block-background-tertiary);\n  --sa-block-gray-text: white;\n  --sa-block-colored-text: var(--sa-block-background-tertiary);\n  --sa-block-text-on-bright-background: white;\n}\n",""])},"./node_modules/css-loader/index.js!./src/addons/addons/editor-theme3/color_on_white.css":function(o,t,e){(o.exports=e("./node_modules/css-loader/lib/css-base.js")(!1)).push([o.i,".scratchCategoryItemBubble::after {\n  /* block-palette-icons */\n  filter: brightness(0);\n  opacity: 0.6;\n}\n\n.u-dropdown-searchbar,\n.u-dropdown-searchbar:focus,\n.blocklyDropDownDiv .goog-menuitem,\n.sa-contextmenu-colored .blocklyContextMenu .goog-menuitem .goog-menuitem-content {\n  color: #575e75;\n}\n.u-dropdown-searchbar:focus {\n  background-color: var(--editorTheme3-hoveredItem);\n}\n\n.blocklyAngleDragHandle {\n  stroke: black;\n  stroke-opacity: 0.15;\n  paint-order: stroke fill;\n}\n\n.scratchCommentRect {\n  fill: #feffff;\n}\n.scratchCommentBody,\n.scratchCommentTextarea {\n  background-color: #ffffff;\n}\n.scratchWorkspaceCommentBorder {\n  stroke: var(--editorTheme3-commentColor);\n}\n.scratchCommentTextarea::placeholder {\n  color: rgba(0, 0, 0, 0.5);\n}\n.scratchCommentText {\n  fill: #575e75;\n  color: #575e75;\n}\n\n/* Compatibility */\n\n.sa-block-color {\n  --sa-block-colored-background: var(--sa-block-background-secondary);\n  --sa-block-colored-background-secondary: var(--sa-block-field-background);\n  --sa-block-bright-background: var(--sa-block-background-tertiary);\n  --sa-block-text: var(--sa-block-background-tertiary);\n  --sa-block-gray-text: #575e75;\n  --sa-block-colored-text: var(--sa-block-background-tertiary);\n  --sa-block-text-on-bright-background: white;\n}\n",""])},"./node_modules/css-loader/index.js!./src/addons/addons/editor-theme3/theme3.css":function(o,t,e){(o.exports=e("./node_modules/css-loader/lib/css-base.js")(!1)).push([o.i,".blocklyEditableText > text {\n  fill: var(--editorTheme3-inputColor-text);\n}\n.blocklyHtmlInput {\n  background-color: var(--editorTheme3-inputColor);\n  color: var(--editorTheme3-inputColor-text);\n}\n\n.blocklyDropDownDiv .goog-menuitem-highlight,\n.blocklyDropDownDiv .goog-menuitem-hover,\n.sa-contextmenu-colored .blocklyContextMenu .goog-menuitem-highlight {\n  background-color: var(--editorTheme3-hoveredItem, rgba(0, 0, 0, 0.2));\n}\n\n.scratchCommentRect {\n  fill: var(--editorTheme3-commentColor);\n}\n.scratchCommentBody,\n.scratchCommentTextarea {\n  background-color: var(--editorTheme3-commentColor);\n}\n.scratchWorkspaceCommentBorder {\n  stroke: var(--editorTheme3-commentBorder);\n}\n.scratchCommentTextarea::placeholder {\n  color: var(--editorTheme3-commentTextTransparent);\n}\n.scratchCommentText {\n  fill: var(--editorTheme3-commentText);\n  color: var(--editorTheme3-commentText);\n}\n",""])},"./src/addons/addons/editor-theme3/_runtime_entry.js":function(o,t,e){"use strict";e.r(t),e.d(t,"resources",(function(){return u}));var r=e("./src/addons/addons/editor-theme3/theme3.js"),n=e("./node_modules/css-loader/index.js!./src/addons/addons/editor-theme3/theme3.css"),s=e.n(n),l=e("./node_modules/css-loader/index.js!./src/addons/addons/editor-theme3/black_text.css"),c=e.n(l),i=e("./node_modules/css-loader/index.js!./src/addons/addons/editor-theme3/color_on_white.css"),a=e.n(i),d=e("./node_modules/css-loader/index.js!./src/addons/addons/editor-theme3/color_on_black.css"),m=e.n(d);const u={"theme3.js":r.default,"theme3.css":s.a,"black_text.css":c.a,"color_on_white.css":a.a,"color_on_black.css":m.a}},"./src/addons/addons/editor-theme3/theme3.js":function(o,t,e){"use strict";e.r(t);var r=e("./src/addons/libraries/common/cs/text-color.esm.js");const n={id:null,settingId:"Pen-color",colorId:"pen"},s={id:null,settingId:"tw-color",colorId:"tw"},l={settingId:"sa-color",colorId:"sa"},c=[{id:"motion",settingId:"motion-color",colorId:"motion"},{id:"looks",settingId:"looks-color",colorId:"looks"},{id:"sound",settingId:"sounds-color",colorId:"sounds"},{id:"events",settingId:"events-color",colorId:"event"},{id:"control",settingId:"control-color",colorId:"control"},{id:"sensing",settingId:"sensing-color",colorId:"sensing"},{id:"operators",settingId:"operators-color",colorId:"operators"},{id:"variables",settingId:"data-color",colorId:"data"},{id:"lists",settingId:"data-lists-color",colorId:"data_lists"},{id:"myBlocks",settingId:"custom-color",colorId:"more"},n,s,l];t.default=async function(o){let{addon:t,console:e}=o;const i=await t.tab.traps.getBlockly(),a=JSON.parse(JSON.stringify(i.Colours));a.sa={primary:"#29beb8",secondary:"#3aa8a4",tertiary:"#3aa8a4"},a.tw={primary:"#ff4c4c",secondary:"#e64444",tertiary:"#e64444"};let d=t.settings.get("text");const m=()=>!t.self.disabled&&("colorOnWhite"===d||"colorOnBlack"===d),u=o=>t.self.disabled?a[o.colorId].primary:"colorOnWhite"===d?"#feffff":"colorOnBlack"===d?"#282828":t.settings.get(o.settingId),h=o=>t.self.disabled?a[o.colorId].secondary:m()?Object(r.alphaBlend)(u(o),Object(r.multiply)(t.settings.get(o.settingId),{a:.15})):Object(r.multiply)(t.settings.get(o.settingId),{r:.9,g:.9,b:.9}),b=o=>t.self.disabled?a[o.colorId].tertiary:m()?t.settings.get(o.settingId):Object(r.multiply)(t.settings.get(o.settingId),{r:.8,g:.8,b:.8}),p=o=>{if(o instanceof i.Block||o instanceof i.Field){const t=o instanceof i.Block?o:o.sourceBlock_;if(m()){let o;return o=t.isShadow()&&t.getParent()?t.getParent().getColour():t.getColour(),Object(r.alphaBlend)(o,Object(r.multiply)(t.getColourTertiary(),{a:.25}))}return t.getColourTertiary()}return m()?Object(r.alphaBlend)(u(o),Object(r.multiply)(t.settings.get(o.settingId),{a:.25})):b(o)},g=o=>t.self.disabled||"white"===d?"#ffffff":"black"===d?"#575e75":o?o.sourceBlock_.getColourTertiary():"#000000",f=()=>t.self.disabled?"#ffffff":{white:"#ffffff",black:"#575e75",colorOnWhite:"#575e75",colorOnBlack:"#ffffff"}[d],k=i.Block.prototype.makeColour_;i.Block.prototype.makeColour_=function(o){return"string"==typeof o&&/^#(?:[0-9A-Za-z]{2}){3,4}$/.test(o)?o:k(o)};const y=i.Toolbox.Category.prototype.createDom;i.Toolbox.Category.prototype.createDom=function(){if(y.call(this),this.iconURI_)return;const o=c.find(o=>o.id===this.id_);o&&(this.bubble_.style.backgroundColor=m()?p(o):u(o),this.bubble_.style.borderColor=b(o))};const x=i.Block.prototype.setColour;i.Block.prototype.setColour=function(o,t,e){return o.toLowerCase()===a.pen.primary.toLowerCase()&&(o=u(n),t=h(n),e=b(n)),this.type.startsWith("tw_")&&(o=u(s),t=h(s),e=b(s)),x.call(this,o,t,e)};const C=i.BlockSvg.prototype.updateColour;i.BlockSvg.prototype.updateColour=function(){C.call(this);for(const o of this.inputList)o.outlinePath&&o.outlinePath.setAttribute("fill",p(this))};const _=i.BlockSvg.prototype.showContextMenu_;i.BlockSvg.prototype.showContextMenu_=function(o){return i.WidgetDiv.DIV.style.setProperty("--editorTheme3-hoveredItem",p(this)),_.call(this,o)};const v=i.FieldLabel.prototype.init;i.FieldLabel.prototype.init=function(){v.call(this),this.textElement_.style.fill=g(this)};const I=i.FieldTextInput.prototype.init;i.FieldTextInput.prototype.init=function(){I.call(this),this.sourceBlock_.isShadow()||this.box_.setAttribute("fill",p(this))};const w=i.FieldDropdown.prototype.init;i.FieldDropdown.prototype.init=function(){w.call(this),this.textElement_.style.setProperty("fill",g(this),"important"),"#ffffff"!==g(this)&&(this.arrow_.style.filter=Object(r.recolorFilter)(g(this)))};const T=i.FieldDropdown.prototype.showEditor_;i.FieldDropdown.prototype.showEditor_=function(){let o;T.call(this),this.disableColourChange_||(this.sourceBlock_.isShadow()?this.sourceBlock_.setShadowColour(p(this)):this.box_&&this.box_.setAttribute("fill",p(this))),o=this.sourceBlock_.isShadow()&&this.sourceBlock_.getParent()?this.sourceBlock_.getParent().getColour():this.sourceBlock_.getColour(),i.DropDownDiv.DIV_.style.backgroundColor=Object(r.removeAlpha)(o),m()?i.DropDownDiv.getContentDiv().style.setProperty("--editorTheme3-hoveredItem",p(this)):i.DropDownDiv.getContentDiv().style.removeProperty("--editorTheme3-hoveredItem")};const B=i.FieldVariable.prototype.init;i.FieldVariable.prototype.init=function(){B.call(this),this.textElement_.style.setProperty("fill",g(this),"important")};const D=i.FieldVariableGetter.prototype.init;i.FieldVariableGetter.prototype.init=function(){D.call(this),this.textElement_.style.fill=g(this)};const j=i.FieldMatrix.prototype.updateMatrix_;i.FieldMatrix.prototype.updateMatrix_=function(){j.call(this);for(let o=0;o<this.matrix_.length;o++)"0"!==this.matrix_[o]&&(this.fillMatrixNode_(this.ledButtons_,o,f()),this.fillMatrixNode_(this.ledThumbNodes_,o,f()))};const F=i.FieldMatrix.prototype.createButton_;i.FieldMatrix.prototype.createButton_=function(o){return"#FFFFFF"===o&&(o=f()),F.call(this,o)};const O=()=>{const o=t.tab.traps.vm;d=t.settings.get("text");for(const o of c){const t="--editorTheme3-".concat(o.colorId);for(const[e,r]of Object.entries({primary:u(o),secondary:h(o),tertiary:b(o),field:p(o)}))document.documentElement.style.setProperty("".concat(t,"-").concat(e),r);i.Colours[o.colorId]&&(i.Colours[o.colorId].primary=u(o),i.Colours[o.colorId].secondary=h(o),i.Colours[o.colorId].tertiary=b(o))}t.tab.setCustomBlockColor({color:u(l),secondaryColor:h(l),tertiaryColor:b(l)}),i.Colours.textField=t.self.disabled?a.textField:t.settings.get("input-color"),"#575e75"===f()?i.Colours.fieldShadow="rgba(0, 0, 0, 0.15)":i.Colours.fieldShadow=a.fieldShadow;const e=i.getMainWorkspace(),r=e.getFlyout(),n=e.getToolbox();o.editingTarget&&o.emitWorkspaceUpdate();const s=r.getWorkspace();i.Xml.clearWorkspaceAndLoadFromXml(i.Xml.workspaceToDom(s),s),n.populate_(e.options.languageTree),e.toolboxRefreshEnabled_=!0};O(),t.settings.addEventListener("change",O),t.self.addEventListener("disabled",O),t.self.addEventListener("reenabled",O)}}}]);
//# sourceMappingURL=addon-entry-editor-theme3.js.map