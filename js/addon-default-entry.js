/*! For license information please see addon-default-entry.js.LICENSE */
(window.webpackJsonpGUI=window.webpackJsonpGUI||[]).push([["addon-default-entry"],{"./node_modules/css-loader/index.js!./src/addons/addons/color-picker/style.css":function(e,t,o){(e.exports=o("./node_modules/css-loader/lib/css-base.js")(!1)).push([e.i,'.sa-color-picker {\n  display: flex;\n}\n\n.sa-color-picker-code {\n  margin: 8px 0;\n}\n\n.sa-color-picker-paint {\n  margin-top: 16px;\n  margin-bottom: 4px;\n}\n\n.sa-color-picker > .sa-color-picker-color {\n  border: none;\n  border-top-left-radius: 1rem;\n  border-bottom-left-radius: 1rem;\n  padding: 0;\n  padding-left: 0.6rem;\n  padding-right: 0.4rem;\n  margin-left: 0.5rem;\n  outline: none;\n  box-sizing: border-box;\n  width: 3rem;\n  height: 2rem;\n}\n[theme="dark"] .sa-color-picker > .sa-color-picker-color {\n  background: var(--ui-secondary);\n}\n\n.sa-color-picker > .sa-color-picker-text {\n  box-sizing: border-box;\n  width: calc(150px - 3rem);\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n\n[dir="rtl"] .sa-color-picker > .sa-color-picker-color {\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n  border-top-right-radius: 1rem;\n  border-bottom-right-radius: 1rem;\n  margin-left: 0;\n  margin-right: 0.5rem;\n}\n\n[dir="rtl"] .sa-color-picker > .sa-color-picker-text {\n  border-top-left-radius: 1rem;\n  border-bottom-left-radius: 1rem;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n}\n\nbody.sa-hide-eye-dropper-background div[class*="stage_color-picker-background"] {\n  /* Do not show eye dropper background if the color picker is "fake" */\n  display: none;\n}\n',""])},"./node_modules/css-loader/index.js!./src/addons/addons/editor-comment-previews/userstyle.css":function(e,t,o){(e.exports=o("./node_modules/css-loader/lib/css-base.js")(!1)).push([e.i,".sa-comment-preview-outer {\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 100000000;\n  pointer-events: none;\n}\n\n.sa-comment-preview-inner {\n  width: calc(200px - 16px);\n  max-height: calc(132px - 8px);\n  padding: 8px;\n  overflow: hidden;\n\n  font-size: 12px;\n  white-space: pre-wrap;\n  pointer-events: none;\n\n  color: rgb(87, 94, 117);\n  background-color: rgb(255 255 255 / 90%);\n  border-style: none;\n  border-radius: 8px;\n  filter: drop-shadow(0px 5px 5px rgb(0 0 0 / 10%));\n\n  transform: perspective(200px);\n}\n\n@supports (backdrop-filter: blur(16px)) {\n  .sa-comment-preview-inner {\n    background-color: rgb(255 255 255 / 75%);\n    backdrop-filter: blur(16px);\n  }\n}\n\n.sa-comment-preview-fade {\n  transition: opacity 0.1s, filter 0.1s, transform 0.1s linear;\n}\n\n.sa-comment-preview-hidden {\n  opacity: 0;\n  filter: none;\n  transform: perspective(200px) translateZ(-20px);\n}\n\n.sa-comment-preview-reduce-transparency {\n  background-color: rgb(255 255 255);\n  backdrop-filter: none;\n}\n",""])},"./node_modules/css-loader/index.js!./src/addons/addons/editor-searchable-dropdowns/userscript.css":function(e,t,o){(e.exports=o("./node_modules/css-loader/lib/css-base.js")(!1)).push([e.i,".u-dropdown-searchbar {\n  width: 100%;\n  box-sizing: border-box;\n  /* based on styles for the title input */\n  color: white;\n  background-color: hsla(0, 100%, 100%, 0.25);\n  border: 1px solid hsla(0, 0%, 0%, 0.15);\n  padding: 0.5rem;\n  outline: none;\n  transition: 0.25s ease-out;\n  font-size: 13px;\n  font-weight: bold;\n  border-radius: 4px;\n}\n.u-dropdown-searchbar:hover {\n  background-color: hsla(0, 100%, 100%, 0.5);\n}\n.u-dropdown-searchbar:focus {\n  background-color: white;\n  color: black;\n}\n.blocklyDropDownDiv .goog-menu {\n  overflow-x: hidden;\n}\n",""])},"./node_modules/css-loader/index.js!./src/addons/addons/editor-theme3/compatibility.css":function(e,t,o){(e.exports=o("./node_modules/css-loader/lib/css-base.js")(!1)).push([e.i,"/* Imported by other addons */\n\n.sa-block-color {\n  --sa-block-colored-background: var(--sa-block-background-primary);\n  --sa-block-colored-background-secondary: var(--sa-block-background-tertiary);\n  --sa-block-bright-background: var(--sa-block-background-primary);\n  --sa-block-text: white;\n  --sa-block-gray-text: white;\n  --sa-block-colored-text: var(--sa-block-background-primary);\n  --sa-block-text-on-bright-background: white;\n}\n\n.sa-block-color-motion {\n  --sa-block-background-primary: var(--editorTheme3-motion-primary, #4c97ff);\n  --sa-block-background-secondary: var(--editorTheme3-motion-secondary, #4280d7);\n  --sa-block-background-tertiary: var(--editorTheme3-motion-tertiary, #3373cc);\n  --sa-block-field-background: var(--editorTheme3-motion-field, #3373cc);\n}\n\n.sa-block-color-looks {\n  --sa-block-background-primary: var(--editorTheme3-looks-primary, #9966ff);\n  --sa-block-background-secondary: var(--editorTheme3-looks-secondary, #855cd6);\n  --sa-block-background-tertiary: var(--editorTheme3-looks-tertiary, #774dcb);\n  --sa-block-field-background: var(--editorTheme3-looks-field, #774dcb);\n}\n\n.sa-block-color-sounds {\n  --sa-block-background-primary: var(--editorTheme3-sounds-primary, #cf63cf);\n  --sa-block-background-secondary: var(--editorTheme3-sounds-secondary, #c94fc9);\n  --sa-block-background-tertiary: var(--editorTheme3-sounds-tertiary, #bd42bd);\n  --sa-block-field-background: var(--editorTheme3-sounds-field, #bd42bd);\n}\n\n.sa-block-color-events {\n  --sa-block-background-primary: var(--editorTheme3-event-primary, #ffbf00);\n  --sa-block-background-secondary: var(--editorTheme3-event-secondary, #e6ac00);\n  --sa-block-background-tertiary: var(--editorTheme3-event-tertiary, #cc9900);\n  --sa-block-field-background: var(--editorTheme3-event-field, #cc9900);\n}\n\n.sa-block-color-control {\n  --sa-block-background-primary: var(--editorTheme3-control-primary, #ffab19);\n  --sa-block-background-secondary: var(--editorTheme3-control-secondary, #ec9c13);\n  --sa-block-background-tertiary: var(--editorTheme3-control-tertiary, #cf8b17);\n  --sa-block-field-background: var(--editorTheme3-control-field, #cf8b17);\n}\n\n.sa-block-color-sensing {\n  --sa-block-background-primary: var(--editorTheme3-sensing-primary, #5cb1d6);\n  --sa-block-background-secondary: var(--editorTheme3-sensing-secondary, #47a8d1);\n  --sa-block-background-tertiary: var(--editorTheme3-sensing-tertiary, #2e8eb8);\n  --sa-block-field-background: var(--editorTheme3-sensing-field, #2e8eb8);\n}\n\n.sa-block-color-operators {\n  --sa-block-background-primary: var(--editorTheme3-operators-primary, #59c059);\n  --sa-block-background-secondary: var(--editorTheme3-operators-secondary, #46b946);\n  --sa-block-background-tertiary: var(--editorTheme3-operators-tertiary, #389438);\n  --sa-block-field-background: var(--editorTheme3-operators-field, #389438);\n}\n\n.sa-block-color-data {\n  --sa-block-background-primary: var(--editorTheme3-data-primary, #ff8c1a);\n  --sa-block-background-secondary: var(--editorTheme3-data-secondary, #ff8000);\n  --sa-block-background-tertiary: var(--editorTheme3-data-tertiary, #db6e00);\n  --sa-block-field-background: var(--editorTheme3-data-field, #db6e00);\n}\n\n.sa-block-color-data-lists,\n.sa-block-color-list {\n  --sa-block-background-primary: var(--editorTheme3-data_lists-primary, #ff661a);\n  --sa-block-background-secondary: var(--editorTheme3-data_lists-secondary, #ff5500);\n  --sa-block-background-tertiary: var(--editorTheme3-data_lists-tertiary, #e64d00);\n  --sa-block-field-background: var(--editorTheme3-data_lists-field, #e64d00);\n}\n\n.sa-block-color-more,\n.sa-block-color-null {\n  --sa-block-background-primary: var(--editorTheme3-more-primary, #ff6680);\n  --sa-block-background-secondary: var(--editorTheme3-more-secondary, #ff4d6a);\n  --sa-block-background-tertiary: var(--editorTheme3-more-tertiary, #ff3355);\n  --sa-block-field-background: var(--editorTheme3-more-field, #ff3355);\n}\n\n.sa-block-color-pen {\n  --sa-block-background-primary: var(--editorTheme3-pen-primary, #0fbd8c);\n  --sa-block-background-secondary: var(--editorTheme3-pen-secondary, #0da57a);\n  --sa-block-background-tertiary: var(--editorTheme3-pen-tertiary, #0b8e69);\n  --sa-block-field-background: var(--editorTheme3-pen-field, #0b8e69);\n}\n\n.sa-block-color-addon-custom-block {\n  --sa-block-background-primary: var(--editorTheme3-sa-primary, #29beb8);\n  --sa-block-background-secondary: var(--editorTheme3-sa-secondary, #3aa8a4);\n  --sa-block-background-tertiary: var(--editorTheme3-sa-tertiary, #3aa8a4);\n  --sa-block-field-background: var(--editorTheme3-sa-field, #3aa8a4);\n}\n\n.sa-block-color-TurboWarp {\n  --sa-block-background-primary: var(--editorTheme3-tw-primary, #ff4c4c);\n  --sa-block-background-secondary: var(--editorTheme3-tw-secondary, #e64444);\n  --sa-block-background-tertiary: var(--editorTheme3-tw-tertiary, #e64444);\n  --sa-block-field-background: var(--editorTheme3-tw-field, #e64444);\n}\n",""])},"./node_modules/css-loader/index.js!./src/addons/addons/find-bar/userstyle.css":function(e,t,o){(t=e.exports=o("./node_modules/css-loader/lib/css-base.js")(!1)).i(o("./node_modules/css-loader/index.js!./src/addons/addons/editor-theme3/compatibility.css"),""),t.push([e.i,'.sa-find-bar {\n  display: flex;\n  align-items: center;\n  white-space: nowrap;\n  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n  width: 100%;\n  height: 100%;\n  margin-left: 1em;\n}\n.sa-find-bar[hidden] {\n  /* !important to override displayNoneWhileDisabled */\n  display: none !important;\n}\n\n.sa-find-wrapper {\n  overflow: visible;\n  position: relative;\n  height: 2rem;\n  width: 100%;\n  max-width: 16em;\n}\n\n.sa-find-dropdown-out {\n  display: block;\n  top: -6px;\n  z-index: 100;\n  width: 100%;\n  max-width: 16em;\n  position: relative;\n  padding: 4px;\n  border: none;\n  border-radius: 4px;\n  margin-top: 6px;\n}\n\n.sa-find-dropdown-out.visible {\n  position: absolute;\n  width: 16em;\n  box-shadow: 0px 0px 8px 1px var(--ui-black-transparent, rgba(0, 0, 0, 0.3));\n  background-color: var(--ui-primary, white);\n}\n\n/* We need to modify Scratch styles so that the place where the find bar is injected */\n/* has actually correct size information, which is used to make the find bar not cover up controls */\n[class*="gui_tab-list_"] {\n  width: 100%;\n}\n[class*="gui_tab_"] {\n  flex-grow: 0;\n}\n\n.sa-find-input {\n  width: 100%;\n  box-sizing: border-box !important;\n  /* !important required for extension, because CSS injection method (and hence order) differs from addon */\n  height: 1.5rem;\n\n  /* Change Scratch default styles */\n  border-radius: 0.25rem;\n  font-size: 0.75rem;\n  padding-left: 0.4em;\n}\n\n.sa-find-input:focus {\n  /* Change Scratch default styles */\n  box-shadow: none;\n}\n\n.sa-find-dropdown {\n  display: none;\n  position: relative;\n  padding: 0.2em 0;\n  font-size: 0.75rem;\n  line-height: 1;\n  overflow-y: auto;\n  min-height: 128px;\n  max-height: 65vh;\n  user-select: none;\n  max-width: 100%;\n  margin-top: 6px;\n  border: none;\n}\n\n.sa-find-dropdown-out.visible > .sa-find-dropdown {\n  display: block;\n}\n\n.sa-find-dropdown > li {\n  display: block;\n  padding: 0.5em 0.3em;\n  white-space: nowrap;\n  margin: 0;\n  font-weight: bold;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n\n.sa-find-dropdown > li > b {\n  background-color: #aaffaa;\n  color: black;\n}\n\n/* Drop down items */\n.sa-find-dropdown > li:hover,\n.sa-find-dropdown > li.sel {\n  color: white;\n  cursor: pointer;\n}\n\n.sa-find-dropdown > li::before {\n  content: "\\25CF   "; /* ● */\n}\n\n.sa-find-flag {\n  color: #4cbf56;\n}\n.sa-find-flag:hover,\n.sa-find-flag.sel {\n  background-color: #4cbf56;\n}\n\n.sa-find-dropdown .sa-block-color {\n  color: var(--sa-block-colored-text);\n}\n.sa-find-dropdown .sa-block-color:hover,\n.sa-find-dropdown .sa-block-color.sel {\n  background-color: var(--sa-block-bright-background);\n}\n\n.sa-find-carousel {\n  font-weight: normal;\n  position: absolute;\n  right: 0;\n  white-space: nowrap;\n  background-color: inherit;\n  z-index: 1;\n  padding: 0;\n}\n\n.sa-find-carousel-control {\n  padding: 0 6px;\n}\n\n.sa-find-carousel-control:hover {\n  color: #ffff80;\n}\n',""])},"./node_modules/css-loader/index.js!./src/addons/addons/folders/style.css":function(e,t,o){(e.exports=o("./node_modules/css-loader/lib/css-base.js")(!1)).push([e.i,'.sa-folders-contextmenu-item {\n  max-width: 250px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n[sa-folders-context-type="folder"] .react-contextmenu > :not(.sa-ctx-menu) {\n  display: none;\n}\n',""])},"./node_modules/css-loader/index.js!./src/addons/addons/middle-click-popup/userstyle.css":function(e,t,o){(t=e.exports=o("./node_modules/css-loader/lib/css-base.js")(!1)).i(o("./node_modules/css-loader/index.js!./src/addons/addons/editor-theme3/compatibility.css"),""),t.push([e.i,'/* Find Input Box */\n.sa-float-bar-input {\n  width: 100%;\n  box-sizing: border-box !important;\n  /* !important required for extension, because CSS injection method (and hence order) differs from addon */\n  height: 1.5rem;\n\n  /* Change Scratch default styles */\n  border-radius: 0.25rem;\n  font-size: 0.75rem;\n  padding-left: 0.4em;\n}\n[theme="dark"] input.s3devInp {\n  color: #eee;\n  background: #3333;\n}\n[theme="dark"] input.s3devInp:hover {\n  background: #333;\n}\n\n.sa-float-bar-input:focus {\n  /* Change Scratch default styles */\n  box-shadow: none;\n}\n\n/* Drop down from find button */\n.sa-float-bar-dropdown-out {\n  display: block;\n  top: -6px;\n  z-index: 100;\n  max-width: 16em;\n  padding: 4px;\n  position: absolute;\n  width: 16em;\n  box-shadow: 0px 0px 8px 1px var(--ui-black-transparent, rgba(0, 0, 0, 0.3));\n  background-color: var(--ui-primary, white);\n  border: none;\n  border-radius: 4px;\n}\n\n/* Drop down from find button */\n.sa-float-bar-dropdown {\n  display: none;\n  position: relative;\n  padding: 0.2em 0;\n  font-size: 0.75rem;\n  line-height: 1;\n  overflow-y: auto;\n  min-height: 128px;\n  user-select: none;\n  max-width: 100%;\n  max-height: 200px;\n  margin-bottom: 0;\n}\n\n.sa-float-bar-dropdown-out.vis .sa-float-bar-dropdown {\n  display: block;\n  border: none;\n}\n\n/* Drop down items */\n.sa-float-bar-dropdown > li {\n  display: block;\n  padding: 0.5em 0.3em;\n  white-space: nowrap;\n  margin: 0;\n  font-weight: bold;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  cursor: pointer;\n}\n\n.sa-float-bar-dropdown > li > b {\n  background-color: #aaffaa;\n  color: black;\n}\n\n.sa-float-bar-dropdown > li {\n  height: 19px;\n  padding: 3px 8px;\n  margin: 2px 0.3em;\n  box-sizing: border-box;\n  position: relative;\n  background-color: var(--sa-block-colored-background);\n  color: var(--sa-block-text);\n  font-weight: bold;\n  width: min-content;\n}\n.sa-float-bar-dropdown > li:hover,\n.sa-float-bar-dropdown > li.sel {\n  background-color: var(--sa-block-colored-background-secondary);\n}\n\n.sa-float-bar-dropdown > li.sa-hat {\n  border-radius: 14px 14px 3px 3px;\n}\n.sa-float-bar-dropdown > li.sa-block {\n  border-radius: 3px;\n}\n.sa-float-bar-dropdown > li.sa-reporter {\n  border-radius: 10px;\n}\n\n.sa-float-bar-dropdown > li.sa-boolean {\n  width: min-content;\n}\n.sa-float-bar-dropdown > li.sa-boolean::before {\n  content: "";\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 0;\n  height: 0;\n  border-right: 9px solid transparent;\n  border-top: 9px solid var(--ui-primary, white);\n  border-bottom: 10px solid var(--ui-primary, white);\n}\n.sa-float-bar-dropdown > li.sa-boolean::after {\n  content: "";\n  position: absolute;\n  right: 0;\n  top: 0;\n  width: 0;\n  height: 0;\n  border-left: 9px solid transparent;\n  border-top: 9px solid var(--ui-primary, white);\n  border-bottom: 10px solid var(--ui-primary, white);\n}\n[theme="dark"] .s3devDD > li.boolean::before {\n  border-top-color: #111;\n  border-bottom-color: #111;\n}\n[theme="dark"] .s3devDD > li.boolean::after {\n  border-top-color: #111;\n  border-bottom-color: #111;\n}\n\n.sa-float-bar {\n  display: flex;\n  white-space: nowrap;\n  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n\n  position: absolute;\n  min-width: 128px;\n  background-color: white;\n  border-radius: 4px;\n  box-shadow: rgba(0, 0, 0, 0.3) 0 0 3px, rgba(0, 0, 0, 0.2) 0 3px 10px;\n\n  z-index: 999;\n}\n[theme="dark"] #s3devFloatingBar {\n  background-color: #111;\n}\n\n.sa-float-bar-dropdown > li > b {\n  background-color: rgba(0, 0, 0, 0.6);\n  color: white;\n}\n\n[data-highlighted="true"] {\n  background-color: hsla(30, 100%, 55%, 1) !important; /* orange */\n  color: white !important;\n}\n',""])},"./node_modules/css-loader/index.js!./src/addons/addons/onion-skinning/style.css":function(e,t,o){(e.exports=o("./node_modules/css-loader/lib/css-base.js")(!1)).push([e.i,'.sa-onion-button {\n  position: relative;\n}\n.sa-onion-button:focus-within {\n  background-color: hsla(0, 100%, 65%, 0.2);\n}\n[theme="dark"] .sa-onion-image {\n  filter: brightness(0) invert(0.8);\n}\n.sa-onion-button[data-enabled="true"] .sa-onion-image {\n  filter: brightness(0) invert(1);\n}\n.sa-onion-button[data-enabled="true"] {\n  background-color: #ff4c4c;\n}\n\n.sa-onion-group {\n  position: relative;\n  flex-direction: row;\n}\n\n.sa-onion-settings-wrapper {\n  position: absolute;\n  justify-items: center;\n  left: 50%;\n  width: 1.95rem;\n  height: 1.95rem;\n  display: grid;\n}\n\n.sa-onion-settings {\n  position: absolute;\n  bottom: 100%;\n  /* based on the styles for the color dropdown */\n  padding: 4px;\n  border-radius: 4px;\n  border: 1px solid var(--paint-ui-pane-border, #ddd);\n  box-shadow: 0px 0px 8px 1px rgba(0, 0, 0, 0.3);\n  transition-property: bottom, opacity;\n  transition-duration: 500ms;\n  transition-timing-function: cubic-bezier(0.23, 1, 0.32, 1);\n  opacity: 0;\n  pointer-events: none;\n  background: var(--ui-primary, white);\n  min-height: 100%;\n  min-width: 100%;\n  display: flex;\n  flex-direction: column;\n  gap: 0.25em;\n}\n.sa-onion-settings[data-visible="true"] {\n  bottom: calc(100% + 22px);\n  pointer-events: auto;\n  opacity: 1;\n}\n\n.sa-onion-settings-line {\n  display: flex;\n  justify-content: flex-end;\n  align-items: baseline;\n  gap: 0.25em;\n}\n\n.sa-onion-settings-input {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  text-align: center;\n  border: 0;\n  background: transparent;\n  -moz-appearance: textfield;\n  border: 0;\n  outline: 0;\n}\n\n.sa-onion-settings-input::-webkit-outer-spin-button,\n.sa-onion-settings-input::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n  margin: 0;\n}\n\n.sa-onion-settings-tip {\n  position: absolute;\n  bottom: 0;\n  transform: translateY(100%);\n  right: calc(50% - 7px);\n}\n.sa-onion-settings-polygon {\n  fill: var(--ui-primary, white);\n  stroke: var(--paint-ui-pane-border, #ddd);\n}\n\n.sa-onion-settings-label {\n  white-space: nowrap;\n}\n',""])},"./node_modules/css-loader/index.js!./src/addons/addons/pick-colors-from-stage/style.css":function(e,t,o){(e.exports=o("./node_modules/css-loader/lib/css-base.js")(!1)).push([e.i,'.sa-stage-color-picker-picking [class^="stage_color-picker-background_"] {\n  display: none;\n}\n',""])},"./node_modules/url-loader/dist/cjs.js!./src/addons/addons/editor-devtools/icon--close.svg":function(e,t,o){"use strict";o.r(t),t.default="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA3LjQ4IDcuNDgiPjxkZWZzPjxzdHlsZT4uY2xzLTF7ZmlsbDpub25lO3N0cm9rZTojZmZmO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6MnB4O308L3N0eWxlPjwvZGVmcz48dGl0bGU+aWNvbi0tYWRkPC90aXRsZT48bGluZSBjbGFzcz0iY2xzLTEiIHgxPSIzLjc0IiB5MT0iNi40OCIgeDI9IjMuNzQiIHkyPSIxIi8+PGxpbmUgY2xhc3M9ImNscy0xIiB4MT0iMSIgeTE9IjMuNzQiIHgyPSI2LjQ4IiB5Mj0iMy43NCIvPjwvc3ZnPg=="},"./node_modules/url-loader/dist/cjs.js!./src/addons/addons/folders/folder.svg":function(e,t,o){"use strict";o.r(t),t.default="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHdpZHRoPSIyNCI+PHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPjxwYXRoIGQ9Ik0xMCA0SDRjLTEuMSAwLTEuOTkuOS0xLjk5IDJMMiAxOGMwIDEuMS45IDIgMiAyaDE2YzEuMSAwIDItLjkgMi0yVjhjMC0xLjEtLjktMi0yLTJoLThsLTItMnoiLz48L3N2Zz4="},"./node_modules/url-loader/dist/cjs.js!./src/addons/addons/onion-skinning/decrement.svg":function(e,t,o){"use strict";o.r(t),t.default="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PHBhdGggc3R5bGU9ImZpbGw6IzU3NWU3NTtzdHJva2Utd2lkdGg6LjczNDczNiIgZD0iTTMuMjUgMTEuMzU4aDE3LjUwMXYxLjI4NUgzLjI1eiIvPjwvc3ZnPg=="},"./node_modules/url-loader/dist/cjs.js!./src/addons/addons/onion-skinning/increment.svg":function(e,t,o){"use strict";o.r(t),t.default="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHdpZHRoPSIyNCI+PHBhdGggc3R5bGU9ImZpbGw6IzU3NWU3NTtzdHJva2Utd2lkdGg6LjczNDczNiIgZD0iTTMuMjUgMTEuMzU4aDE3LjUwMXYxLjI4NUgzLjI1eiIvPjxwYXRoIHRyYW5zZm9ybT0icm90YXRlKDkwKSIgc3R5bGU9ImZpbGw6IzU3NWU3NTtzdHJva2Utd2lkdGg6LjczNDczNiIgZD0iTTMuMjUtMTIuNjQyaDE3LjUwMXYxLjI4NUgzLjI1eiIvPjwvc3ZnPg=="},"./node_modules/url-loader/dist/cjs.js!./src/addons/addons/onion-skinning/settings.svg":function(e,t,o){"use strict";o.r(t),t.default="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PHBhdGggc3R5bGU9Im9wYWNpdHk6Ljc1O2ZpbGw6bm9uZTtzdHJva2U6IzAwMDtzdHJva2Utd2lkdGg6NDtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIgZD0iTTU2IDE2djk2IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMi4zNzYgLTIuMzc2KSBzY2FsZSguMjI0NjIpIi8+PHBhdGggc3R5bGU9Im9wYWNpdHk6LjU7ZmlsbDpub25lO3N0cm9rZTojMDAwO3N0cm9rZS13aWR0aDo0O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiBkPSJNNDAgMzJ2NjQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yLjM3NiAtMi4zNzYpIHNjYWxlKC4yMjQ2MikiLz48cGF0aCBzdHlsZT0ib3BhY2l0eTouMjU7ZmlsbDpub25lO3N0cm9rZTojMDAwO3N0cm9rZS13aWR0aDo0O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiBkPSJNMjQgNDh2MzIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yLjM3NiAtMi4zNzYpIHNjYWxlKC4yMjQ2MikiLz48cGF0aCBzdHlsZT0ib3BhY2l0eTouNzU7ZmlsbDpub25lO3N0cm9rZTojMDAwO3N0cm9rZS13aWR0aDo0O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiBkPSJNNzIgMTZ2OTYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yLjM3NiAtMi4zNzYpIHNjYWxlKC4yMjQ2MikiLz48cGF0aCBzdHlsZT0ib3BhY2l0eTouNTtmaWxsOm5vbmU7c3Ryb2tlOiMwMDA7c3Ryb2tlLXdpZHRoOjQ7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjEiIGQ9Ik04OCAzMnY2NCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIuMzc2IC0yLjM3Nikgc2NhbGUoLjIyNDYyKSIvPjxwYXRoIHN0eWxlPSJvcGFjaXR5Oi4yNTtmaWxsOm5vbmU7c3Ryb2tlOiMwMDA7c3Ryb2tlLXdpZHRoOjQ7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjEiIGQ9Ik0xMDQgNDh2MzIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yLjM3NiAtMi4zNzYpIHNjYWxlKC4yMjQ2MikiLz48L3N2Zz4="},"./node_modules/url-loader/dist/cjs.js!./src/addons/addons/onion-skinning/toggle.svg":function(e,t,o){"use strict";o.r(t),t.default="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PGcgc3Ryb2tlLXdpZHRoPSIxLjIiIHN0cm9rZT0iIzAwMTAyNiI+PGcgc3R5bGU9Im9wYWNpdHk6LjU7c3Ryb2tlLXdpZHRoOjQ7c3Ryb2tlLW1pdGVybGltaXQ6MTA7c3Ryb2tlLWRhc2hhcnJheTpub25lIj48cGF0aCBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6bm9ybWFsO2ZpbGw6bm9uZTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2Utd2lkdGg6NDtzdHJva2UtbWl0ZXJsaW1pdDoxMDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLWRhc2hvZmZzZXQ6MCIgZmlsbD0iI2JmYmZiZiIgZD0iTTY4LjQ1IDMyLjQ1N2MuMy0uMi44LS4xLjkuM2wyLjYgMTAuN3M2LjQgNC43IDguMyA4YzMuMiA1LjUgMy4zIDEwIDMuMyAxMHM3LjEgMi4xIDguMyA3LjhjMS4yIDUuNy0zLjIgMTYuNS0yMiAyMC4yLTE4LjggMy43LTMzLjktMS40LTQxLTEyLjgtNy4xLTExLjQgNC4xLTI1IDMuNS0yNC4ybC0yLjEtMTcuOWMtLjEtLjQuNC0uNy44LS41bDEyLjEgNy45czQuNS0xLjcgOS4yLTEuOWMyLjgtLjIgNS4yIDAgNy41LjR6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNC42NTIgLTQuNjUpIHNjYWxlKC4yMzI5KSIvPjxwYXRoIHN0eWxlPSJtaXgtYmxlbmQtbW9kZTpub3JtYWw7ZmlsbDpub25lO2ZpbGwtcnVsZTpldmVub2RkO3N0cm9rZS13aWR0aDo0O3N0cm9rZS1taXRlcmxpbWl0OjEwO3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2UtZGFzaG9mZnNldDowIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGZpbGw9Im5vbmUiIGQ9Ik0xMDEuNjUgNjIuOTU3Yy00LjcgMy44LTExLjkgMy45LTExLjkgMy45bTEwLjYgNy4zYy02LjMuNS0xMC4yLTEuNC0xMC4yLTEuNG0tNjguOC0xMC4xczguNiAyLjggMTIuMSA1LjltLjMgMy41Yy00LjMgMS43LTExLjcuNi0xMS43LjYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC00LjY1MiAtNC42NSkgc2NhbGUoLjIzMjkpIi8+PC9nPjxnIHN0eWxlPSJvcGFjaXR5Oi43NTtzdHJva2Utd2lkdGg6NDtzdHJva2UtbWl0ZXJsaW1pdDoxMDtzdHJva2UtZGFzaGFycmF5Om5vbmUiPjxwYXRoIHN0eWxlPSJtaXgtYmxlbmQtbW9kZTpub3JtYWw7ZmlsbDpub25lO2ZpbGwtcnVsZTpldmVub2RkO3N0cm9rZS13aWR0aDo0O3N0cm9rZS1taXRlcmxpbWl0OjEwO3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2UtZGFzaG9mZnNldDowIiBmaWxsPSIjYmZiZmJmIiBkPSJNNjguNDUgMzIuNDU3Yy4zLS4yLjgtLjEuOS4zbDIuNiAxMC43czYuNCA0LjcgOC4zIDhjMy4yIDUuNSAzLjMgMTAgMy4zIDEwczcuMSAyLjEgOC4zIDcuOGMxLjIgNS43LTMuMiAxNi41LTIyIDIwLjItMTguOCAzLjctMzMuOS0xLjQtNDEtMTIuOC03LjEtMTEuNCA0LjEtMjUgMy41LTI0LjJsLTIuMS0xNy45Yy0uMS0uNC40LS43LjgtLjVsMTIuMSA3LjlzNC41LTEuNyA5LjItMS45YzIuOC0uMiA1LjIgMCA3LjUuNHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yLjMyMyAtMi4zMjEpIHNjYWxlKC4yMzI5KSIvPjxwYXRoIHN0eWxlPSJtaXgtYmxlbmQtbW9kZTpub3JtYWw7ZmlsbDpub25lO2ZpbGwtcnVsZTpldmVub2RkO3N0cm9rZS13aWR0aDo0O3N0cm9rZS1taXRlcmxpbWl0OjEwO3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2UtZGFzaG9mZnNldDowIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGZpbGw9Im5vbmUiIGQ9Ik0xMDEuNjUgNjIuOTU3Yy00LjcgMy44LTExLjkgMy45LTExLjkgMy45bTEwLjYgNy4zYy02LjMuNS0xMC4yLTEuNC0xMC4yLTEuNG0tNjguOC0xMC4xczguNiAyLjggMTIuMSA1LjltLjMgMy41Yy00LjMgMS43LTExLjcuNi0xMS43LjYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yLjMyMyAtMi4zMjEpIHNjYWxlKC4yMzI5KSIvPjwvZz48ZyBzdHlsZT0ic3Ryb2tlLXdpZHRoOjQ7c3Ryb2tlLW1pdGVybGltaXQ6MTA7c3Ryb2tlLWRhc2hhcnJheTpub25lIj48cGF0aCBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6bm9ybWFsO2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2Utd2lkdGg6NDtzdHJva2UtbWl0ZXJsaW1pdDoxMDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLWRhc2hvZmZzZXQ6MCIgZmlsbD0iI2JmYmZiZiIgZD0iTTczLjQ1IDM3LjQ1N2MuMy0uMi44LS4xLjkuM2wyLjYgMTAuN3M2LjQgNC43IDguMyA4YzMuMiA1LjUgMy4zIDEwIDMuMyAxMHM3LjEgMi4xIDguMyA3LjhjMS4yIDUuNy0zLjIgMTYuNS0yMiAyMC4yLTE4LjggMy43LTMzLjktMS40LTQxLTEyLjgtNy4xLTExLjQgNC4xLTI1IDMuNS0yNC4ybC0yLjEtMTcuOWMtLjEtLjQuNC0uNy44LS41bDEyLjEgNy45czQuNS0xLjcgOS4yLTEuOWMyLjgtLjIgNS4yIDAgNy41LjR6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMS4xNTkgLTEuMTU3KSBzY2FsZSguMjMyOSkiLz48cGF0aCBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6bm9ybWFsO2ZpbGw6bm9uZTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2Utd2lkdGg6NDtzdHJva2UtbWl0ZXJsaW1pdDoxMDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLWRhc2hvZmZzZXQ6MCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBmaWxsPSJub25lIiBkPSJNMTA2LjY1IDY3Ljk1N2MtNC43IDMuOC0xMS45IDMuOS0xMS45IDMuOW0xMC42IDcuM2MtNi4zLjUtMTAuMi0xLjQtMTAuMi0xLjRtLTY4LjgtMTAuMXM4LjYgMi44IDEyLjEgNS45bS4zIDMuNWMtNC4zIDEuNy0xMS43LjYtMTEuNy42IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMS4xNTkgLTEuMTU3KSBzY2FsZSguMjMyOSkiLz48L2c+PC9nPjwvc3ZnPg=="},"./src/addons/addons/bitmap-copy/_runtime_entry.js":function(e,t,o){"use strict";o.r(t),o.d(t,"resources",(function(){return n}));const n={"userscript.js":o("./src/addons/addons/bitmap-copy/userscript.js").default}},"./src/addons/addons/bitmap-copy/userscript.js":function(e,t,o){"use strict";o.r(t),t.default=async e=>{let{addon:t,console:o}=e;if(!t.tab.redux.state)return o.warn("Redux is not available!");t.tab.redux.initialize(),t.tab.redux.addEventListener("statechanged",e=>{let{detail:n}=e;if(t.self.disabled)return;const s=n;if(!s.action||"scratch-paint/clipboard/SET"!==s.action.type)return;const r=s.next.scratchPaint.clipboard.items;if(1!==r.length)return;const a=r[0];if(!Array.isArray(a)||"Raster"!==a[0])return o.log("copied element is vector");const i=a[1].source;t.tab.copyImage(i).then(()=>o.log("Image successfully copied")).catch(e=>o.error("Image could not be copied: ".concat(e)))})}},"./src/addons/addons/block-cherry-picking/_runtime_entry.js":function(e,t,o){"use strict";o.r(t),o.d(t,"resources",(function(){return n}));const n={"userscript.js":o("./src/addons/addons/block-cherry-picking/userscript.js").default}},"./src/addons/addons/block-cherry-picking/userscript.js":function(e,t,o){"use strict";o.r(t);var n=o("./src/addons/addons/block-duplicate/module.js");t.default=async function(e){let{addon:t,console:o}=e;const s=()=>{n.setCherryPicking(!t.self.disabled,t.settings.get("invertDrag"))};t.self.addEventListener("disabled",s),t.self.addEventListener("reenabled",s),t.settings.addEventListener("change",s),s(),n.load(t)}},"./src/addons/addons/block-duplicate/_runtime_entry.js":function(e,t,o){"use strict";o.r(t),o.d(t,"resources",(function(){return n}));const n={"userscript.js":o("./src/addons/addons/block-duplicate/userscript.js").default}},"./src/addons/addons/block-duplicate/module.js":function(e,t,o){"use strict";o.r(t),o.d(t,"setCherryPicking",(function(){return r})),o.d(t,"setDuplication",(function(){return i})),o.d(t,"load",(function(){return u}));let n=!1,s=!1;function r(e,t){n=e,s=e&&t}let a=!1;function i(e){a=e}let c=!1,d=!1;document.addEventListener("mousedown",(function(e){c=e.ctrlKey||e.metaKey,d=e.altKey}),{capture:!0});let l=!1;async function u(e){if(l)return;l=!0;const t=await e.tab.traps.getBlockly(),o=t.Gesture.prototype.startDraggingBlock_;t.Gesture.prototype.startDraggingBlock_=function(){let e=this.targetBlock_;const r=!(this.mostRecentEvent_ instanceof MouseEvent),i=a&&d&&!r&&!this.flyout_&&!this.shouldDuplicateOnDrag_&&"procedures_definition"!==this.targetBlock_.type,l=s&&!r&&e.getParent(),u=n||i,p=u&&c===!l&&!e.isShadow();if((i||p)&&(t.Events.getGroup()||t.Events.setGroup(!0)),i){let o;this.startWorkspace_.setResizesEnabled(!1),t.Events.disable();try{const n=t.Xml.blockToDom(e);o=t.Xml.domToBlock(n,this.startWorkspace_),t.scratchBlocksUtils.changeObscuredShadowIds(o);const s=e.getRelativeToSurfaceXY();o.moveBy(s.x,s.y)}catch(e){console.error(e)}t.Events.enable(),o&&(e=o,this.targetBlock_=o,t.Events.isEnabled()&&t.Events.fire(new t.Events.BlockCreate(o)))}if(p){if(r||i){const t=e.getNextBlock();t&&t.dispose()}e.unplug(!0)}for(var h=arguments.length,f=new Array(h),m=0;m<h;m++)f[m]=arguments[m];return o.call(this,...f)}}},"./src/addons/addons/block-duplicate/userscript.js":function(e,t,o){"use strict";o.r(t);var n=o("./src/addons/addons/block-duplicate/module.js");t.default=async function(e){let{addon:t,console:o}=e;const s=()=>{n.setDuplication(!t.self.disabled)};t.self.addEventListener("disabled",s),t.self.addEventListener("reenabled",s),s(),n.load(t)}},"./src/addons/addons/block-switching/_runtime_entry.js":function(e,t,o){"use strict";o.r(t),o.d(t,"resources",(function(){return n}));const n={"userscript.js":o("./src/addons/addons/block-switching/userscript.js").default}},"./src/addons/addons/block-switching/userscript.js":function(e,t,o){"use strict";o.r(t),t.default=async function(e){let{addon:t,console:o,msg:n}=e;const s=await t.tab.traps.getBlockly(),r=t.tab.traps.vm;let a={},i={};const c={isNoop:!0},d=()=>{const e=Math.floor(256*Math.random()*256*256);return"#".concat(e.toString(16).padStart(6,"0"))},l=()=>{if(a={},i={},t.settings.get("motion")&&(a.motion_turnright=[c,{opcode:"motion_turnleft"}],a.motion_turnleft=[{opcode:"motion_turnright"},c],a.motion_setx=[c,{opcode:"motion_changexby",remapInputName:{X:"DX"}},{opcode:"motion_sety",remapInputName:{X:"Y"}},{opcode:"motion_changeyby",remapInputName:{X:"DY"}}],a.motion_changexby=[{opcode:"motion_setx",remapInputName:{DX:"X"}},c,{opcode:"motion_sety",remapInputName:{DX:"Y"}},{opcode:"motion_changeyby",remapInputName:{DX:"DY"}}],a.motion_sety=[{opcode:"motion_setx",remapInputName:{Y:"X"}},{opcode:"motion_changexby",remapInputName:{Y:"DX"}},c,{opcode:"motion_changeyby",remapInputName:{Y:"DY"}}],a.motion_changeyby=[{opcode:"motion_setx",remapInputName:{DY:"X"}},{opcode:"motion_changexby",remapInputName:{DY:"DX"}},{opcode:"motion_sety",remapInputName:{DY:"Y"}},c],a.motion_xposition=[c,{opcode:"motion_yposition"}],a.motion_yposition=[{opcode:"motion_xposition"},c]),t.settings.get("looks")&&(a.looks_seteffectto=[c,{opcode:"looks_changeeffectby",remapInputName:{VALUE:"CHANGE"}}],a.looks_changeeffectby=[{opcode:"looks_seteffectto",remapInputName:{CHANGE:"VALUE"}},c],a.looks_setsizeto=[c,{opcode:"looks_changesizeby",remapInputName:{SIZE:"CHANGE"}}],a.looks_changesizeby=[{opcode:"looks_setsizeto",remapInputName:{CHANGE:"SIZE"}},c],a.looks_costumenumbername=[c,{opcode:"looks_backdropnumbername"}],a.looks_backdropnumbername=[{opcode:"looks_costumenumbername"},c],a.looks_show=[c,{opcode:"looks_hide"}],a.looks_hide=[{opcode:"looks_show"},c],a.looks_nextcostume=[c,{opcode:"looks_nextbackdrop"}],a.looks_nextbackdrop=[{opcode:"looks_nextcostume"},c],a.looks_say=[c,{opcode:"looks_sayforsecs",createInputs:{SECS:{shadowType:"math_number",value:"2"}}},{opcode:"looks_think"},{opcode:"looks_thinkforsecs",createInputs:{SECS:{shadowType:"math_number",value:"2"}}}],a.looks_think=[{opcode:"looks_say"},{opcode:"looks_sayforsecs",createInputs:{SECS:{shadowType:"math_number",value:"2"}}},c,{opcode:"looks_thinkforsecs",createInputs:{SECS:{shadowType:"math_number",value:"2"}}}],a.looks_sayforsecs=[{opcode:"looks_say",splitInputs:["SECS"]},{opcode:"looks_think",splitInputs:["SECS"]},c,{opcode:"looks_thinkforsecs"}],a.looks_thinkforsecs=[{opcode:"looks_say",splitInputs:["SECS"]},{opcode:"looks_think",splitInputs:["SECS"]},{opcode:"looks_sayforsecs"},c],a.looks_switchbackdropto=[c,{opcode:"looks_switchbackdroptoandwait"}],a.looks_switchbackdroptoandwait=[{opcode:"looks_switchbackdropto"},c],a.looks_gotofrontback=[c,{opcode:"looks_goforwardbackwardlayers",remapInputName:{FRONT_BACK:"FORWARD_BACKWARD"},mapFieldValues:{FRONT_BACK:{front:"forward",back:"backward"}},createInputs:{NUM:{shadowType:"math_integer",value:"1"}}}],a.looks_goforwardbackwardlayers=[{opcode:"looks_gotofrontback",splitInputs:["NUM"],remapInputName:{FORWARD_BACKWARD:"FRONT_BACK"},mapFieldValues:{FORWARD_BACKWARD:{forward:"front",backward:"back"}}},c]),t.settings.get("sound")&&(a.sound_play=[c,{opcode:"sound_playuntildone"}],a.sound_playuntildone=[{opcode:"sound_play"},c],a.sound_seteffectto=[c,{opcode:"sound_changeeffectby"}],a.sound_changeeffectby=[{opcode:"sound_seteffectto"},c],a.sound_setvolumeto=[c,{opcode:"sound_changevolumeby"}],a.sound_changevolumeby=[{opcode:"sound_setvolumeto"},c]),t.settings.get("event")&&(a.event_broadcast=[c,{opcode:"event_broadcastandwait"}],a.event_broadcastandwait=[{opcode:"event_broadcast"},c]),t.settings.get("control")&&(a.control_if=[c,{opcode:"control_if_else"}],a.control_if_else=[{opcode:"control_if",splitInputs:["SUBSTACK2"]},c],a.control_repeat_until=[c,{opcode:"control_wait_until",splitInputs:["SUBSTACK"]},{opcode:"control_forever",splitInputs:["CONDITION"]}],a.control_forever=[{opcode:"control_repeat_until"},c],a.control_wait_until=[{opcode:"control_repeat_until"},c]),t.settings.get("operator")&&(a.operator_equals=[{opcode:"operator_gt"},c,{opcode:"operator_lt"}],a.operator_gt=[c,{opcode:"operator_equals"},{opcode:"operator_lt"}],a.operator_lt=[{opcode:"operator_gt"},{opcode:"operator_equals"},c],a.operator_add=[c,{opcode:"operator_subtract"},{opcode:"operator_multiply"},{opcode:"operator_divide"},{opcode:"operator_mod"}],a.operator_subtract=[{opcode:"operator_add"},c,{opcode:"operator_multiply"},{opcode:"operator_divide"},{opcode:"operator_mod"}],a.operator_multiply=[{opcode:"operator_add"},{opcode:"operator_subtract"},c,{opcode:"operator_divide"},{opcode:"operator_mod"}],a.operator_divide=[{opcode:"operator_add"},{opcode:"operator_subtract"},{opcode:"operator_multiply"},c,{opcode:"operator_mod"}],a.operator_mod=[{opcode:"operator_add"},{opcode:"operator_subtract"},{opcode:"operator_multiply"},{opcode:"operator_divide"},c],a.operator_and=[c,{opcode:"operator_or"}],a.operator_or=[{opcode:"operator_and"},c]),t.settings.get("sensing")&&(a.sensing_mousex=[c,{opcode:"sensing_mousey"}],a.sensing_mousey=[{opcode:"sensing_mousex"},c],a.sensing_touchingcolor=[c,{opcode:"sensing_coloristouchingcolor",createInputs:{COLOR2:{shadowType:"colour_picker",value:d}}}],a.sensing_coloristouchingcolor=[{opcode:"sensing_touchingcolor",splitInputs:["COLOR2"]},c]),t.settings.get("data")&&(a.data_setvariableto=[c,{opcode:"data_changevariableby",remapShadowType:{VALUE:"math_number"}}],a.data_changevariableby=[{opcode:"data_setvariableto",remapShadowType:{VALUE:"text"}},c],a.data_showvariable=[c,{opcode:"data_hidevariable"}],a.data_hidevariable=[{opcode:"data_showvariable"},c],a.data_showlist=[c,{opcode:"data_hidelist"}],a.data_hidelist=[{opcode:"data_showlist"},c],a.data_replaceitemoflist=[c,{opcode:"data_insertatlist"}],a.data_insertatlist=[{opcode:"data_replaceitemoflist"},c],a.data_deleteoflist=[c,{opcode:"data_deletealloflist",splitInputs:["INDEX"]}],a.data_deletealloflist=[{opcode:"data_deleteoflist",createInputs:{INDEX:{shadowType:"math_integer",value:"1"}}},c]),t.settings.get("extension")&&(a.pen_penDown=[c,{opcode:"pen_penUp"}],a.pen_penUp=[{opcode:"pen_penDown"},c],a.pen_setPenColorParamTo=[c,{opcode:"pen_changePenColorParamBy"}],a.pen_changePenColorParamBy=[{opcode:"pen_setPenColorParamTo"},c],a.pen_setPenHueToNumber=[c,{opcode:"pen_changePenHueBy"}],a.pen_changePenHueBy=[{opcode:"pen_setPenHueToNumber"},c],a.pen_setPenShadeToNumber=[c,{opcode:"pen_changePenShadeBy"}],a.pen_changePenShadeBy=[{opcode:"pen_setPenShadeToNumber"},c],a.pen_setPenSizeTo=[c,{opcode:"pen_changePenSizeBy"}],a.pen_changePenSizeBy=[{opcode:"pen_setPenSizeTo"},c],a.music_setTempo=[c,{opcode:"music_changeTempo"}],a.music_changeTempo=[{opcode:"music_setTempo"},c]),t.settings.get("sa")){const e="​​log​​ %s",t="​​warn​​ %s",o="​​error​​ %s",s=n("debugger_log"),r=n("debugger_warn"),a=n("debugger_error"),c={mutate:{proccode:e},msg:s},d={mutate:{proccode:t},msg:r},l={mutate:{proccode:o},msg:a};i[e]=[{msg:s,isNoop:!0},d,l],i[t]=[c,{msg:r,isNoop:!0},l],i[o]=[c,d,{msg:a,isNoop:!0}]}a.data_variable=[],a.data_listcontents=[]};l(),t.settings.addEventListener("change",l);const u=e=>"text"===e?"TEXT":"colour_picker"===e?"COLOUR":"NUM",p=(e,t)=>()=>{var o;if(!t.isNoop)if(t.fieldValue)e.setFieldValue(t.fieldValue,"VALUE");else try{s.Events.setGroup(!0);const n=e.workspace,r=[];if(t.splitInputs)for(const o of t.splitInputs){const t=e.getInput(o);if(!t)continue;const n=t.connection;if(n&&n.isConnected()){const e=n.targetBlock();e.isShadow()||(n.disconnect(),r.push(e))}}const a=s.Xml.blockToDom(e),i=e.getRelativeToSurfaceXY();a.setAttribute("x",i.x),a.setAttribute("y",i.y),t.opcode&&a.setAttribute("type",t.opcode);const c=e.getParent();let d,l;if(c){d=c.getConnections_().find(t=>t.targetConnection&&t.targetConnection.sourceBlock_===e);const t=e.getConnections_().find(e=>e.targetConnection&&e.targetConnection.sourceBlock_===c);l=t.type}for(const e of Array.from(a.children)){const o=e.getAttribute("name");if(t.splitInputs&&t.splitInputs.includes(o)){a.removeChild(e);continue}const n=t.remapInputName&&t.remapInputName[o];n&&e.setAttribute("name",n);const s=t.remapShadowType&&t.remapShadowType[o];if(s){const t=e.firstChild,o=t.firstChild;t.setAttribute("type",s),o.setAttribute("name",u(s))}const r=t.mapFieldValues&&t.mapFieldValues[o];if(r&&"FIELD"===e.tagName){const t=r[e.innerText];"string"==typeof t&&(e.innerText=t)}}if(t.mutate){const e=a.querySelector("mutation");for(const[o,n]of Object.entries(t.mutate))e.setAttribute(o,n)}if(t.createInputs)for(const[e,n]of Object.entries(t.createInputs)){const t=document.createElement("value");t.setAttribute("name",e);const s=document.createElement("shadow");s.setAttribute("type",n.shadowType);const r=document.createElement("field");r.setAttribute("name",u(n.shadowType)),r.innerText="function"==typeof(o=n.value)?o():o,s.appendChild(r),t.appendChild(s),a.appendChild(t)}e.dispose();const p=((e,t)=>{const o=s.Xml.domToBlock(t,e),n=+t.getAttribute("x"),r=+t.getAttribute("y");return o.moveBy(n,r),o})(n,a);d&&p.getConnections_().find(e=>e.type===l).connect(d);for(const e of r){const t=e.getSvgRoot();t.parentNode.appendChild(t)}}finally{s.Events.setGroup(!1)}};t.tab.createBlockContextMenu((e,o)=>{if(!t.self.disabled){const c=o.type;let d=a[o.type]||[];const l=t.settings.get("customargs")?t.settings.get("customargsmode"):"off";if("off"!==l&&["argument_reporter_boolean","argument_reporter_string_number"].includes(c)&&!o.isShadow()){const t=h();if("all"===l)switch(c){case"argument_reporter_string_number":d=Object.values(t).map(e=>e.stringArgs).flat(1);break;case"argument_reporter_boolean":d=Object.values(t).map(e=>e.boolArgs).flat(1)}else if("defOnly"===l){const n=o.getRootBlock();if("procedures_definition"!==n.type)return e;const s=t[n.getChildren(!0)[0].getProcCode()];switch(c){case"argument_reporter_string_number":d=s.stringArgs;break;case"argument_reporter_boolean":d=s.boolArgs}}const n=o.getFieldValue("VALUE");d=(r=d,[...new Set(r)]).map(e=>({isNoop:e===n,fieldValue:e,msg:e}))}if("procedures_call"===o.type){const e=o.getProcCode();i[e]&&(d=i[e])}if(t.settings.get("noop")||(d=d.filter(e=>!e.isNoop)),d.forEach((t,s)=>{const r=e.findIndex(e=>e._isDevtoolsFirstItem),a=-1!==r?r:e.length,i=t.msg?t.msg:t.opcode?n(t.opcode):n(o.type);e.splice(a,0,{enabled:!0,text:i,callback:p(o,t),separator:0===s})}),"data_variable"===o.type||"data_listcontents"===o.type){const t=e.findIndex(e=>e.text===s.Msg.DELETE_BLOCK),o=e[t+1];o&&(o.separator=!0)}}var r;return e},{blocks:!0});const h=()=>{const e={},t=r.editingTarget;return Object.values(t.blocks._blocks).filter(e=>"procedures_prototype"===e.opcode).forEach(t=>{const o=t.mutation.proccode,n=JSON.parse(t.mutation.argumentnames),s=o.split(/(?=[^\\]%[nbs])/g).map(e=>e.trim()).filter(e=>"%"===e.charAt(0)).map(e=>e.substring(0,2)),r=[],a=[];for(let e=0;e<n.length;e++)"%b"===s[e]?a.push(n[e]):r.push(n[e]);e[o]={stringArgs:r,boolArgs:a}}),e}}},"./src/addons/addons/color-picker/_runtime_entry.js":function(e,t,o){"use strict";o.r(t),o.d(t,"resources",(function(){return a}));var n=o("./src/addons/addons/color-picker/userscript.js"),s=o("./node_modules/css-loader/index.js!./src/addons/addons/color-picker/style.css"),r=o.n(s);const a={"userscript.js":n.default,"style.css":r.a}},"./src/addons/addons/color-picker/code-editor.js":function(e,t,o){"use strict";o.r(t);var n=o("./src/addons/libraries/common/cs/normalize-color.js"),s=o("./src/addons/libraries/common/cs/rate-limiter.js"),r=o("./src/addons/libraries/thirdparty/cs/tinycolor-min.js");t.default=async e=>{let{addon:t,console:o,msg:a}=e;const i=new s.default(250),c=(e,o)=>{if(e=Object(n.normalizeHex)(e),!t.tab.redux.state||!t.tab.redux.state.scratchGui)return;const s=e=>{let{detail:o}=e;"scratch-gui/color-picker/DEACTIVATE_COLOR_PICKER"===o.action.type&&(t.tab.redux.removeEventListener("statechanged",s),setTimeout(()=>{document.body.classList.remove("sa-hide-eye-dropper-background")},50))},r=o=>{let{detail:n}=o;"scratch-gui/color-picker/ACTIVATE_COLOR_PICKER"===n.action.type&&(t.tab.redux.removeEventListener("statechanged",r),t.tab.redux.addEventListener("statechanged",s),setTimeout(()=>{t.tab.redux.dispatch({type:"scratch-gui/color-picker/DEACTIVATE_COLOR_PICKER",color:e})},50))};t.tab.redux.addEventListener("statechanged",r),document.body.classList.add("sa-hide-eye-dropper-background"),o.click()},d=()=>{const e=document.querySelector("button.scratchEyedropper");i.abort(!1),t.tab.redux.initialize();const o=(e=>{const{children:t}=e.parentElement,o=t[1].getAttribute("aria-valuenow"),n=t[3].getAttribute("aria-valuenow"),s=t[5].getAttribute("aria-valuenow"),a=Number(s)/255;return Object(r.default)("hsv(".concat(o,", ").concat(n,", ").concat(a||0,")")).toHexString()})(e),s=Object.assign(document.createElement("div"),{className:"sa-color-picker sa-color-picker-code"});t.tab.displayNoneWhileDisabled(s,{display:"flex"});const d=Object.assign(document.createElement("input"),{className:"sa-color-picker-color sa-color-picker-code-color",type:"color",value:o||"#000000"}),l=Object.assign(document.createElement("input"),{className:t.tab.scratchClass("input_input-form",{others:"sa-color-picker-text sa-color-picker-code-text"}),type:"text",pattern:"^#?([0-9a-fA-F]{3}){1,2}$",placeholder:a("hex"),value:o||""});d.addEventListener("input",()=>i.limit(()=>c(l.value=d.value,e))),l.addEventListener("change",()=>{const{value:t}=l;Object(n.getHexRegex)().test(t)&&c(d.value=Object(n.normalizeHex)(t),e)}),s.appendChild(d),s.appendChild(l),e.parentElement.insertBefore(s,e)},l=await t.tab.traps.getBlockly(),u=l.FieldColourSlider.prototype.showEditor_;l.FieldColourSlider.prototype.showEditor_=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];const n=u.call(this,...t);return d(),n}}},"./src/addons/addons/color-picker/userscript.js":function(e,t,o){"use strict";o.r(t);var n=o("./src/addons/addons/color-picker/code-editor.js");t.default=async e=>{Object(n.default)(e)}},"./src/addons/addons/editor-comment-previews/_runtime_entry.js":function(e,t,o){"use strict";o.r(t),o.d(t,"resources",(function(){return a}));var n=o("./src/addons/addons/editor-comment-previews/userscript.js"),s=o("./node_modules/css-loader/index.js!./src/addons/addons/editor-comment-previews/userstyle.css"),r=o.n(s);const a={"userscript.js":n.default,"userstyle.css":r.a}},"./src/addons/addons/editor-comment-previews/userscript.js":function(e,t,o){"use strict";o.r(t),t.default=async function(e){let{addon:t,console:o}=e;const n=t.tab.traps.vm,s=()=>{u.classList.toggle("sa-comment-preview-delay","none"!==t.settings.get("delay")),u.classList.toggle("sa-comment-preview-reduce-transparency",t.settings.get("reduce-transparency")),u.classList.toggle("sa-comment-preview-fade",!t.settings.get("reduce-animation"))};let r=null,a=null,i=0,c=0,d=!1;const l=document.createElement("div");l.classList.add("sa-comment-preview-outer");const u=document.createElement("div");u.classList.add("sa-comment-preview-inner"),u.classList.add("sa-comment-preview-hidden"),s(),t.settings.addEventListener("change",s),l.appendChild(u),document.body.appendChild(l);const p=e=>n.editingTarget.blocks.getBlock(e)||n.runtime.flyoutBlocks.getBlock(e),h=e=>e&&e.comment&&n.editingTarget.comments[e.comment],f=()=>{l.style.transform="translate(".concat(i+8,"px, ").concat(c+8,"px)")},m=()=>{r&&(r=null,u.classList.add("sa-comment-preview-hidden"))};document.addEventListener("mouseover",e=>{if(t.self.disabled)return;if(clearTimeout(a),d)return;const o=e.target.closest(".blocklyBubbleCanvas > g, .blocklyBlockCanvas .blocklyDraggable[data-id]");if(o===r)return;if(!o)return void m();let s=null;if(t.settings.get("hover-view")&&e.target.closest(".blocklyBubbleCanvas > g")&&!e.target.closest("line")){if("none"!==o.querySelector("text.scratchCommentText").getAttribute("display")){const e=o.querySelector("textarea");s=e.value}}else if(e.target.closest(".blocklyBlockCanvas .blocklyDraggable[data-id]")){const e=o.dataset.id,r=p(e),a=h(r);if(t.settings.get("hover-view-block")&&a)s=a.text;else if(r&&"procedures_call"===r.opcode&&t.settings.get("hover-view-procedure")){const e=(e=>{const t=Object.values(n.editingTarget.blocks._blocks).find(t=>"procedures_prototype"===t.opcode&&t.mutation.proccode===e);if(t){if(t.parent)return p(t.parent);const e=t.id;return Object.values(n.editingTarget.blocks._blocks).find(t=>"procedures_definition"===t.opcode&&t.inputs.custom_block&&t.inputs.custom_block.block===e)}return null})(r.mutation.proccode),t=h(e);t&&(s=t.text)}}null!==s&&""!==s.trim()?a=(e=>{if(!u.classList.contains("sa-comment-preview-hidden"))return void e();const o=t.settings.get("delay");return"long"===o?setTimeout(e,500):"short"===o?setTimeout(e,300):void e()})(()=>{r=o,(e=>{u.innerText=e,u.classList.remove("sa-comment-preview-hidden"),f()})(s)}):m()}),document.addEventListener("mousemove",e=>{i=e.clientX,c=e.clientY,d=!1,t.settings.get("follow-mouse")&&!u.classList.contains("sa-comment-preview-hidden")&&f()}),document.addEventListener("mousedown",()=>{m(),d=!0},{capture:!0})}},"./src/addons/addons/editor-devtools/DevTools.js":function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return r}));var n=o("./src/addons/addons/editor-devtools/DomHelpers.js"),s=o("./src/addons/addons/editor-devtools/UndoGroup.js");class r{constructor(e,t,o){this.addon=e,this.msg=t,this.m=o,this.domHelpers=new n.default(e),this.codeTab=null,this.costTab=null,this.costTabBody=null,this.selVarID=null,this.canShare=!1,this.mouseXY={x:0,y:0}}async init(){for(this.addContextMenus();;){const e=await this.addon.tab.waitForElement("ul[class*=gui_tab-list_]",{markAsSeen:!0,reduxEvents:["scratch-gui/mode/SET_PLAYER","fontsLoaded/SET_FONTS_LOADED","scratch-gui/locales/SELECT_LOCALE"],reduxCondition:e=>!e.scratchGui.mode.isPlayerOnly});this.initInner(e)}}async addContextMenus(){const e=await this.addon.tab.traps.getBlockly(),t=e.WorkspaceSvg.prototype.cleanUp,o=this;e.WorkspaceSvg.prototype.cleanUp=function(){o.addon.settings.get("enableCleanUpPlus")?o.doCleanUp():t.call(this)};let n=e.Msg.CLEAN_UP;this.addon.settings.get("enableCleanUpPlus")&&(e.Msg.CLEAN_UP=this.m("clean-plus")),this.addon.settings.addEventListener("change",()=>{this.addon.settings.get("enableCleanUpPlus")?e.Msg.CLEAN_UP=this.m("clean-plus"):e.Msg.CLEAN_UP=n}),this.addon.tab.createBlockContextMenu((t,o)=>(t.push({enabled:e.clipboardXml_,text:this.m("paste"),separator:!0,_isDevtoolsFirstItem:!0,callback:()=>{let e=this.getTopBlockIDs();document.dispatchEvent(new KeyboardEvent("keydown",{keyCode:86,ctrlKey:!0,griff:!0})),setTimeout(()=>{this.beginDragOfNewBlocksNotInIDs(e)},10)}}),t),{workspace:!0}),this.addon.tab.createBlockContextMenu((e,t)=>(e.push({enabled:!0,text:this.m("make-space"),_isDevtoolsFirstItem:!0,callback:()=>{this.doCleanUp(t)},separator:!0},{enabled:!0,text:this.m("copy-all"),callback:()=>{this.eventCopyClick(t)},separator:!0},{enabled:!0,text:this.m("copy-block"),callback:()=>{this.eventCopyClick(t,1)}},{enabled:!0,text:this.m("cut-block"),callback:()=>{this.eventCopyClick(t,2)}}),e),{blocks:!0}),this.addon.tab.createBlockContextMenu((e,t)=>("data"!==t.getCategory()&&"data-lists"!==t.getCategory()||(this.selVarID=t.getVars()[0],e.push({enabled:!0,text:this.m("swap",{var:"data"===t.getCategory()?this.m("variables"):this.m("lists")}),callback:()=>{let e=this.getWorkspace().getVariableById(this.selVarID),t=window.prompt(this.msg("replace",{name:e.name}));t&&this.doReplaceVariable(this.selVarID,t,e.type)},separator:!0})),e),{blocks:!0,flyout:!0})}getWorkspace(){return Blockly.getMainWorkspace()}isCostumeEditor(){return this.costTab.className.indexOf("gui_is-selected")>=0}getTopBlocks(){let e=this.getOrderedTopBlockColumns().cols,t=[];for(const o of e)t=t.concat(o.blocks);return t}doCleanUp(e){let t=this.getWorkspace(),o=e&&e.getRootBlock();s.default.startUndoGroup(t);let n=this.getOrderedTopBlockColumns(!0),r=n.cols,a=n.orphans.blocks.length;if(a>0&&!e){let e=this.msg("orphaned",{count:a});if(confirm(e))for(const e of n.orphans.blocks)e.dispose();else r.unshift(n.orphans)}let i=48,c=n.maxWidths;for(const e of r){let t=64,n=0;for(const s of e.blocks){let e=s===o?380:0,r=s===o?480:72,a=s.getRelativeToSurfaceXY();i-a.x==0&&t-a.y==0||s.moveBy(i-a.x,t-a.y);let d=s.getHeightWidth();t+=d.height+r;let l=c[s.id]||0;n=Math.max(n,Math.max(d.width+e,l))}i+=n+96}let d=t.getTopComments();for(const e of d)e.setVisible&&(e.setVisible(!1),e.needsAutoPositioning_=!0,e.setVisible(!0));setTimeout(()=>{let e=this.getWorkspace(),t=e.getVariableMap(),o=t.getVariablesOfType(""),n=[];for(const e of o)if(e.isLocal){let o=t.getVariableUsesById(e.getId());o&&0!==o.length||n.push(e)}if(n.length>0){const t=n.length;let o=this.msg("unused-var",{count:t});for(let e=0;e<n.length;e++){let t=n[e];e>0&&(o+=", "),o+=t.name}if(confirm(o))for(const t of n)e.deleteVariableById(t.getId())}let r=t.getVariablesOfType("list"),a=[];for(const e of r)if(e.isLocal){let o=t.getVariableUsesById(e.getId());o&&0!==o.length||a.push(e)}if(a.length>0){const t=a.length;let o=this.msg("unused-list",{count:t});for(let e=0;e<a.length;e++){let t=a[e];e>0&&(o+=", "),o+=t.name}if(confirm(o))for(const t of a)e.deleteVariableById(t.getId())}s.default.endUndoGroup(e)},100)}isBlockAnOrphan(e){return!!e.outputConnection}getOrderedTopBlockColumns(e){let t=this.getWorkspace(),o=t.getTopBlocks(),n={};if(e){let e=t.getTopComments();for(const t of e)if(t.setVisible){t.setVisible(!1),t.needsAutoPositioning_=!0,t.setVisible(!0);let e=t.getBoundingRectangle().bottomRight.x,o=t.block_.getRootBlock(),s=o.getBoundingRectangle().topLeft.x;n[o.id]=Math.max(e-s,n[o.id]||0)}}let s=[],r={x:-999999,count:0,blocks:[]};for(const t of o){let o=t.getRelativeToSurfaceXY(),n=null,i=256;if(e&&this.isBlockAnOrphan(t))r.blocks.push(t);else{for(const e of s){let t=Math.abs(o.x-e.x);t<i&&(i=t,n=e)}n?(n.x=(n.x*n.count+o.x)/++n.count,n.blocks.push(t)):s.push(new a(o.x,1,[t]))}}s.sort((e,t)=>e.x-t.x);for(const e of s)e.blocks.sort((e,t)=>e.getRelativeToSurfaceXY().y-t.getRelativeToSurfaceXY().y);return{cols:s,orphans:r,maxWidths:n}}getVariableUsesById(e){let t=[],o=this.getTopBlocks(!0);for(const n of o){let o=n.getDescendants();for(const n of o){let o=n.getVarModels();if(o)for(const s of o)s.getId()===e&&t.push(n)}}return t}doReplaceVariable(e,t,o){let n=this.getWorkspace(),r=n.getVariable(t,o);if(!r)return void alert(this.msg("var-not-exist"));let a=r.getId();s.default.startUndoGroup(n);let i=this.getVariableUsesById(e);for(const e of i)try{""===o?e.getField("VARIABLE").setValue(a):e.getField("LIST").setValue(a)}catch(e){}s.default.endUndoGroup(n)}getTopBlockIDs(){let e=this.getWorkspace().getTopBlocks(),t=new Set;for(const o of e)t.add(o.id);return t}beginDragOfNewBlocksNotInIDs(e){if(!this.addon.settings.get("enablePasteBlocksAtMouse"))return;let t=this.getWorkspace().getTopBlocks();for(const o of t)if(!e.has(o.id)){let e={x:this.mouseXY.x,y:this.mouseXY.y};o.setIntersects(!0),this.domHelpers.triggerDragAndDrop(o.svgPath_,null,e)}}updateMousePosition(e){this.mouseXY.x=e.clientX,this.mouseXY.y=e.clientY}eventMouseMove(e){this.updateMousePosition(e)}eventKeyDown(e){const t=e=>{let t=this.costTabBody.querySelector("div[class*='sprite-selector-item_is-selected']"),o=e?t.parentNode.previousSibling:t.parentNode.nextSibling;if(o){let e=o.closest("div[class*=gui_flex-wrapper]");o.querySelector("div[class^='sprite-selector-item_sprite-name']").click(),o.scrollIntoView({behavior:"auto",block:"center",inline:"start"}),e.scrollTop=0}};if(document.URL.indexOf("editor")<=0)return;let o=e.ctrlKey||e.metaKey;if(37===e.keyCode&&o){if("INPUT"===document.activeElement.tagName)return;if(this.isCostumeEditor())return t(!0),e.cancelBubble=!0,e.preventDefault(),!0}if(39===e.keyCode&&o){if("INPUT"===document.activeElement.tagName)return;if(this.isCostumeEditor())return t(!1),e.cancelBubble=!0,e.preventDefault(),!0}if(86===e.keyCode&&o&&!e.griff){let e=this.getTopBlockIDs();setTimeout(()=>{this.beginDragOfNewBlocksNotInIDs(e)},10)}}eventCopyClick(e,t){let o=this.getWorkspace();if(e){e.select();let n=t?e.getNextBlock():null;n&&n.unplug(!1),document.dispatchEvent(new KeyboardEvent("keydown",{keyCode:67,ctrlKey:!0})),(n||2===t)&&setTimeout(()=>{n&&o.undo(),2===t&&(s.default.startUndoGroup(o),e.dispose(!0),s.default.endUndoGroup(o))},0)}}eventMouseDown(e){this.updateMousePosition(e)}eventMouseUp(e){this.updateMousePosition(e)}initInner(e){var t=this;let o=e.childNodes;this.codeTab&&o[0]!==this.codeTab&&this.domHelpers.unbindAllEvents(),this.codeTab=o[0],this.costTab=o[1],this.costTabBody=document.querySelector("div[aria-labelledby="+this.costTab.id+"]"),this.domHelpers.bindOnce(document,"keydown",(function(){return t.eventKeyDown(...arguments)}),!0),this.domHelpers.bindOnce(document,"mousemove",(function(){return t.eventMouseMove(...arguments)}),!0),this.domHelpers.bindOnce(document,"mousedown",(function(){return t.eventMouseDown(...arguments)}),!0),this.domHelpers.bindOnce(document,"mouseup",(function(){return t.eventMouseUp(...arguments)}),!0)}}class a{constructor(e,t,o){this.x=e,this.count=t,this.blocks=o}}},"./src/addons/addons/editor-devtools/DomHelpers.js":function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return n}));class n{constructor(e){this.addon=e,this.vm=e.tab.traps.vm,this.events=[]}triggerDragAndDrop(e,t,o,n){n=n||!1;let s=function(e,t,o,s){let r=document.createEvent("MouseEvents");r.initMouseEvent(e,!0,!0,window,1,1,1,o,s,n,!1,!1,!1,0,t),t.dispatchEvent(r)},r=e,a=t;if(!r)return!1;let i=r.getBoundingClientRect(),c=Math.floor((i.left+i.right)/2),d=Math.floor((i.top+i.bottom)/2);if(s("mouseover",r,c,d),s("mousedown",r,c,d),s("dragstart",r,c,d),s("drag",r,c,d),s("mousemove",r,c,d),!a){if(o){let e=o.x,t=o.y;s("drag",r,e,t),s("mousemove",r,e,t)}return!1}i=a.getBoundingClientRect();let l=Math.floor((i.left+i.right)/2),u=Math.floor((i.top+i.bottom)/2);return s("drag",r,l,u),s("mousemove",a,l,u),s("mouseenter",a,l,u),s("dragenter",a,l,u),s("mouseover",a,l,u),s("dragover",a,l,u),s("drop",a,l,u),s("dragend",r,l,u),s("mouseup",r,l,u),!0}bindOnce(e,t,o,n){n=!!n,e.removeEventListener(t,o,n),e.addEventListener(t,o,n),this.events.push(new s(e,t,o,n))}unbindAllEvents(){for(const e of this.events)e.dom.removeEventListener(e.event,e.func,e.capture);this.events=[]}}class s{constructor(e,t,o,n){this.dom=e,this.event=t,this.func=o,this.capture=n}}},"./src/addons/addons/editor-devtools/UndoGroup.js":function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return n}));class n{static startUndoGroup(e){const t=e.undoStack_;t.length&&(t[t.length-1]._devtoolsLastUndo=!0)}static endUndoGroup(e){const t=e.undoStack_;setTimeout(()=>{const e=function(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!#$%()*+,-./:;=?@[]^_`{|}~";let t="";for(let o=0;o<20;o++)t+=e[Math.floor(Math.random()*e.length)];return t}();for(let o=t.length-1;o>=0&&!t[o]._devtoolsLastUndo;o--)t[o].group=e},0)}}},"./src/addons/addons/editor-devtools/_runtime_entry.js":function(e,t,o){"use strict";o.r(t),o.d(t,"resources",(function(){return r}));var n=o("./src/addons/addons/editor-devtools/userscript.js"),s=o("./node_modules/url-loader/dist/cjs.js!./src/addons/addons/editor-devtools/icon--close.svg");const r={"userscript.js":n.default,"icon--close.svg":s.default}},"./src/addons/addons/editor-devtools/userscript.js":function(e,t,o){"use strict";o.r(t);var n=o("./src/addons/addons/editor-devtools/DevTools.js");t.default=async function(e){let{addon:t,console:o,msg:s,safeMsg:r}=e;new n.default(t,s,r).init()}},"./src/addons/addons/editor-searchable-dropdowns/_runtime_entry.js":function(e,t,o){"use strict";o.r(t),o.d(t,"resources",(function(){return a}));var n=o("./src/addons/addons/editor-searchable-dropdowns/userscript.js"),s=o("./node_modules/css-loader/index.js!./src/addons/addons/editor-searchable-dropdowns/userscript.css"),r=o.n(s);const a={"userscript.js":n.default,"userscript.css":r.a}},"./src/addons/addons/editor-searchable-dropdowns/userscript.js":function(e,t,o){"use strict";o.r(t),t.default=async function(e){let{addon:t,console:o,msg:n}=e;const s=await t.tab.traps.getBlockly(),r=t.tab.traps.vm,a=["RENAME_VARIABLE_ID","DELETE_VARIABLE_ID","NEW_BROADCAST_MESSAGE_ID","RENAME_BROADCAST_MESSAGE_ID"],i=(e,t)=>!r.runtime.getAllVarNamesOfType(t).includes(e),c=(e,t)=>!r.editingTarget.lookupVariableByNameAndType(e,t),d={createGlobalVariable:{enabled:e=>i(e,""),createVariable:(e,t)=>e.createVariable(t)},createLocalVariable:{enabled:e=>c(e,""),createVariable:(e,t)=>e.createVariable(t,"",null,!0)},createGlobalList:{enabled:e=>i(e,"list"),createVariable:(e,t)=>e.createVariable(t,"list")},createLocalList:{enabled:e=>c(e,"list"),createVariable:(e,t)=>e.createVariable(t,"list",null,!0)},createBroadcast:{enabled:e=>i(e,"broadcast_msg"),createVariable:(e,t)=>e.createVariable(t,"broadcast_msg")}};let l=null,u=null,p=null,h=[],f=[],m=[],g=[];const b=s.DropDownDiv.show;s.DropDownDiv.show=function(){u=document.querySelector(".blocklyDropdownMenu");for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];if(!u)return b.call(this,...o);u.focus=()=>{},p=document.createElement("input"),t.tab.displayNoneWhileDisabled(p,{display:"flex"}),p.type="text",p.addEventListener("input",_),p.addEventListener("keydown",x),p.classList.add("u-dropdown-searchbar"),u.insertBefore(p,u.firstChild),h=Array.from(u.children).filter(e=>"INPUT"!==e.tagName).map(e=>({element:e,text:e.textContent})),m=g,_();const r=b.call(this,...o);return l=s.DropDownDiv.getContentDiv(),l.style.width=getComputedStyle(l).width,l.style.height=getComputedStyle(l).height,u.insertBefore(p,u.firstChild),p.focus(),r};const y=s.DropDownDiv.clearContent;s.DropDownDiv.clearContent=function(){y.call(this),h=[],f=[],s.DropDownDiv.content_.style.height=""};const v=s.FieldDropdown.prototype.getOptions;s.FieldDropdown.prototype.getOptions=function(){const e=v.call(this),t=this.sourceBlock_,o=r.editingTarget&&r.editingTarget.isStage;return t&&("data"===t.category_?(e.push(I("createGlobalVariable")),o||e.push(I("createLocalVariable"))):"data-lists"===t.category_?(e.push(I("createGlobalList")),o||e.push(I("createLocalList"))):"event_broadcast_menu"!==t.type&&"event_whenbroadcastreceived"!==t.type||e.push(I("createBroadcast"))),g=e,e};const k=s.FieldVariable.prototype.onItemSelected;function w(e,t){e.dispatchEvent(new MouseEvent("mousedown",{relatedTarget:e,bubbles:!0})),t&&e.dispatchEvent(new MouseEvent("mouseup",{relatedTarget:e,bubbles:!0}));const o=e.offsetTop,n=o+e.offsetHeight,s=l.scrollTop,r=l.offsetHeight,a=s+r;s>o?l.scrollTop=o:n>a&&(l.scrollTop=n-r)}function _(){const e=f;f=function(){const e=p.value.trim(),t=e.trim().toLowerCase(),o=(o,n)=>{const s=m[n][1];if(a.includes(s))return t?-1:0;if(Object.prototype.hasOwnProperty.call(d,s))return t&&d[s].enabled(e)?(o.element.lastChild.lastChild.textContent=I(s)[0],0):-1;const r=o.text.toLowerCase();return t===r?2:r.startsWith(t)?1:r.includes(t)?0:-1};return h.map((e,t)=>({item:e,score:o(e,t)})).sort((e,t)=>{let{score:o}=e,{score:n}=t;return Math.max(0,n)-Math.max(0,o)})}();let t=e.length!==f.length;if(!t)for(let o=0;o<f.length;o++)if(f[o].item!==e[o].item){t=!0;break}if(t&&e.length>0){for(const{item:t}of e)t.element.remove();for(const{item:e}of f)u.appendChild(e.element)}for(const{item:e,score:t}of f)e.element.hidden=t<0}function x(e){if("Enter"===e.key){e.stopPropagation(),e.preventDefault();const t=document.querySelector(".goog-menuitem-highlight");if(t&&!t.hidden)return void w(t,!0);const o=s.selected;if(""===p.value&&o&&("event_broadcast"===o.type||"event_broadcastandwait"===o.type||"event_whenbroadcastreceived"===o.type))return void s.DropDownDiv.hide();for(const{item:e}of f)if(!e.element.hidden){w(e.element,!0);break}}else if("Escape"===e.key)s.DropDownDiv.hide();else if("ArrowDown"===e.key||"ArrowUp"===e.key){e.preventDefault(),e.stopPropagation();const t=f.filter(e=>e.score>=0).map(e=>e.item);if(0===t.length)return;let o=-1;for(let e=0;e<t.length;e++)if(t[e].element.classList.contains("goog-menuitem-highlight")){o=e;break}const n=t.length-1;let s=0;s="ArrowDown"===e.key?-1===o||o===n?0:o+1:-1===o||0===o?n:o-1,w(t[s].element,!1)}}function I(e){var t;return[n(e,{name:(null===(t=p)||void 0===t?void 0:t.value.trim())||""}),e]}s.FieldVariable.prototype.onItemSelected=function(e,t){const o=this.sourceBlock_;if(o&&o.workspace&&0!==p.value.length){const e=o.workspace,n=t.getValue();if(Object.prototype.hasOwnProperty.call(d,n)){const t=d[n];s.Events.setGroup(!0);const o=t.createVariable(e,p.value.trim());return this.sourceBlock_&&this.setValue(o.getId()),void s.Events.setGroup(!1)}}return k.call(this,e,t)}}},"./src/addons/addons/find-bar/_runtime_entry.js":function(e,t,o){"use strict";o.r(t),o.d(t,"resources",(function(){return a}));var n=o("./src/addons/addons/find-bar/userscript.js"),s=o("./node_modules/css-loader/index.js!./src/addons/addons/find-bar/userstyle.css"),r=o.n(s);const a={"userscript.js":n.default,"userstyle.css":r.a}},"./src/addons/addons/find-bar/blockly/BlockItem.js":function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return n}));class n{constructor(e,t,o,n){this.cls=e,this.procCode=t,this.labelID=o,this.y=n,this.lower=t.toLowerCase(),this.clones=null,this.eventName=null}matchesID(e){if(this.labelID===e)return!0;if(this.clones)for(const t of this.clones)if(t===e)return!0;return!1}}},"./src/addons/addons/find-bar/userscript.js":function(e,t,o){"use strict";o.r(t);var n=o("./src/addons/addons/find-bar/blockly/BlockItem.js"),s=o("./src/addons/addons/find-bar/blockly/BlockInstance.js"),r=o("./src/addons/addons/find-bar/blockly/Utils.js");t.default=async function(e){let{addon:t,msg:o,console:a}=e;const i=await t.tab.traps.getBlockly();class c{constructor(e){this.utils=e,this.el=null,this.items=[],this.selected=null,this.carousel=new d(this.utils)}get workspace(){return i.getMainWorkspace()}createDom(){return this.el=document.createElement("ul"),this.el.className="sa-find-dropdown",this.el}inputKeyDown(e){return 38===e.keyCode?(this.navigateFilter(-1),void e.preventDefault()):40===e.keyCode?(this.navigateFilter(1),void e.preventDefault()):13===e.keyCode?(this.selected&&this.navigateFilter(1),void e.preventDefault()):void this.carousel.inputKeyDown(e)}navigateFilter(e){let t;for(this.selected&&"none"!==this.selected.style.display?t=-1===e?this.selected.previousSibling:this.selected.nextSibling:(t=this.items[0],e=1);t&&"none"===t.style.display;)t=-1===e?t.previousSibling:t.nextSibling;t&&(t.scrollIntoView({block:"nearest"}),this.onItemClick(t))}addItem(e){const t=document.createElement("li");t.innerText=e.procCode,t.data=e;const o={receive:"events",event:"events",define:"more",var:"data",VAR:"data",list:"data-lists",LIST:"data-lists",costume:"looks",sound:"sounds"};if("flag"===e.cls)t.className="sa-find-flag";else{const n=o[e.cls];t.className="sa-block-color sa-block-color-".concat(n)}return t.addEventListener("mousedown",e=>(this.onItemClick(t),e.preventDefault(),e.cancelBubble=!0,!1)),this.items.push(t),this.el.appendChild(t),t}onItemClick(e,o){this.selected&&this.selected!==e&&(this.selected.classList.remove("sel"),this.selected=null),this.selected!==e&&(e.classList.add("sel"),this.selected=e);let n=e.data.cls;if("costume"===n||"sound"===n){const o=document.querySelector("[class^=asset-panel_wrapper]");o&&(o[t.tab.traps.getInternalKey(o)].child.stateNode.props.onItemClick(e.data.y),o.firstChild.firstChild.children[e.data.y].scrollIntoView({behavior:"auto",block:"center",inline:"start"}),o.closest("div[class*=gui_flex-wrapper]").scrollTop=0)}else if("var"===n||"VAR"===n||"list"===n||"LIST"===n){let t=this.getVariableUsesById(e.data.labelID);this.carousel.build(e,t,o)}else if("define"===n){let t=this.getCallsToProcedureById(e.data.labelID);this.carousel.build(e,t,o)}else if("receive"===n){let t=this.getCallsToEventsByName(e.data.eventName);if(!o){const e=this.utils.getEditingTarget().id;for(const n of t)if(n.targetId===e){o=n;break}}this.carousel.build(e,t,o)}else if(e.data.clones){let t=[this.workspace.getBlockById(e.data.labelID)];for(const o of e.data.clones)t.push(this.workspace.getBlockById(o));this.carousel.build(e,t,o)}else this.utils.scrollBlockIntoView(e.data.labelID),this.carousel.remove()}getVariableUsesById(e){let t=[],o=this.workspace.getTopBlocks();for(const n of o){let o=n.getDescendants();for(const n of o){let o=n.getVarModels();if(o)for(const s of o)s.getId()===e&&t.push(n)}}return t}getCallsToProcedureById(e){let t=this.workspace.getBlockById(e),o=t.getChildren()[0].getProcCode(),n=[t],s=this.workspace.getTopBlocks();for(const e of s){let t=e.getDescendants();for(const e of t)"procedures_call"===e.type&&e.getProcCode()===o&&n.push(e)}return n}getCallsToEventsByName(e){let n=[];const r=t.tab.traps.vm.runtime.targets;for(const t of r){if(!t.isOriginal)continue;const r=t.blocks;if(r._blocks)for(const a of Object.keys(r._blocks)){const i=r._blocks[a];if("event_whenbroadcastreceived"===i.opcode&&i.fields.BROADCAST_OPTION.value===e)n.push(new s.default(t,i));else if("event_broadcast"===i.opcode||"event_broadcastandwait"===i.opcode){const a=i.inputs.BROADCAST_INPUT.block,c=r._blocks[a];if(c){let r;r="event_broadcast_menu"===c.opcode?c.fields.BROADCAST_OPTION.value:o("complex-broadcast"),r===e&&n.push(new s.default(t,i))}}}}return n}empty(){for(const e of this.items)this.el.contains(e)&&this.el.removeChild(e);this.items=[],this.selected=null}}class d{constructor(e){this.utils=e,this.el=null,this.count=null,this.blocks=[],this.idx=0}build(e,t,o){if(this.el&&this.el.parentNode===e)this.navRight();else{if(this.remove(),this.blocks=t,e.appendChild(this.createDom()),this.idx=0,o)for(const e of Object.keys(this.blocks))if(this.blocks[e].id===o.id){this.idx=Number(e);break}this.idx<this.blocks.length&&this.utils.scrollBlockIntoView(this.blocks[this.idx])}}createDom(){this.el=document.createElement("span"),this.el.className="sa-find-carousel";const e=this.el.appendChild(document.createElement("span"));e.className="sa-find-carousel-control",e.textContent="◀",e.addEventListener("mousedown",e=>this.navLeft(e)),this.count=this.el.appendChild(document.createElement("span")),this.count.innerText=this.blocks.length>0?this.idx+1+" / "+this.blocks.length:"0";const t=this.el.appendChild(document.createElement("span"));return t.className="sa-find-carousel-control",t.textContent="▶",t.addEventListener("mousedown",e=>this.navRight(e)),this.el}inputKeyDown(e){37===e.keyCode&&this.el&&this.blocks&&this.navLeft(e),39===e.keyCode&&this.el&&this.blocks&&this.navRight(e)}navLeft(e){return this.navSideways(e,-1)}navRight(e){return this.navSideways(e,1)}navSideways(e,t){this.blocks.length>0&&(this.idx=(this.idx+t+this.blocks.length)%this.blocks.length,this.count.innerText=this.idx+1+" / "+this.blocks.length,this.utils.scrollBlockIntoView(this.blocks[this.idx])),e&&(e.cancelBubble=!0,e.preventDefault())}remove(){this.el&&(this.el.remove(),this.blocks=[],this.idx=0)}}const l=new class{constructor(){this.utils=new r.default(t),this.prevValue="",this.findBarOuter=null,this.findWrapper=null,this.findInput=null,this.dropdownOut=null,this.dropdown=new c(this.utils),document.addEventListener("keydown",e=>this.eventKeyDown(e),!0)}get workspace(){return i.getMainWorkspace()}createDom(e){this.findBarOuter=document.createElement("div"),this.findBarOuter.className="sa-find-bar",t.tab.displayNoneWhileDisabled(this.findBarOuter,{display:"flex"}),e.appendChild(this.findBarOuter),this.findWrapper=this.findBarOuter.appendChild(document.createElement("span")),this.findWrapper.className="sa-find-wrapper",this.dropdownOut=this.findWrapper.appendChild(document.createElement("label")),this.dropdownOut.className="sa-find-dropdown-out",this.findInput=this.dropdownOut.appendChild(document.createElement("input")),this.findInput.className=t.tab.scratchClass("input_input-form",{others:"sa-find-input"}),this.findInput.id="sa-find-input",this.findInput.type="search",this.findInput.placeholder=o("find-placeholder"),this.findInput.autocomplete="off",this.dropdownOut.appendChild(this.dropdown.createDom()),this.bindEvents(),this.tabChanged()}bindEvents(){this.findInput.addEventListener("focus",()=>this.inputChange()),this.findInput.addEventListener("keydown",e=>this.inputKeyDown(e)),this.findInput.addEventListener("keyup",()=>this.inputChange()),this.findInput.addEventListener("focusout",()=>this.hideDropDown())}tabChanged(){if(!this.findBarOuter)return;const e=t.tab.redux.state.scratchGui.editorTab.activeTabIndex,o=0===e||1===e||2===e;this.findBarOuter.hidden=!o}inputChange(){this.showDropDown();let e=(this.findInput.value||"").toLowerCase();if(e===this.prevValue)return;this.prevValue=e,this.dropdown.blocks=null;let t=this.dropdown.items;for(const o of t){let t=o.data.procCode,n=o.data.lower.indexOf(e);if(n>=0){for(o.style.display="block";o.firstChild;)o.removeChild(o.firstChild);n>0&&o.appendChild(document.createTextNode(t.substring(0,n)));let s=document.createElement("b");s.appendChild(document.createTextNode(t.substr(n,e.length))),o.appendChild(s),n+e.length<t.length&&o.appendChild(document.createTextNode(t.substr(n+e.length)))}else o.style.display="none"}}inputKeyDown(e){if(this.dropdown.inputKeyDown(e),13!==e.keyCode)return 27===e.keyCode?(this.findInput.value.length>0?(this.findInput.value="",this.inputChange()):this.findInput.blur(),void e.preventDefault()):void 0;this.findInput.blur()}eventKeyDown(e){if(t.self.disabled||!this.findBarOuter)return;let o=e.ctrlKey||e.metaKey;if("f"===e.key&&o&&!e.shiftKey)return this.findInput.focus(),this.findInput.select(),e.cancelBubble=!0,e.preventDefault(),!0;if(37===e.keyCode&&o){if("INPUT"===document.activeElement.tagName)return;if(0===this.selectedTab)return this.utils.navigationHistory.goBack(),e.cancelBubble=!0,e.preventDefault(),!0}if(39===e.keyCode&&o){if("INPUT"===document.activeElement.tagName)return;if(0===this.selectedTab)return this.utils.navigationHistory.goForward(),e.cancelBubble=!0,e.preventDefault(),!0}}showDropDown(e,t){if(!e&&this.dropdownOut.classList.contains("visible"))return;this.prevValue=e?"":null,this.dropdownOut.classList.add("visible");let o=0===this.selectedTab?this.getScratchBlocks():1===this.selectedTab?this.getScratchCostumes():2===this.selectedTab?this.getScratchSounds():[];this.dropdown.empty();for(const n of o){let o=this.dropdown.addItem(n);e&&(n.matchesID(e)?this.dropdown.onItemClick(o,t):o.style.display="none")}this.utils.offsetX=this.dropdownOut.getBoundingClientRect().right+26,this.utils.offsetY=32}hideDropDown(){this.dropdownOut.classList.remove("visible")}get selectedTab(){return t.tab.redux.state.scratchGui.editorTab.activeTabIndex}getScratchBlocks(){let e=[],t={},o=this.workspace.getTopBlocks();function s(o,s,r){let a=r.id?r.id:r.getId?r.getId():null,i=t[s];if(i)return i.clones||(i.clones=[]),i.clones.push(a),i;let c=new n.default(o,s,a,0);return c.y=r.getRelativeToSurfaceXY?r.getRelativeToSurfaceXY().y:null,e.push(c),t[s]=c,c}function r(e){let t,o=e.inputList[0];for(const e of o.fieldRow)t=(t?t+" ":"")+e.getText();return t}for(const e of o)if("procedures_definition"!==e.type)if("event_whenflagclicked"!==e.type)if("event_whenbroadcastreceived"!==e.type)"event_when"!==e.type.substr(0,10)&&"control_start_as_clone"!==e.type||s("event",r(e),e);else{let t=e.inputList[0].fieldRow.find(e=>"BROADCAST_OPTION"===e.name).getText();s("receive","event "+t,e).eventName=t}else s("flag",r(e),e);else{const t=e.getChildren()[0].getProcCode();if(!t)continue;const o=e.inputList.findIndex(e=>e.fieldRow.length>0);if(-1===o)continue;const n=e.inputList[o].fieldRow[0].getText();s("define",0===o?"".concat(n," ").concat(t):"".concat(t," ").concat(n),e)}let a=this.workspace.getVariableMap(),i=a.getVariablesOfType("");for(const e of i)s(e.isLocal?"var":"VAR",(e.isLocal?"var ":"VAR ")+e.name,e);let c=a.getVariablesOfType("list");for(const e of c)s(e.isLocal?"list":"LIST",(e.isLocal?"list ":"LIST ")+e.name,e);const d=this.getCallsToEvents();for(const e of d)s("receive","event "+e.eventName,e.block).eventName=e.eventName;const l={flag:0,receive:1,event:2,define:3,var:4,VAR:5,list:6,LIST:7};return e.sort((e,t)=>{let o=l[e.cls]-l[t.cls];return 0!==o?o:e.lower<t.lower?-1:e.lower>t.lower?1:e.y-t.y}),e}getScratchCostumes(){let e=this.utils.getEditingTarget().getCostumes(),t=[],o=0;for(const s of e){let e=new n.default("costume",s.name,s.assetId,o);t.push(e),o++}return t}getScratchSounds(){let e=this.utils.getEditingTarget().getSounds(),t=[],o=0;for(const s of e){let e=new n.default("sound",s.name,s.assetId,o);t.push(e),o++}return t}getCallsToEvents(){const e=[],t=new Set;for(const n of this.workspace.getAllBlocks()){if("event_broadcast"!==n.type&&"event_broadcastandwait"!==n.type)continue;const s=n.getChildren()[0];if(!s)continue;let r="";r="event_broadcast_menu"===s.type?s.inputList[0].fieldRow[0].getText():o("complex-broadcast"),t.has(r)||(t.add(r),e.push({eventName:r,block:n}))}return e}},u=i.Gesture.prototype.doBlockClick_;for(i.Gesture.prototype.doBlockClick_=function(){if(!t.self.disabled&&(1===this.mostRecentEvent_.button||this.mostRecentEvent_.shiftKey)){let e=this.startBlock_;for(;e;e=e.getSurroundParent()){if("procedures_definition"===e.type||!this.jumpToDef&&"procedures_call"===e.type){let t=e.id?e.id:e.getId?e.getId():null;return l.findInput.focus(),void l.showDropDown(t)}if("data_variable"===e.type||"data_changevariableby"===e.type||"data_setvariableto"===e.type){let t=e.getVars()[0];return l.findInput.focus(),l.showDropDown(t,e),void(l.selVarID=t)}if("event_whenbroadcastreceived"===e.type||"event_broadcastandwait"===e.type||"event_broadcast"===e.type){let t=e.id;return l.findInput.focus(),l.showDropDown(t,e),void(l.selVarID=t)}}}u.call(this)},t.tab.redux.initialize(),t.tab.redux.addEventListener("statechanged",e=>{"scratch-gui/navigation/ACTIVATE_TAB"===e.detail.action.type&&l.tabChanged()});;){const e=await t.tab.waitForElement("ul[class*=gui_tab-list_]",{markAsSeen:!0,reduxEvents:["scratch-gui/mode/SET_PLAYER","fontsLoaded/SET_FONTS_LOADED","scratch-gui/locales/SELECT_LOCALE"],reduxCondition:e=>!e.scratchGui.mode.isPlayerOnly});l.createDom(e)}}},"./src/addons/addons/folders/_runtime_entry.js":function(e,t,o){"use strict";o.r(t),o.d(t,"resources",(function(){return i}));var n=o("./src/addons/addons/folders/userscript.js"),s=o("./node_modules/css-loader/index.js!./src/addons/addons/folders/style.css"),r=o.n(s),a=o("./node_modules/url-loader/dist/cjs.js!./src/addons/addons/folders/folder.svg");const i={"userscript.js":n.default,"style.css":r.a,"folder.svg":a.default}},"./src/addons/addons/folders/userscript.js":function(e,t,o){"use strict";function n(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function s(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function r(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.r(t),t.default=async function(e){let t,o,n,r,a,i,{addon:c,console:d,msg:l}=e;const u=e=>{const t=e.indexOf("//");return-1===t||0===t?null:e.substr(0,t)},p=e=>{const t=e.indexOf("//");return-1===t||0===t?e:e.substr(t+"//".length)},h=(e,t)=>{const o=p(e);return t?"".concat(t).concat("//").concat(o):o},f=e=>!e.includes("//")&&!e.endsWith("/"),m=["_mouse_","_stage_","_edge_","_myself_","_random_"],g=e=>""===e?"2":m.includes(e)?"".concat(e,"2"):e,b=e=>{const t=e.closest("[class*='sprite-selector_sprite-selector']");if(t)return t[o].child.sibling.child.stateNode;const n=e.closest('[class*="asset-panel_wrapper"]');if(n)return n[o].child.child.stateNode;throw new Error("cannot find SortableHOC")},y=(e,t,o)=>Math.min(Math.max(e,t),o),v=e=>e&&e.name&&"object"==typeof e.name?e.name:null,k={assetId:"&__sa_folders_folder",encodeDataURI:()=>c.self.getResource("/folder.svg")},w="data:image/svg+xml;base64,".concat(btoa('<?xml version="1.0" encoding="UTF-8"?>\n<svg width="100px" height="100px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g id="Sound" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <path d="M12.4785058,12.6666667 C12.3144947,12.6666667 12.1458852,12.6272044 11.9926038,12.5440517 C11.537358,12.2960031 11.3856094,11.7562156 11.6553847,11.3376335 C12.1688774,10.5371131 12.1688774,9.54491867 11.6553847,8.74580756 C11.3856094,8.32581618 11.537358,7.78602861 11.9926038,7.53798001 C12.452448,7.29275014 13.0379829,7.43086811 13.3046926,7.84804076 C14.1737981,9.20103311 14.1737981,10.8809986 13.3046926,12.233991 C13.1268862,12.5130457 12.806528,12.6666667 12.4785058,12.6666667 Z M15.3806784,13.8333333 C15.2408902,13.8333333 15.0958763,13.796281 14.9665396,13.7182064 C14.5785295,13.485306 14.4491928,12.9784829 14.6791247,12.5854634 C15.5949331,11.0160321 15.5949331,9.065491 14.6791247,7.49738299 C14.4491928,7.10436352 14.5785295,6.59621712 14.9665396,6.36331669 C15.3558562,6.13438616 15.8549129,6.26274605 16.0848448,6.65444223 C17.3050517,8.74260632 17.3050517,11.3389168 16.0848448,13.4270809 C15.9319924,13.6890939 15.6602547,13.8333333 15.3806784,13.8333333 Z M10.3043478,5.62501557 L10.3043478,13.873675 C10.3043478,14.850934 9.10969849,15.3625101 8.36478311,14.7038052 L6.7566013,13.2797607 C6.18712394,12.7762834 5.44499329,12.4968737 4.67362297,12.4968737 L4.3923652,12.4968737 C3.62377961,12.4968737 3,11.8935108 3,11.1470686 L3,8.36646989 C3,7.62137743 3.62377961,7.01666471 4.3923652,7.01666471 L4.65830695,7.01666471 C5.42967727,7.01666471 6.17180792,6.73725504 6.74128529,6.23377771 L8.36478311,4.79623519 C9.10969849,4.13753026 10.3043478,4.64910643 10.3043478,5.62501557 Z" id="Combined-Shape" fill="#575E75"></path>\n    </g>\n</svg>'));let _=null;const x=Object.create(null),I=e=>{if(!x[e]){_||(_=document.createElement("style"),document.head.appendChild(_));const t=360*(e=>{const t=(e=>{let t=0;for(let o=0;o<e.length;o++)t=31*t+e.charCodeAt(o),t|=0;return t})(e),o=(n=t,function(){var e=n+=1831565813;return e=Math.imul(e^e>>>15,1|e),(((e^=e+Math.imul(e^e>>>7,61|e))^e>>>14)>>>0)/4294967296});var n;return o(),o(),o(),o(),o()})(e),o="hsla(".concat(t,"deg, 100%, 85%, 0.5)"),n=Object.keys(x).length,s="sa-folders-color-".concat(n);x[e]=s,_.textContent+=".".concat(s,"{background-color:").concat(o," !important;}"),_.textContent+=".".concat(s,'[class*="sprite-selector_raised"]:not([class*="sa-folders-folder"]){background-color:hsla(').concat(t,"deg, 100%, 77%, 1) !important;}")}return x[e]},T=e=>{const t=Object.create(null),o=[];for(const n of e){const e=n.getName?n.getName():n.name,s=u(e);"string"==typeof s?(t[s]||(t[s]=[],o.push(t[s])),t[s].push(n)):o.push(n)}const n=o.flat();for(let t=0;t<e.length;t++)if(o[t]!==e[t])return{items:n,changed:!0};return{items:n,changed:!1}},C=()=>{const{items:e,changed:o}=T(t.runtime.targets);o&&(t.runtime.targets=e,t.emitTargetsUpdate())},N=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.editingTarget;const{items:o,changed:n}=T(e.sprite.costumes);n&&(e.sprite.costumes=o,t.emitTargetsUpdate())},L=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.editingTarget;const{items:o,changed:n}=T(e.sprite.sounds);n&&(e.sprite.sounds=o,t.emitTargetsUpdate())},S=e=>{const t=e.constructor;if(!Array.isArray(e.props.items)||"string"!=typeof e.props.selectedId&&"number"!=typeof e.props.selectedItemIndex||void 0===e.containerBox||void 0!==t.prototype.componentDidMount||void 0!==t.prototype.componentDidUpdate||"function"!=typeof t.prototype.handleAddSortable||"function"!=typeof t.prototype.handleRemoveSortable||"function"!=typeof t.prototype.setRef)throw new Error("Can not comprehend SortableHOC")};class j{constructor(){this.cache=new Map,this.usedThisTick=new Set}has(e){return this.cache.has(e)}get(e){return this.usedThisTick.add(e),this.cache.get(e)}set(e,t){this.usedThisTick.add(e),this.cache.set(e,t)}startTick(){this.usedThisTick.clear()}endTick(){for(const e of Array.from(this.cache.keys()))this.usedThisTick.has(e)||this.cache.delete(e)}clear(){this.usedThisTick.clear(),this.cache.clear()}}const E=(e,t)=>{const o=new j,c=new j,d=new j,l=[[0,0],[40,0],[0,40],[40,40]],p=e=>{let t='data:image/svg+xml;,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(80,'" height="').concat(80,'">');for(let o=0;o<Math.min(l.length,e.length);o++){const n=e[o],s=40,r=40,[a,i]=l[o];let c;n.asset?c=n.asset.encodeDataURI():n.costume&&n.costume.asset?c=n.costume.asset.encodeDataURI():n.url&&(c=w),c&&(t+='<image width="'.concat(s,'" height="').concat(r,'" x="').concat(a,'" y="').concat(i,'" href="').concat(c,'"/>'))}return t+="</svg>",t},h=e=>{let t="sa_folder&&";for(let o=0;o<Math.min(l.length,e.length);o++){const n=e[o];n.asset?t+=n.asset.assetId:n.costume&&n.costume.asset?t+=n.costume.asset.assetId:n.url&&(t+=n.url),t+="&&"}return t},f=e=>1===t?e.props.items.find(t=>t.id===e.props.selectedId):2===t?e.props.items[e.props.selectedItemIndex]:null;e.prototype.saInitialSetup=function(){o.clear(),c.clear(),d.clear();const e=[],s=f(this);if(s&&!s.isStage){const o=u(s.name);e.push(o),1===t?n=o:2===t&&(r=o)}this.setState({folders:e})},e.prototype.componentDidMount=function(){const e=f(this);if(e){const o=u(e.name);1===t?n=o:2===t&&(r=o)}this.saInitialSetup()},e.prototype.componentDidUpdate=function(e,o){const s=f(this);if(s){const o=u(s.name),a=this.state.folders.includes(o)?o:null;let i;1===t?n=a:2===t&&(r=a),i=this.props.selectedId?this.props.selectedId!==e.selectedId:this.props.items[this.props.selectedItemIndex]&&e.items[e.selectedItemIndex]&&this.props.items[this.props.selectedItemIndex].name!==e.items[e.selectedItemIndex].name,i&&(s.isStage||"string"!=typeof o||this.state.folders.includes(o)||this.setState(e=>({folders:[...e.folders,o]})))}};const m=e.prototype.render;e.prototype.render=function(){const e=this.props;this.props=s(s({},this.props),((e,n)=>{const s=e=>{const t=e.name;let n,s;o.has(t)?(n=o.get(t),s=n.name):(s={toString:()=>"_".concat(e.name)},n={},o.set(t,n));const r=u(e.name);return Object.assign(n,e),s.realName=e.name,s.realIndex=l,s.inFolder=r,n.name=s,{newItem:n,itemData:s}};o.startTick(),c.startTick(),d.startTick();const r=new Map,a=[],i={items:a};let l=0;for(;l<n.items.length;){const o=n.items[l],f=u(o.name);if(null===f)a.push(s(o).newItem),2===t&&n.selectedItemIndex===l&&(i.selectedItemIndex=a.length-1);else{const o=-1!==e.indexOf(f),m=[];for(;l<n.items.length;){const e=n.items[l],r=s(e);if(u(e.name)!==f)break;m.push(r.newItem),2===t&&n.selectedItemIndex===l&&(i.selectedItemIndex=o?a.length+m.length:-1),l++}l--;const g=r.get(f)||0;r.set(f,g+1);const b=h(m),y="".concat(o,"&").concat(g,"&").concat(f,"&").concat(b,"&"),v="&__".concat(g,"_").concat(f),w=b;let _,x,I;if(c.has(y)?(_=c.get(y),x=_.name):(_={id:{toString:()=>v}},x={toString:()=>v},c.set(y,_)),x.folder=f,x.folderOpen=o,_.items=m,_.name=x,o?I=k:d.has(w)?I=d.get(w):(I={assetId:w,encodeDataURI:()=>p(m)},d.set(w,I)),1===t?(_.costume||(_.costume={}),_.costume.asset=I,_.id||(_.id={}),_.id.sa_folder_items=m,_.id.toString=()=>v):(_.asset=I,_.dragPayload||(_.dragPayload={}),_.dragPayload.sa_folder_items=m),a.push(_),o)for(const e of m)a.push(e)}l++}return o.endTick(),c.endTick(),d.endTick(),i})(this.state&&this.state.folders||[],this.props)),1===t?a=this.props.items:2===t&&(i=this.props.items);const n=m.call(this);return this.props=e,n}},D=(e,t)=>{const o=b(e.ref);return(o.state&&o.state.folders||[]).includes(t)},M=(e,t,o)=>{b(e.ref).setState(e=>{let n=e&&e.folders||[];return n=n.filter(e=>e!==t),o?{folders:[...n,t]}:{folders:n}})};c.tab.createEditorContextMenu((e,o)=>{if("sprite"!==e&&"costume"!==e&&"sound"!==e)return;const n=o.target[c.tab.traps.getInternalKey(o.target)].return.return.return.stateNode,s=v(n.props);if(s){if("string"==typeof s.folder){o.target.setAttribute("sa-folders-context-type","folder");const e=e=>{const o=D(n,s.folder);if(M(n,s.folder,!1),o&&"string"==typeof e&&M(n,e,!0),"SPRITE"===n.props.dragType){for(const o of t.runtime.targets)o.isOriginal&&u(o.getName())===s.folder&&t.renameSprite(o.id,g(h(o.getName(),e)));t.emitWorkspaceUpdate(),C()}else if("COSTUME"===n.props.dragType){for(let o=0;o<t.editingTarget.sprite.costumes.length;o++){const n=t.editingTarget.sprite.costumes[o];u(n.name)===s.folder&&t.renameCostume(o,h(n.name,e))}N()}else if("SOUND"===n.props.dragType){for(let o=0;o<t.editingTarget.sprite.sounds.length;o++){const n=t.editingTarget.sprite.sounds[o];u(n.name)===s.folder&&t.renameSound(o,h(n.name,e))}L()}},r=async()=>{let t=await c.tab.prompt(l("rename-folder-prompt-title"),l("rename-folder-prompt"),s.folder,{useEditorClasses:!0});null!==t&&(f(t)?(t||(t=null),e(t)):alert(l("name-not-allowed")))},a=()=>{e(null)};return[{className:"sa-folders-rename-folder",label:l("rename-folder"),callback:r,position:"assetContextMenuAfterDelete",order:10},{className:"sa-folders-remove-folder",label:l("remove-folder"),callback:a,position:"assetContextMenuAfterDelete",order:11}]}{o.target.setAttribute("sa-folders-context-type","asset");const e=e=>{if("SPRITE"===n.props.dragType){const o=t.runtime.getTargetById(n.props.id);t.renameSprite(n.props.id,g(h(o.getName(),e))),C(),t.emitWorkspaceUpdate()}else if("COSTUME"===n.props.dragType){const o=v(n.props).realIndex,s=t.editingTarget.sprite.costumes[o];t.renameCostume(t.editingTarget.sprite.costumes.indexOf(s),h(s.name,e)),N()}else if("SOUND"===n.props.dragType){const o=v(n.props).realIndex,s=t.editingTarget.sprite.sounds[o];t.renameSound(t.editingTarget.sprite.sounds.indexOf(s),h(s.name,e)),L()}},r=async()=>{const t=await c.tab.prompt(l("name-prompt-title"),l("name-prompt"),p(s.realName),{useEditorClasses:!0});null!==t&&(f(t)?e(t):alert(l("name-not-allowed")))},d=[{border:!0,className:"sa-folders-create-folder",label:l("create-folder"),callback:r,position:"assetContextMenuAfterDelete",order:13}],u=s.inFolder;return"string"==typeof u&&d.push({className:"sa-folders-remove-from-folder",label:l("remove-from-folder"),callback:()=>e(null),position:"assetContextMenuAfterDelete",order:14}),d.concat((e=>{const t=new Set;let o;o="SPRITE"===e.props.dragType?a:i;for(const e of o){const o=v(e);"string"==typeof o.folder&&t.add(o.folder)}return Array.from(t)})(n).filter(e=>e!==u).map((t,o)=>({className:"sa-folders-add-to-folder",label:l("add-to-folder",{folder:t}),callback:()=>e(t),position:"assetContextMenuAfterDelete",order:20+o})))}}});const A=e=>{for(const t of["handleDelete","handleDuplicate","handleExport"]){const o=e.prototype[t];e.prototype[t]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("number"==typeof this.props.id){const e=v(this.props);if(e){const n=this.props;this.props=s(s({},n),{},{id:e.realIndex});const r=o.call(this,...t);return this.props=n,r}}return o.call(this,...t)}}const t=e.prototype.handleDragEnd;e.prototype.handleDragEnd=function(){const e=v(this.props);if(e&&"number"==typeof e.realIndex&&this.props.dragging){const t=this.props.index,o=e.realIndex;if(t!==o){const e=c.tab.redux.state.scratchGui.assetDrag.currentOffset,n=b(this.ref);e&&n&&null===n.getMouseOverIndex()&&(this.props.index=o,this.handleDrag(e),this.props.index=t)}}for(var o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return t.call(this,...n)};const o=e.prototype.handleClick;e.prototype.handleClick=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const s=t[0];if(s&&!this.noClick){const e=v(this.props);if(e){if("string"==typeof e.folder)return s.preventDefault(),void M(this,e.folder,!D(this,e.folder));if("number"==typeof this.props.number&&"number"==typeof e.realIndex)return s.preventDefault(),void(this.props.onClick&&this.props.onClick(e.realIndex))}}return o.call(this,...t)};const n=e.prototype.render;e.prototype.render=function(){const e=v(this.props);if(e){const t=this.props;this.props=s({},this.props),"string"==typeof e.realName&&(this.props.name=p(e.realName)),"number"==typeof this.props.number&&"number"==typeof e.realIndex&&(this.props.number=e.realIndex+1),"string"==typeof e.folder&&(this.props.name=e.folder,e.folderOpen?this.props.details=l("open-folder"):this.props.details=l("closed-folder"),this.props.selected=!1,this.props.number=null,this.props.className+=" ".concat(I(e.folder)," sa-folders-folder")),"string"==typeof e.inFolder&&(this.props.className+=" ".concat(I(e.inFolder)));const o=n.call(this);return this.props=t,o}return n.call(this)}},O=()=>{const e=t.runtime.targets[0].constructor,o=t.installTargets;t.installTargets=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];if(null!==n){const e=t[0],o=t[2];if(Array.isArray(e)&&!o)for(const t of e)t.sprite&&(t.sprite.name=h(t.sprite.name,n))}return o.call(this,...t).then(e=>(C(),e))};const s=e.prototype.addCostume;e.prototype.addCostume=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];if(null!==r){const e=t[0];e&&"string"!=typeof u(e.name)&&(e.name=h(e.name,r))}const n=s.call(this,...t);return N(this),n};const c=e.prototype.addSound;e.prototype.addSound=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];if(null!==r){const e=t[0];e&&"string"!=typeof u(e.name)&&(e.name=h(e.name,r))}const n=c.call(this,...t);return L(this),n};const l=(e,t,o)=>{let{guiItems:n,getAll:s,set:r,rename:a,getVMItemFromGUIItem:i,zeroIndexed:c,onFolderChanged:l}=e;if((t=y(t,c?0:1,c?n.length-1:n.length))===(o=y(o,c?0:1,c?n.length-1:n.length)))return!1;let u=s();const p=s(),f=n[t-(c?0:1)],m=n[o-(c?0:1)],g=v(f),b=v(m);if(!g||!b)return d.warn("should never happen"),!1;const k=("string"==typeof g.folder?f.items:[f]).map(e=>i(e,u)).filter(e=>e);if("number"==typeof b.realIndex){const e=i(m,u);if(!e||k.includes(e))return!1}let w,_=null;if(u=u.filter(e=>!k.includes(e)),o===(c?0:1))w=c?0:1;else if(o===n.length-(c?1:0))w=u.length;else if("number"==typeof b.realIndex){_="string"==typeof b.inFolder?b.inFolder:null;let e=i(m,u);if(!e)return d.warn("should never happen"),!1;w=u.indexOf(e),o>t&&w++}else{if("string"!=typeof b.folder)return d.warn("should never happen"),!1;{let e,n=0;o<t?e=m.items[0]:b.folderOpen?(e=m.items[0],_=b.folder):(e=m.items[m.items.length-1],n=1);let s=i(e,u);if(s)w=u.indexOf(s)+n;else{if(s=i(e,p),!s)return d.warn("should never happen"),!1;w=p.indexOf(s)+n}}}if("string"!=typeof g.folder||null===_){if(w<(c?0:1)||w>u.length)return d.warn("should never happen"),!1;if(u.splice(w,0,...k),r(u),"string"!=typeof g.folder&&g.inFolder!==_){for(const e of k){const t=e.getName?e.getName():e.name;a(e,h(t,_))}l&&l()}return!0}};t.constructor.prototype.reorderTarget=function(e,t){return l({getAll:()=>this.runtime.targets,set:e=>{this.runtime.targets=e,this.emitTargetsUpdate()},rename:(e,t)=>{this.renameSprite(e.id,g(t))},getVMItemFromGUIItem:(e,t)=>t.find(t=>t.id===e.id),onFolderChanged:()=>{this.emitWorkspaceUpdate()},guiItems:a,zeroIndexed:!1},e,t)},e.prototype.reorderCostume=function(e,t){return l({getAll:()=>this.sprite.costumes,set:e=>{this.sprite.costumes=e},rename:(e,t)=>{this.renameCostume(this.sprite.costumes.indexOf(e),t)},getVMItemFromGUIItem:(e,t)=>{const o=v(e);return t.find(e=>e.name===o.realName)},guiItems:i,zeroIndexed:!0},e,t)},e.prototype.reorderSound=function(e,t){return l({getAll:()=>this.sprite.sounds,set:e=>{this.sprite.sounds=e},rename:(e,t)=>{this.renameSound(this.sprite.sounds.indexOf(e),t)},getVMItemFromGUIItem:(e,t)=>{const o=v(e);return t.find(e=>e.name===o.realName)},guiItems:i,zeroIndexed:!0},e,t)}},B=e=>{const t=e.constructor;t.prototype.sa_loadNextItem=function(){if(!this.sa_queuedItems)return;const e=this.sa_queuedItems.pop();if(e){let t,n;e.dragPayload?(n=e.url?"SOUND":"COSTUME",t=e.dragPayload):e.id&&(n="SPRITE",t=e.id),n&&t&&o.call(this,{dragType:n,payload:t})}},t.prototype.componentDidUpdate=function(e,t){this.state.loading||!t.loading||this.state.error||this.sa_loadNextItem()};const o=t.prototype.handleDrop;t.prototype.handleDrop=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const s=t[0],r=s&&s.payload&&s.payload.sa_folder_items;if(!Array.isArray(r))return o.call(this,...t);c.tab.confirm("",l("confirm-backpack-folder"),{useEditorClasses:!0}).then(e=>{e&&(this.sa_queuedItems=r,this.sa_loadNextItem())})},e.handleDrop=t.prototype.handleDrop.bind(e)};{const e=t=>{t.target.closest('[class*="backpack_backpack-header_"]')&&setTimeout(()=>{const t=document.querySelector("[class^='backpack_backpack-list_']");if(!t)return;document.removeEventListener("click",e);const n=(e=>{const t=e.closest('[class*="gui_editor-wrapper"]');if(!t)throw new Error("cannot find Backpack");return t[o].child.sibling.child.child.stateNode})(t);(e=>{const t=e.constructor;if("function"!=typeof t.prototype.handleDrop||void 0!==t.prototype.componentDidUpdate)throw new Error("Can not comprehend Backpack")})(n),B(n)})};document.addEventListener("click",e,!0)}{const e=await c.tab.waitForElement("[class^='sprite-selector_sprite-wrapper']",{reduxCondition:e=>!e.scratchGui.mode.isPlayerOnly});t=c.tab.traps.vm,o=Object.keys(e).find(e=>e.startsWith("__reactInternalInstance$"));const n=b(e),s=e[o].child.child.child.stateNode;S(n),(e=>{const t=e.constructor;if("object"!=typeof e.props.asset||"string"!=typeof e.props.name||"string"!=typeof e.props.dragType||"function"!=typeof t.prototype.handleClick||"function"!=typeof t.prototype.setRef||"function"!=typeof t.prototype.handleDrag||"function"!=typeof t.prototype.handleDragEnd||"function"!=typeof t.prototype.handleDelete||"function"!=typeof t.prototype.handleDuplicate||"function"!=typeof t.prototype.handleExport)throw new Error("Can not comprehend SpriteSelectorItem")})(s),(e=>{const t=e.runtime.targets[0];if("function"!=typeof e.installTargets||"function"!=typeof e.reorderTarget||"function"!=typeof t.reorderCostume||"function"!=typeof t.reorderSound||"function"!=typeof t.addCostume||"function"!=typeof t.addSound)throw new Error("Can not comprehend VM")})(t),E(n.constructor,1),A(s.constructor),n.saInitialSetup(),O()}{const e=await c.tab.waitForElement("[class*='selector_list-item']",{reduxCondition:e=>0!==e.scratchGui.editorTab.activeTabIndex&&!e.scratchGui.mode.isPlayerOnly}),t=b(e);S(t),E(t.constructor,2),t.saInitialSetup()}}},"./src/addons/addons/middle-click-popup/_runtime_entry.js":function(e,t,o){"use strict";o.r(t),o.d(t,"resources",(function(){return a}));var n=o("./src/addons/addons/middle-click-popup/userscript.js"),s=o("./node_modules/css-loader/index.js!./src/addons/addons/middle-click-popup/userstyle.css"),r=o.n(s);const a={"userscript.js":n.default,"userstyle.css":r.a}},"./src/addons/addons/middle-click-popup/userscript.js":function(e,t,o){"use strict";o.r(t),t.default=async function(e){let{addon:t,msg:o,console:n}=e;const s=await t.tab.traps.getBlockly();let r={x:0,y:0};const a=new class{constructor(){this.floatBar=null,this.floatInput=null,this.dropdownOut=null,this.dropdown=null,this.prevVal="",this.DROPDOWN_BLOCK_LIST_MAX_ROWS=25,this.createDom()}get workspace(){return s.getMainWorkspace()}get selectedTab(){return t.tab.redux.state.scratchGui.editorTab.activeTabIndex}createDom(){var e=this;this.floatBar=document.body.appendChild(document.createElement("div")),this.floatBar.className="sa-float-bar",this.floatBar.dir=t.tab.direction,this.floatBar.style.display="none",this.dropdownOut=this.floatBar.appendChild(document.createElement("div")),this.dropdownOut.className="sa-float-bar-dropdown-out",this.floatInput=this.dropdownOut.appendChild(document.createElement("input")),this.floatInput.placeholder=o("start-typing"),this.floatInput.className="sa-float-bar-input",this.floatInput.className=t.tab.scratchClass("input_input-form",{others:"sa-float-bar-input"}),this.dropdown=this.dropdownOut.appendChild(document.createElement("ul")),this.dropdown.className="sa-float-bar-dropdown",this.floatInput.addEventListener("keyup",()=>this.inputChange()),this.floatInput.addEventListener("focus",()=>this.inputChange()),this.floatInput.addEventListener("keydown",(function(){return e.inputKeyDown(...arguments)})),this.floatInput.addEventListener("focusout",()=>this.hide()),this.dropdownOut.addEventListener("mousedown",(function(){return e.onClick(...arguments)})),document.addEventListener("keydown",e=>{if("editor"!==t.tab.editorMode)return;let o=e.ctrlKey||e.metaKey;return" "===e.key&&o?(this.show(e),e.cancelBubble=!0,e.preventDefault(),!0):void 0})}show(e){var t,o;0===this.selectedTab&&(e.cancelBubble=!0,e.preventDefault(),this.buildFilterList(),this.floatBar.style.left=(null!==(t=e.clientX)&&void 0!==t?t:r.x)+16+"px",this.floatBar.style.top=(null!==(o=e.clientY)&&void 0!==o?o:r.y)-8+"px",this.floatBar.style.display="",this.floatInput.value="",this.floatInput.focus())}onClick(e){e.cancelBubble=!0,e.target.closest("input")||e.preventDefault();let t=e&&e.target;"B"===t.tagName&&(t=t.parentNode),e instanceof MouseEvent&&"LI"!==t.tagName||(t&&t.data||(t=this.dropdown.querySelector(".sel")),t&&(this.createDraggingBlock(t,e),e.shiftKey&&(this.floatBar.style.display="",this.floatInput.focus())))}createDraggingBlock(e,t){let o=e.data.option;if(o.option){let e=o.dom.querySelector("field[name="+o.pickField+"]");e.getAttribute("id")?(e.innerText=o.option[0],e.setAttribute("id",o.option[1]+"-"+o.option[0])):e.innerText=o.option[1],"other scripts in sprite"===o.option[1]&&o.dom.querySelector("mutation").setAttribute("hasnext","true")}this.workspace.setResizesEnabled(!1),s.Events.disable();try{var n=s.Xml.domToBlock(o.dom,this.workspace);if(s.scratchBlocksUtils.changeObscuredShadowIds(n),!n.getSvgRoot())throw new Error("newBlock is not rendered.");let e=n.svgPath_.getBoundingClientRect(),t=Math.floor((r.x-(e.left+e.right)/2)/this.workspace.scale),a=Math.floor((r.y-(e.top+e.bottom)/2)/this.workspace.scale);n.moveBy(t,a)}finally{s.Events.enable()}s.Events.isEnabled()&&s.Events.fire(new s.Events.BlockCreate(n));var a={clientX:r.x,clientY:r.y,type:"mousedown",preventDefault:function(){t.preventDefault()},stopPropagation:function(){t.stopPropagation()},target:e};this.workspace.startDragWithFakeEvent(a,n)}inputChange(){let e=(this.floatInput.value||"").toLowerCase();if(e===this.prevVal)return;this.prevVal=e;let t=this.dropdown.parentNode;this.dropdown.remove();let o=0,n=e.split(" "),s=this.dropdown.getElementsByTagName("li");for(const e of s){const t=e.data.text,s=e.data.lower;let r=0,a=[];for(let e=0;e<n.length;e++){let t=" "+n[e],o=s.indexOf(t,r);if(-1===o){a=null;break}a.push(o),r=o+t.length}if(o<this.DROPDOWN_BLOCK_LIST_MAX_ROWS&&a){for(e.style.display="block";e.firstChild;)e.removeChild(e.firstChild);let s=0;for(let o=0;o<a.length;o++){let r=a[o];r>s&&(e.appendChild(document.createTextNode(t.substring(s,r))),s=r);let i=document.createElement("b"),c=n[o].length;i.appendChild(document.createTextNode(t.substr(s,c))),e.appendChild(i),s+=c}s<t.length&&e.appendChild(document.createTextNode(t.substr(s))),0===o?e.classList.add("sel"):e.classList.remove("sel"),o++}else e.style.display="none",e.classList.remove("sel")}t.append(this.dropdown)}inputKeyDown(e){return 38===e.keyCode?(this.navigateFloatFilter(-1),void e.preventDefault()):40===e.keyCode?(this.navigateFloatFilter(1),void e.preventDefault()):13===e.keyCode?(this.dropdown.querySelector(".sel")&&(this.onClick(e),this.hide()),e.cancelBubble=!0,void e.preventDefault()):27===e.keyCode?(this.floatInput.value.length>0?(this.floatInput.value="",this.inputChange(e)):this.hide(),void e.preventDefault()):void 0}buildFilterList(){let e=[],o=this.workspace.getToolbox();if(!o)return;let n=o.flyout_.getWorkspace().getTopBlocks(),r=s.Xml.workspaceToDom(o.flyout_.getWorkspace());const a={};for(const e of r.children)"BLOCK"===e.tagName&&(a[e.getAttribute("id")]=e);for(const t of n)this.getBlockText(t,e,a);e.sort((e,t)=>e.desc.length<t.desc.length?-1:e.desc.length>t.desc.length?1:e.desc.localeCompare(t.desc));let i=0;for(;this.dropdown.firstChild;)this.dropdown.removeChild(this.dropdown.firstChild);for(const o of e){const e=document.createElement("li"),n=o.desc;let s=this.getEdgeTypeClass(o.block);i++,e.innerText=n,e.data={text:n,lower:" "+n.toLowerCase(),option:o};const r={sensing_of:"sensing",event_whenbackdropswitchesto:"events"};let a=o.block.getCategory()||r[o.block.type]||"null";o.block.isScratchExtension?a="pen":t.tab.getCustomBlock(o.block.procCode_)&&(a="addon-custom-block"),e.className="sa-block-color sa-block-color-"+a+" sa-"+s,i>this.DROPDOWN_BLOCK_LIST_MAX_ROWS&&(e.style.display="none"),this.dropdown.appendChild(e)}this.dropdownOut.classList.add("vis")}navigateFloatFilter(e){let t,o=this.dropdown.getElementsByClassName("sel");for(o.length>0&&"none"!==o[0].style.display?t=-1===e?o[0].previousSibling:o[o.length-1].nextSibling:(t=this.dropdown.children[0],e=1);t&&"none"===t.style.display;)t=-1===e?t.previousSibling:t.nextSibling;if(t){for(const e of o)e.classList.remove("sel");t.classList.add("sel")}}getBlockText(e,t,o){let n,s,r,a=o[e.id];const i=e=>{for(const t of e.inputList){let e=t.fieldRow;for(const t of e){let e;s||"blocklyText blocklyDropdownText"!==t.className_?e=t.getText():(s=t.getOptions(),r=t.name,e=s&&s.length>0?"^^":t.getText()),n=(n?n+" ":"")+e}if(t.connection){let e=t.connection.targetBlock();e&&i(e)}}};if(i(e),s)for(const o of s){let s=o[1];"string"==typeof s&&"DELETE_VARIABLE_ID"!==s&&"RENAME_VARIABLE_ID"!==s&&"NEW_BROADCAST_MESSAGE_ID"!==s&&"NEW_BROADCAST_MESSAGE_ID"!==s&&"createGlobalVariable"!==s&&"createLocalVariable"!==s&&"createGlobalList"!==s&&"createLocalList"!==s&&"createBroadcast"!==s&&"RENAME_BROADCAST_MESSAGE_ID"!==s&&t.push({desc:n.replace("^^",o[0]),block:e,dom:a,option:o,pickField:r})}else t.push({desc:n,block:e,dom:a});return n}getEdgeTypeClass(e){switch(e.edgeShape_){case 1:return"boolean";case 2:return"reporter";default:return e.startHat_?"hat":"block"}}hide(){this.floatBar.style.display="none"}},i=s.Gesture.prototype.doWorkspaceClick_;s.Gesture.prototype.doWorkspaceClick_=function(){t.self.disabled||1!==this.mostRecentEvent_.button&&!this.mostRecentEvent_.shiftKey||a.show(this.mostRecentEvent_),i.call(this)},document.addEventListener("mousemove",e=>{r={x:e.clientX,y:e.clientY}})}},"./src/addons/addons/move-to-top-bottom/_runtime_entry.js":function(e,t,o){"use strict";o.r(t),o.d(t,"resources",(function(){return n}));const n={"userscript.js":o("./src/addons/addons/move-to-top-bottom/userscript.js").default}},"./src/addons/addons/move-to-top-bottom/userscript.js":function(e,t,o){"use strict";o.r(t),t.default=async e=>{let{addon:t,console:o,msg:n}=e;const s=["sound","costume"];t.tab.createEditorContextMenu(e=>{const o=t.tab.traps.vm.editingTarget;"sound"===e.type?o.reorderSound(e.index,0):o.reorderCostume(e.index,0),queueMicrotask(()=>{t.tab.traps.vm.emitTargetsUpdate(),t.tab.traps.vm.runtime.emitProjectChanged(),e.target.click()})},{types:s,position:"assetContextMenuAfterExport",order:1,label:n("top"),condition:e=>0!==e.index}),t.tab.createEditorContextMenu(e=>{const o=t.tab.traps.vm.editingTarget;"sound"===e.type?o.reorderSound(e.index,1/0):o.reorderCostume(e.index,1/0),queueMicrotask(()=>{t.tab.traps.vm.emitTargetsUpdate(),t.tab.traps.vm.runtime.emitProjectChanged(),e.target.click()})},{types:s,position:"assetContextMenuAfterExport",order:2,label:n("bottom"),condition:e=>e.index!==e.target.parentNode.parentNode.childElementCount-1})}},"./src/addons/addons/onion-skinning/_runtime_entry.js":function(e,t,o){"use strict";o.r(t),o.d(t,"resources",(function(){return l}));var n=o("./src/addons/addons/onion-skinning/userscript.js"),s=o("./node_modules/css-loader/index.js!./src/addons/addons/onion-skinning/style.css"),r=o.n(s),a=o("./node_modules/url-loader/dist/cjs.js!./src/addons/addons/onion-skinning/decrement.svg"),i=o("./node_modules/url-loader/dist/cjs.js!./src/addons/addons/onion-skinning/increment.svg"),c=o("./node_modules/url-loader/dist/cjs.js!./src/addons/addons/onion-skinning/settings.svg"),d=o("./node_modules/url-loader/dist/cjs.js!./src/addons/addons/onion-skinning/toggle.svg");const l={"userscript.js":n.default,"style.css":r.a,"decrement.svg":a.default,"increment.svg":i.default,"settings.svg":c.default,"toggle.svg":d.default}},"./src/addons/addons/onion-skinning/userscript.js":function(e,t,o){"use strict";o.r(t),t.default=async function(e){let{addon:t,console:o,msg:n}=e;const s=await t.tab.traps.getPaper(),r=await t.tab.waitForElement("[class^='paint-editor_canvas-container']");try{if(!("colorIndex"in t.tab.redux.state.scratchPaint.fillMode))return void o.error("Detected new paint editor; this will be supported in future versions.")}catch(e){}const a=r[t.tab.traps.getInternalKey(r)].child.child.child.stateNode,i=[],c=e=>{const t=e.substr(1),o=parseInt(t,16);return[o>>16&255,o>>8&255,255&o]},d={enabled:t.settings.get("default")&&!t.self.disabled,previous:+t.settings.get("previous"),next:+t.settings.get("next"),opacity:+t.settings.get("opacity"),opacityStep:+t.settings.get("opacityStep"),layering:t.settings.get("layering"),mode:t.settings.get("mode"),beforeTint:c(t.settings.get("beforeTint")),afterTint:c(t.settings.get("afterTint"))},l=()=>s.project.layers.find(e=>e.data.isBackgroundGuideLayer).children[0].position;let u=0;const p=()=>++u,h=()=>{p();const e=s.project;if(!e)return;i.length=0;const t=e.layers;for(let e=t.length-1;e>=0;e--){const o=t[e];o.data.sa_isOnionLayer&&o.remove()}},f=()=>{const e=s.project;if(!e)return;const t=e.layers.find(e=>e.data.sa_isOnionLayer);t&&("front"===d.layering?e.addLayer(t):0===e.layers.find(e=>e.data.isRasterLayer).index?e.insertLayer(0,t):e.insertLayer(1,t))},m=(e,t)=>{if(e.children)for(const o of e.children)m(o,t);t(e)},g=(e,t,o,n)=>{const s=n?d.beforeTint:d.afterTint,r=(e+t+o)/3/255/1.5+(1-1/1.5);return[s[0]*r,s[1]*r,s[2]*r]},b=(e,t)=>(e=>{let[t,o,n]=e;const s=Math.round(t).toString(16).padStart(2,"0"),r=Math.round(o).toString(16).padStart(2,"0"),a=Math.round(n).toString(16).padStart(2,"0");return"#".concat(s).concat(r).concat(a)})(g(255*e.red,255*e.green,255*e.blue,t)),y=(e,t)=>{const{width:o,height:n}=e.canvas,s=e.context,r=s.getImageData(0,0,o,n),a=r.data;for(let e=0;e<a.length;e+=4){const o=a[e+0],n=a[e+1],s=a[e+2];if(0===a[e+3])continue;const r=g(o,n,s,t);a[e+0]=r[0],a[e+1]=r[1],a[e+2]=r[2]}s.putImageData(r,0,0)},v=e=>{const t=e.strokeBounds,{width:o,height:n}=t,r=Math.min(3e3/o,3e3/n),a=new s.Raster(new s.Size(o,n));a.remove(),a.smoothing=!0,a.guide=!0,a.locked=!0;let i=0;const c=a.draw;return a.draw=function(){const a=this.getView().getZoom()*window.devicePixelRatio,d=Math.max(1,Math.min(r,2**Math.ceil(Math.log2(a))));if(d>i){i=d;const r=this.canvas,a=this.context,c=o*d,l=n*d;r.width=c,r.height=l,this._size=new s.Size(c,l);const u=t.getTopLeft(),p=t.getBottomRight(),h=new s.Size(p.subtract(u)),f=(new s.Matrix).scale(d).translate(u.negate());a.save(),f.applyToContext(a),e.draw(a,new s.Base({matrices:[f]})),a.restore(),this.matrix.reset(),this.transform((new s.Matrix).translate(u.add(h.divide(2))).scale(1/d))}for(var l=arguments.length,u=new Array(l),p=0;p<l;p++)u[p]=arguments[p];return c.call(this,...u)},a},k=async()=>{const e=s.project;if(!e)return;const n=(()=>{const e=document.querySelector("[class*='selector_list-item'][class*='sprite-selector-item_is-selected']");if(!e)return-1;const t=e.querySelector("[class*='sprite-selector-item_number']");return t?+t.textContent-1:-1})();if(-1===n)return;h();const r=p(),a=t.tab.traps.vm;if(!a)return;const i=e.activeLayer,c=a.editingTarget.sprite.costumes,g=Math.max(0,n-d.previous),k=Math.min(c.length-1,n+d.next);try{const e=[];for(let t=g;t<=k;t++){if(t===n)continue;const o=t<n,s=Math.abs(t-n)-1,r=(d.opacity-d.opacityStep*s)/100;r<=0||e.push({index:t,isBefore:o,opacity:r})}const t=await Promise.all(e.map(e=>{let{index:t,isBefore:o,opacity:n}=e;const r=c[t],i=a.getCostume(t);if("svg"===r.dataFormat)return((e,t,o,n)=>new Promise((r,a)=>{const{rotationCenterX:i,rotationCenterY:c}=t,u=(o=(o=o.split(/<\s*svg:/).join("<")).split(/<\/\s*svg:/).join("</")).match(/<svg [^>]*>/);u&&-1===u[0].indexOf("xmlns=")&&(o=o.replace("<svg ",'<svg xmlns="http://www.w3.org/2000/svg" '));const p=(new DOMParser).parseFromString(o,"text/xml"),h=p.documentElement.attributes.viewBox?p.documentElement.attributes.viewBox.value.match(/\S+/g):null;if(h)for(let e=0;e<h.length;e++)h[e]=parseFloat(h[e]);s.project.importSVG(o,{expandShapes:!0,insert:!1,onLoad:t=>{t?r((e=>{const t=[];return m(e,e=>{e instanceof s.Raster&&t.push(new Promise((t,o)=>{e.on("load",()=>t()),e.on("error",()=>o(new Error("Raster inside SVG failed to load")))}))}),Promise.all(t)})(t).then(()=>(t=>{if(t.opacity=e,m(t,e=>{"PathItem"===e.className&&(e.clockwise=!0),"PointText"===e.className||e.children||e.strokeWidth&&(e.strokeWidth=2*e.strokeWidth),e.locked=!0,e.guide=!0}),t.scale(2,new s.Point(0,0)),"tint"===d.mode){const e=new Set;m(t,t=>{if(t.strokeColor&&(t.strokeColor=b(t.strokeColor,n)),t.fillColor){const o=t.fillColor.gradient;if(o){if(e.has(o))return;e.add(o);for(const e of o.stops)e.color=b(e.color,n)}else t.fillColor=b(t.fillColor,n)}t.canvas&&y(t,n)})}const o=l();if(void 0!==i&&void 0!==c){let e=new s.Point(i,c);h&&h.length>=2&&!isNaN(h[0])&&!isNaN(h[1])&&(e=e.subtract(h[0],h[1])),t.translate(o.subtract(e.multiply(2)))}else t.translate(o.subtract(t.bounds.width,t.bounds.height));return v(t)})(t))):a(new Error("could not load onion skin"))}})}))(n,r,i,o);if("png"===r.dataFormat||"jpg"===r.dataFormat)return((e,t,o,n)=>new Promise((r,a)=>{let{rotationCenterX:i,rotationCenterY:c}=t;const u=new Image;u.onload=()=>{const t=l(),o=Math.min(2*t.x,u.width),a=Math.min(2*t.y,u.height);void 0===i&&(i=o/2),void 0===c&&(c=a/2);const p=new s.Raster(u);p.opacity=e,p.guide=!0,p.locked=!0;const h=o/2+(t.x-i),f=a/2+(t.y-c);p.position=new s.Point(h,f),p.remove(),"tint"===d.mode&&y(p,n),r(p)},u.onerror=()=>{a(new Error("could not load image"))},u.src=o}))(n,r,i,o);throw new Error("Unknown data format: ".concat(r.dataFormat))}));if(u===r){const e=(()=>{const e=new s.Layer;return e.locked=!0,e.guide=!0,e.data.sa_isOnionLayer=!0,e})();for(const o of t)e.addChild(o);f()}}catch(e){o.error(e)}i.activate()},w=e=>{d.enabled!==e&&(d.enabled=e,d.enabled?(0===d.next&&0===d.previous&&(d.previous=1,M.previous.value=d.previous),0===d.opacity&&(d.opacity=25,M.opacity.value=d.opacity),k()):h(),N.dataset.enabled=d.enabled)},_=e=>{0===d.previous&&0===d.next||0===d.opacity?w(!1):d.enabled?e?f():k():(d.previous>0||d.next>0)&&w(!0)},x=()=>{const e=document.createElement("div");return e.className="sa-onion-group",e},I=function(){let{useButtonTag:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=document.createElement(e?"button":"span");return t.className="sa-onion-button",t.setAttribute("role","button"),t},T=e=>{const o=document.createElement("img");return o.className="sa-onion-image",o.draggable=!1,o.dataset.image=e,o.loading="lazy",o.src=t.self.getResource("/"+e+".svg"),o},C=x();t.tab.displayNoneWhileDisabled(C,{display:"flex"});const N=I();N.dataset.enabled=d.enabled,N.addEventListener("click",()=>w(!d.enabled)),N.title=n("toggle"),N.appendChild(T("toggle"));const L=I();L.addEventListener("click",()=>E(!D())),L.title=n("settings"),L.appendChild(T("settings"));const S=document.createElement("div");S.className="sa-onion-settings-wrapper",C.append(S,N,L);const j=document.createElement("div");j.className="sa-onion-settings";const E=e=>{L.dataset.enabled=e,j.dataset.visible=e},D=()=>"true"===j.dataset.visible,M={};for(const e of["previous","next","opacity","opacityStep"]){const t=document.createElement("label");t.className="sa-onion-settings-line";const o=document.createElement("div");o.className="sa-onion-settings-label",o.textContent=n(e),t.appendChild(o);const s=x(),r=I(),a=document.createElement("div");a.style.width="20px",r.appendChild(a);const i=document.createElement("input");M[e]=i,i.className="sa-onion-settings-input",i.type="number",i.step="1",i.min="0",i.max="100",i.value=d[e],i.addEventListener("input",t=>{if(0===i.value.length)return d[e]=0,void _();let o=+i.value;o>+i.max?o=+i.max:o<0&&(o=0),i.value=o,d[e]=o,_()}),i.addEventListener("blur",()=>{i.value||(i.value="0")}),r.appendChild(i);const c=I();c.appendChild(T("decrement")),c.addEventListener("click",()=>{d[e]>0&&(d[e]--,i.value=d[e],_())});const l=I();l.appendChild(T("increment")),l.addEventListener("click",()=>{d[e]<+i.max&&(d[e]++,i.value=d[e],_())}),s.appendChild(c),s.appendChild(r),s.appendChild(l),t.appendChild(s),j.appendChild(t)}const A=document.createElement("div");A.className="sa-onion-settings-line";const O=document.createElement("div");O.className="sa-onion-settings-label",O.textContent=n("mode");const B=x();A.appendChild(O);const R=I({useButtonTag:!0});R.appendChild(document.createTextNode(n("merge"))),B.appendChild(R),R.addEventListener("click",e=>{d.mode="merge",z.dataset.enabled=!1,R.dataset.enabled=!0,_()}),R.dataset.enabled="merge"===d.mode;const z=I({useButtonTag:!0});z.appendChild(document.createTextNode(n("tint"))),B.appendChild(z),z.addEventListener("click",e=>{d.mode="tint",z.dataset.enabled=!0,R.dataset.enabled=!1,_()}),z.dataset.enabled="tint"===d.mode,A.appendChild(B),j.appendChild(A);const Z=document.createElement("div");Z.className="sa-onion-settings-line";const P=document.createElement("div");P.className="sa-onion-settings-label",P.textContent=n("layering");const W=x();Z.appendChild(P);const U=I({useButtonTag:!0});U.appendChild(document.createTextNode(n("front"))),W.appendChild(U),U.addEventListener("click",e=>{d.layering="front",G.dataset.enabled=!1,U.dataset.enabled=!0,_(!0)}),U.dataset.enabled="front"===d.layering;const G=I({useButtonTag:!0});G.appendChild(document.createTextNode(n("behind"))),W.appendChild(G),G.addEventListener("click",e=>{d.layering="behind",G.dataset.enabled=!0,U.dataset.enabled=!1,_(!0)}),G.dataset.enabled="behind"===d.layering,Z.appendChild(W),j.appendChild(Z);const H="http://www.w3.org/2000/svg",Y=document.createElementNS(H,"svg");Y.setAttribute("class","sa-onion-settings-tip"),Y.setAttribute("width","14"),Y.setAttribute("height","7");const V=document.createElementNS(H,"polygon");V.setAttribute("class","sa-onion-settings-polygon"),V.setAttribute("points","0,0 7,7, 14,0"),Y.appendChild(V),j.appendChild(Y);let F=null;t.self.addEventListener("disabled",()=>{E(!1),F=d.enabled,w(!1)}),t.self.addEventListener("reenabled",()=>{w(F)}),(()=>{const e=s.Project.prototype.addLayer;s.Project.prototype.addLayer=function(t){const o=e.call(this,t);if(t.data.isBackgroundGuideLayer){let t;for(;t=i.shift();)e.call(this,t);f()}return o};const t=s.Project.prototype.importJSON;s.Project.prototype.importJSON=function(e){const o=t.call(this,e);return d.enabled&&k(),o};const o=s.Layer.prototype.remove;s.Layer.prototype.remove=function(){if(this.data.isBackgroundGuideLayer){for(const e of s.project.layers)e.data.sa_isOnionLayer&&i.push(e);for(const e of i)e.remove()}return o.call(this)}})(),(()=>{let e=!1;const t=a.constructor,o=t.prototype.importImage;t.prototype.importImage=function(){e=!0,h();for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return o.call(this,...n)};const n=t.prototype.recalibrateSize;t.prototype.recalibrateSize=function(t){return n.call(this,()=>{t&&t(),e&&(e=!1,d.enabled&&k())})},a.recalibrateSize=t.prototype.recalibrateSize.bind(a),a.importImage=t.prototype.importImage.bind(a)})(),(async()=>{let e=!1;for(;;){const o=(await t.tab.waitForElement("[class^='paint-editor_canvas-controls']",{markAsSeen:!0,reduxEvents:["scratch-gui/navigation/ACTIVATE_TAB","scratch-gui/mode/SET_PLAYER","fontsLoaded/SET_FONTS_LOADED","scratch-gui/locales/SELECT_LOCALE","scratch-gui/targets/UPDATE_TARGET_LIST"],reduxCondition:e=>1===e.scratchGui.editorTab.activeTabIndex&&!e.scratchGui.mode.isPlayerOnly})).querySelector("[class^='paint-editor_zoom-controls']");if(t.tab.appendToSharedSpace({space:"paintEditorZoomControls",element:C,order:1}),S.appendChild(j),!e){e=!0;const t=o.firstChild.className,n=o.firstChild.firstChild.className,s=o.firstChild.firstChild.firstChild.className;for(const e of document.querySelectorAll(".sa-onion-group"))e.className+=" "+t;for(const e of document.querySelectorAll(".sa-onion-button"))e.className+=" "+n;for(const e of document.querySelectorAll(".sa-onion-image"))e.className+=" "+s}d.enabled&&k()}})()}},"./src/addons/addons/pick-colors-from-stage/_runtime_entry.js":function(e,t,o){"use strict";o.r(t),o.d(t,"resources",(function(){return a}));var n=o("./src/addons/addons/pick-colors-from-stage/userscript.js"),s=o("./node_modules/css-loader/index.js!./src/addons/addons/pick-colors-from-stage/style.css"),r=o.n(s);const a={"userscript.js":n.default,"style.css":r.a}},"./src/addons/addons/pick-colors-from-stage/userscript.js":function(e,t,o){"use strict";function n(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function s(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function r(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.r(t),t.default=async function(e){let{addon:t,msg:o,console:n}=e;const r=Symbol(),a=e=>document.body.classList.toggle("sa-stage-color-picker-picking",e);let i=!1;document.addEventListener("click",e=>{i=e.isTrusted},{capture:!0}),t.tab.redux.initialize(),t.tab.redux.addEventListener("statechanged",e=>{const o=e.detail.action;o[r]||(!t.self.disabled&&i&&"scratch-paint/eye-dropper/ACTIVATE_COLOR_PICKER"===o.type&&(a(!0),t.tab.redux.dispatch({type:"scratch-gui/color-picker/ACTIVATE_COLOR_PICKER",callback:e=>{queueMicrotask(()=>{t.tab.redux.dispatch(s(s({},o),{},{[r]:!0})),o.callback(e),o.previousMode&&o.previousMode.activate(),t.tab.redux.dispatch({type:"scratch-paint/eye-dropper/DEACTIVATE_COLOR_PICKER",[r]:!0}),a(!1)})}})),"scratch-paint/eye-dropper/DEACTIVATE_COLOR_PICKER"===o.type&&(a(!1),t.tab.redux.state.scratchGui.colorPicker.active&&t.tab.redux.dispatch({type:"scratch-gui/color-picker/DEACTIVATE_COLOR_PICKER",[r]:!0})))})}},"./src/addons/addons/rename-broadcasts/_runtime_entry.js":function(e,t,o){"use strict";o.r(t),o.d(t,"resources",(function(){return n}));const n={"userscript.js":o("./src/addons/addons/rename-broadcasts/userscript.js").default}},"./src/addons/addons/rename-broadcasts/userscript.js":function(e,t,o){"use strict";o.r(t),t.default=async function(e){let{addon:t,msg:o,console:n}=e;const s=t.tab.traps.vm,r=await t.tab.traps.getBlockly(),a=r.BROADCAST_MESSAGE_VARIABLE_TYPE,i=r.FieldVariable.dropdownCreate;r.FieldVariable.dropdownCreate=function(){const e=i.call(this);return!t.self.disabled&&this.defaultType_===a&&this.sourceBlock_.workspace.getVariableTypes().includes("broadcast_msg")&&e.push([o("RENAME_BROADCAST"),"RENAME_BROADCAST_MESSAGE_ID"]),e};const c=r.FieldVariable.prototype.onItemSelected;r.FieldVariable.prototype.onItemSelected=function(e,t){const o=this.sourceBlock_.workspace;if(!this.sourceBlock_||!o||"RENAME_BROADCAST_MESSAGE_ID"!==t.getValue())return c.call(this,e,t);p(o,this.variable_)};const d=()=>{const e=new Set(s.runtime.targets.map(e=>e.blocks));for(const t of e)t.resetCache()},l=e=>{const t=r.Events.FIRE_QUEUE_[0],o=t.run;t.run=function(t){o.call(this,t),e(t)}},u=(e,t)=>{const o=s.runtime.getTargetForStage().variables[e];o.name=t,o.value=t;const n=new Set(s.runtime.targets.map(e=>e.blocks));for(const o of n)for(const n of Object.values(o._blocks)){const o=n.fields&&n.fields.BROADCAST_OPTION;o&&o.id===e&&(o.value=t)}d()},p=(e,t)=>{const n=o("RENAME_BROADCAST_MODAL_TITLE"),i=t.name,c=t.getId(),p=o("RENAME_BROADCAST_TITLE",{name:i}),h=i;r.prompt(p,h,(function(t){(t=r.Variables.trimName_(t))&&(e.getVariable(t,a)?((e,t,o,n)=>{const a=s.runtime.getTargetForStage().lookupBroadcastByInputValue(n).id;r.Events.setGroup(!0);for(const o of e.getAllBlocks())for(const e of o.inputList)for(const o of e.fieldRow)"BROADCAST_OPTION"===o.name&&o.getValue()===t&&o.setValue(a);e.deleteVariableById(t),r.Events.setGroup(!1);const i=[],c=new Set(s.runtime.targets.map(e=>e.blocks));for(const e of c)for(const o of Object.values(e._blocks)){const e=o.fields&&o.fields.BROADCAST_OPTION;e&&e.id===t&&i.push(o)}const u=e=>{const s=e?a:t,r=e?n:o;for(const e of i){const t=e.fields.BROADCAST_OPTION;t.id=s,t.value=r}d()};u(!0),l(e=>{u(e)})})(e,c,i,t):((e,t,o,n)=>{e.renameVariableById(t,n),u(t,n),l(e=>{u(t,e?n:o)})})(e,c,i,t))}),n,a)};(()=>{const e=r.getMainWorkspace(),t=e&&e.getFlyout();if(e&&t){const o=[...e.getAllBlocks(),...t.getWorkspace().getAllBlocks()];for(const e of o)for(const t of e.inputList)for(const e of t.fieldRow)e instanceof r.FieldVariable&&(e.menuGenerator_=r.FieldVariable.dropdownCreate)}})()}},"./src/addons/libraries/common/cs/normalize-color.js":function(e,t,o){"use strict";o.r(t),o.d(t,"getHexRegex",(function(){return n})),o.d(t,"normalizeHex",(function(){return s}));const n=()=>/^#?[0-9a-fA-F]{3,8}$/,s=e=>{let t=String(e);if(!n().test(t))return"#000000";if(t.startsWith("#")||(t="#".concat(t)),4===t.length){const[e,o,n,s]=t;t="#".concat(o).concat(o).concat(n).concat(n).concat(s).concat(s)}return t.toLowerCase()}},"./src/addons/libraries/common/cs/rate-limiter.js":function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return n}));class n{constructor(e){this.timeout=null,this.callback=null,this.wait=e}abort(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.timeout&&(clearTimeout(this.timeout),e&&this.callback(),this.timeout=this.callback=null)}limit(e){this.abort(!1),this.callback=e,this.timeout=setTimeout(()=>{this.timeout=this.callback=null,e()},this.wait)}}},"./src/addons/libraries/thirdparty/cs/tinycolor-min.js":function(e,t,o){"use strict";o.r(t);const n=function(e){var t=/^\s+/,o=/\s+$/,n=0,s=e.round,r=e.min,a=e.max,i=e.random;function c(i,d){if(d=d||{},(i=i||"")instanceof c)return i;if(!(this instanceof c))return new c(i,d);var l=function(n){var s,i,c,d={r:0,g:0,b:0},l=1,u=null,p=null,h=null,f=!1,m=!1;return"string"==typeof n&&(n=function(e){e=e.replace(t,"").replace(o,"").toLowerCase();var n,s=!1;if(C[e])e=C[e],s=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(n=Z.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=Z.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Z.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=Z.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Z.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=Z.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Z.hex8.exec(e))?{r:E(n[1]),g:E(n[2]),b:E(n[3]),a:O(n[4]),format:s?"name":"hex8"}:(n=Z.hex6.exec(e))?{r:E(n[1]),g:E(n[2]),b:E(n[3]),format:s?"name":"hex"}:(n=Z.hex4.exec(e))?{r:E(n[1]+""+n[1]),g:E(n[2]+""+n[2]),b:E(n[3]+""+n[3]),a:O(n[4]+""+n[4]),format:s?"name":"hex8"}:!!(n=Z.hex3.exec(e))&&{r:E(n[1]+""+n[1]),g:E(n[2]+""+n[2]),b:E(n[3]+""+n[3]),format:s?"name":"hex"}}(n)),"object"==typeof n&&(P(n.r)&&P(n.g)&&P(n.b)?(s=n.r,i=n.g,c=n.b,d={r:255*S(s,255),g:255*S(i,255),b:255*S(c,255)},f=!0,m="%"===String(n.r).substr(-1)?"prgb":"rgb"):P(n.h)&&P(n.s)&&P(n.v)?(u=M(n.s),p=M(n.v),d=function(t,o,n){t=6*S(t,360),o=S(o,100),n=S(n,100);var s=e.floor(t),r=t-s,a=n*(1-o),i=n*(1-r*o),c=n*(1-(1-r)*o),d=s%6;return{r:255*[n,i,a,a,c,n][d],g:255*[c,n,n,i,a,a][d],b:255*[a,a,c,n,n,i][d]}}(n.h,u,p),f=!0,m="hsv"):P(n.h)&&P(n.s)&&P(n.l)&&(u=M(n.s),h=M(n.l),d=function(e,t,o){var n,s,r;function a(e,t,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?e+6*(t-e)*o:o<.5?t:o<2/3?e+(t-e)*(2/3-o)*6:e}if(e=S(e,360),t=S(t,100),o=S(o,100),0===t)n=s=r=o;else{var i=o<.5?o*(1+t):o+t-o*t,c=2*o-i;n=a(c,i,e+1/3),s=a(c,i,e),r=a(c,i,e-1/3)}return{r:255*n,g:255*s,b:255*r}}(n.h,u,h),f=!0,m="hsl"),n.hasOwnProperty("a")&&(l=n.a)),l=L(l),{ok:f,format:n.format||m,r:r(255,a(d.r,0)),g:r(255,a(d.g,0)),b:r(255,a(d.b,0)),a:l}}(i);this._originalInput=i,this._r=l.r,this._g=l.g,this._b=l.b,this._a=l.a,this._roundA=s(100*this._a)/100,this._format=d.format||l.format,this._gradientType=d.gradientType,this._r<1&&(this._r=s(this._r)),this._g<1&&(this._g=s(this._g)),this._b<1&&(this._b=s(this._b)),this._ok=l.ok,this._tc_id=n++}function d(e,t,o){e=S(e,255),t=S(t,255),o=S(o,255);var n,s,i=a(e,t,o),c=r(e,t,o),d=(i+c)/2;if(i==c)n=s=0;else{var l=i-c;switch(s=d>.5?l/(2-i-c):l/(i+c),i){case e:n=(t-o)/l+(t<o?6:0);break;case t:n=(o-e)/l+2;break;case o:n=(e-t)/l+4}n/=6}return{h:n,s:s,l:d}}function l(e,t,o){e=S(e,255),t=S(t,255),o=S(o,255);var n,s,i=a(e,t,o),c=r(e,t,o),d=i,l=i-c;if(s=0===i?0:l/i,i==c)n=0;else{switch(i){case e:n=(t-o)/l+(t<o?6:0);break;case t:n=(o-e)/l+2;break;case o:n=(e-t)/l+4}n/=6}return{h:n,s:s,v:d}}function u(e,t,o,n){var r=[D(s(e).toString(16)),D(s(t).toString(16)),D(s(o).toString(16))];return n&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function p(e,t,o,n){return[D(A(n)),D(s(e).toString(16)),D(s(t).toString(16)),D(s(o).toString(16))].join("")}function h(e,t){t=0===t?0:t||10;var o=c(e).toHsl();return o.s-=t/100,o.s=j(o.s),c(o)}function f(e,t){t=0===t?0:t||10;var o=c(e).toHsl();return o.s+=t/100,o.s=j(o.s),c(o)}function m(e){return c(e).desaturate(100)}function g(e,t){t=0===t?0:t||10;var o=c(e).toHsl();return o.l+=t/100,o.l=j(o.l),c(o)}function b(e,t){t=0===t?0:t||10;var o=c(e).toRgb();return o.r=a(0,r(255,o.r-s(-t/100*255))),o.g=a(0,r(255,o.g-s(-t/100*255))),o.b=a(0,r(255,o.b-s(-t/100*255))),c(o)}function y(e,t){t=0===t?0:t||10;var o=c(e).toHsl();return o.l-=t/100,o.l=j(o.l),c(o)}function v(e,t){var o=c(e).toHsl(),n=(o.h+t)%360;return o.h=n<0?360+n:n,c(o)}function k(e){var t=c(e).toHsl();return t.h=(t.h+180)%360,c(t)}function w(e){var t=c(e).toHsl(),o=t.h;return[c(e),c({h:(o+120)%360,s:t.s,l:t.l}),c({h:(o+240)%360,s:t.s,l:t.l})]}function _(e){var t=c(e).toHsl(),o=t.h;return[c(e),c({h:(o+90)%360,s:t.s,l:t.l}),c({h:(o+180)%360,s:t.s,l:t.l}),c({h:(o+270)%360,s:t.s,l:t.l})]}function x(e){var t=c(e).toHsl(),o=t.h;return[c(e),c({h:(o+72)%360,s:t.s,l:t.l}),c({h:(o+216)%360,s:t.s,l:t.l})]}function I(e,t,o){t=t||6,o=o||30;var n=c(e).toHsl(),s=360/o,r=[c(e)];for(n.h=(n.h-(s*t>>1)+720)%360;--t;)n.h=(n.h+s)%360,r.push(c(n));return r}function T(e,t){t=t||6;for(var o=c(e).toHsv(),n=o.h,s=o.s,r=o.v,a=[],i=1/t;t--;)a.push(c({h:n,s:s,v:r})),r=(r+i)%1;return a}c.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var t,o,n,s=this.toRgb();return t=s.r/255,o=s.g/255,n=s.b/255,.2126*(t<=.03928?t/12.92:e.pow((t+.055)/1.055,2.4))+.7152*(o<=.03928?o/12.92:e.pow((o+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:e.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=L(e),this._roundA=s(100*this._a)/100,this},toHsv:function(){var e=l(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=l(this._r,this._g,this._b),t=s(360*e.h),o=s(100*e.s),n=s(100*e.v);return 1==this._a?"hsv("+t+", "+o+"%, "+n+"%)":"hsva("+t+", "+o+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var e=d(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=d(this._r,this._g,this._b),t=s(360*e.h),o=s(100*e.s),n=s(100*e.l);return 1==this._a?"hsl("+t+", "+o+"%, "+n+"%)":"hsla("+t+", "+o+"%, "+n+"%, "+this._roundA+")"},toHex:function(e){return u(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,o,n,r){var a=[D(s(e).toString(16)),D(s(t).toString(16)),D(s(o).toString(16)),D(A(n))];return r&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:s(this._r),g:s(this._g),b:s(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+s(this._r)+", "+s(this._g)+", "+s(this._b)+")":"rgba("+s(this._r)+", "+s(this._g)+", "+s(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:s(100*S(this._r,255))+"%",g:s(100*S(this._g,255))+"%",b:s(100*S(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+s(100*S(this._r,255))+"%, "+s(100*S(this._g,255))+"%, "+s(100*S(this._b,255))+"%)":"rgba("+s(100*S(this._r,255))+"%, "+s(100*S(this._g,255))+"%, "+s(100*S(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(N[u(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+p(this._r,this._g,this._b,this._a),o=t,n=this._gradientType?"GradientType = 1, ":"";if(e){var s=c(e);o="#"+p(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+t+",endColorstr="+o+")"},toString:function(e){var t=!!e;e=e||this._format;var o=!1,n=this._a<1&&this._a>=0;return t||!n||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(o=this.toRgbString()),"prgb"===e&&(o=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(o=this.toHexString()),"hex3"===e&&(o=this.toHexString(!0)),"hex4"===e&&(o=this.toHex8String(!0)),"hex8"===e&&(o=this.toHex8String()),"name"===e&&(o=this.toName()),"hsl"===e&&(o=this.toHslString()),"hsv"===e&&(o=this.toHsvString()),o||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return c(this.toString())},_applyModification:function(e,t){var o=e.apply(null,[this].concat([].slice.call(t)));return this._r=o._r,this._g=o._g,this._b=o._b,this.setAlpha(o._a),this},lighten:function(){return this._applyModification(g,arguments)},brighten:function(){return this._applyModification(b,arguments)},darken:function(){return this._applyModification(y,arguments)},desaturate:function(){return this._applyModification(h,arguments)},saturate:function(){return this._applyModification(f,arguments)},greyscale:function(){return this._applyModification(m,arguments)},spin:function(){return this._applyModification(v,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(I,arguments)},complement:function(){return this._applyCombination(k,arguments)},monochromatic:function(){return this._applyCombination(T,arguments)},splitcomplement:function(){return this._applyCombination(x,arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(_,arguments)}},c.fromRatio=function(e,t){if("object"==typeof e){var o={};for(var n in e)e.hasOwnProperty(n)&&(o[n]="a"===n?e[n]:M(e[n]));e=o}return c(e,t)},c.equals=function(e,t){return!(!e||!t)&&c(e).toRgbString()==c(t).toRgbString()},c.random=function(){return c.fromRatio({r:i(),g:i(),b:i()})},c.mix=function(e,t,o){o=0===o?0:o||50;var n=c(e).toRgb(),s=c(t).toRgb(),r=o/100;return c({r:(s.r-n.r)*r+n.r,g:(s.g-n.g)*r+n.g,b:(s.b-n.b)*r+n.b,a:(s.a-n.a)*r+n.a})},c.readability=function(t,o){var n=c(t),s=c(o);return(e.max(n.getLuminance(),s.getLuminance())+.05)/(e.min(n.getLuminance(),s.getLuminance())+.05)},c.isReadable=function(e,t,o){var n,s,r,a,i,d=c.readability(e,t);switch(s=!1,(r=o,"AA"!==(a=((r=r||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==a&&(a="AA"),"small"!==(i=(r.size||"small").toLowerCase())&&"large"!==i&&(i="small"),n={level:a,size:i}).level+n.size){case"AAsmall":case"AAAlarge":s=d>=4.5;break;case"AAlarge":s=d>=3;break;case"AAAsmall":s=d>=7}return s},c.mostReadable=function(e,t,o){var n,s,r,a,i=null,d=0;s=(o=o||{}).includeFallbackColors,r=o.level,a=o.size;for(var l=0;l<t.length;l++)(n=c.readability(e,t[l]))>d&&(d=n,i=c(t[l]));return c.isReadable(e,i,{level:r,size:a})||!s?i:(o.includeFallbackColors=!1,c.mostReadable(e,["#fff","#000"],o))};var C=c.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},N=c.hexNames=function(e){var t={};for(var o in e)e.hasOwnProperty(o)&&(t[e[o]]=o);return t}(C);function L(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function S(t,o){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(t)&&(t="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(t);return t=r(o,a(0,parseFloat(t))),n&&(t=parseInt(t*o,10)/100),e.abs(t-o)<1e-6?1:t%o/parseFloat(o)}function j(e){return r(1,a(0,e))}function E(e){return parseInt(e,16)}function D(e){return 1==e.length?"0"+e:""+e}function M(e){return e<=1&&(e=100*e+"%"),e}function A(t){return e.round(255*parseFloat(t)).toString(16)}function O(e){return E(e)/255}var B,R,z,Z=(R="[\\s|\\(]+("+(B="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+B+")[,|\\s]+("+B+")\\s*\\)?",z="[\\s|\\(]+("+B+")[,|\\s]+("+B+")[,|\\s]+("+B+")[,|\\s]+("+B+")\\s*\\)?",{CSS_UNIT:new RegExp(B),rgb:new RegExp("rgb"+R),rgba:new RegExp("rgba"+z),hsl:new RegExp("hsl"+R),hsla:new RegExp("hsla"+z),hsv:new RegExp("hsv"+R),hsva:new RegExp("hsva"+z),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function P(e){return!!Z.CSS_UNIT.exec(e)}return c}(Math);t.default=n}}]);
//# sourceMappingURL=addon-default-entry.js.map